(this.webpackJsonpsit_centre=this.webpackJsonpsit_centre||[]).push([[0],{242:function(e,t,a){e.exports=a(436)},267:function(e,t,a){},290:function(e,t,a){},422:function(e,t,a){},435:function(e,t,a){},436:function(e,t,a){"use strict";a.r(t);var n,r,c,i,o=a(0),s=a.n(o),l=a(38),u=a.n(l),d=a(41),m=a(15),f=a(64),p=a(7),b=a(14),g=a(28),y=a(8),h=a.n(y),O=a(17),v=a(32),j=a.n(v),E=Object(d.b)("admin/getAuth",function(){var e=Object(O.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/sc-api-gateway/acl/users/current",e.next=3,j.a.get("/sc-api-gateway/acl/users/current",t.config).then((function(e){if(200===e.status)return localStorage.setItem("user",JSON.stringify({config:t.user,auth:e.data})),e.data}));case 3:return a=e.sent,e.abrupt("return",{data:a,config:t.config});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),w=Object(d.b)("admin/getAuthorities",function(){var e=Object(O.a)(h.a.mark((function e(t){var a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="/sc-api-gateway/acl/roles/".concat(t.id,"/authorities"),e.next=3,j.a.get(a,t.config).then((function(e){return e.data}));case 3:return n=e.sent,e.abrupt("return",{role:t.repr,data:n,id:t.id});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),k=Object(d.b)("admin/getOrganisationList",function(){var e=Object(O.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/sc-api-gateway/acl/organisations",e.next=3,j.a.get("/sc-api-gateway/acl/organisations",t).then((function(e){return e.data})).catch((function(e){return console.log(e)}));case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),x=Object(d.b)("admin/putOrganisationList",function(){var e=Object(O.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.put("/sc-api-gateway/acl/organisations/".concat(t.id),t);case 2:return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),I=Object(d.c)({name:"admin",initialState:{auth:{data:{},status:"idle",error:""},authorities:{data:[],status:"idle",error:null},organisationList:{data:[],status:"idle",error:null}},reducers:{logout:function(e){e.auth.status="idle",e.auth.data={}},setAuth:function(e,t){e.auth.status="success",e.auth.data=t.payload.auth,e.config=t.payload.config},setAuthorities:function(e){e.authorities.status="idle",e.authorities.data=[]}},extraReducers:(n={},Object(p.a)(n,E.pending,(function(e){e.auth.status="loading"})),Object(p.a)(n,E.fulfilled,(function(e,t){e.auth.status="success",e.auth.data=t.payload.data,e.config=t.payload.config})),Object(p.a)(n,E.rejected,(function(e,t){e.auth.status="failed",e.auth.error=t.payload})),Object(p.a)(n,w.pending,(function(e){e.authorities.status="loading"})),Object(p.a)(n,w.fulfilled,(function(e,t){e.authorities.status="success",e.authorities.data=[t.payload].concat(Object(g.a)(e.authorities.data))})),Object(p.a)(n,w.rejected,(function(e,t){e.authorities.status="failed",e.authorities.error=t.payload})),Object(p.a)(n,k.pending,(function(e){e.organisationList.status="loading"})),Object(p.a)(n,k.fulfilled,(function(e,t){e.organisationList.status="success",e.organisationList.data=t.payload})),Object(p.a)(n,k.rejected,(function(e,t){e.organisationList.status="failed",e.organisationList.error=t.payload})),Object(p.a)(n,x.pending,(function(e){e.organisationList.status="loading"})),Object(p.a)(n,x.fulfilled,(function(e,t){e.organisationList.status="success",e.organisationList.data=e.organisationList.data.map((function(e){return e.id===t.payload.id?Object(b.a)({},t.payload):e}))})),Object(p.a)(n,x.rejected,(function(e,t){e.organisationList.status="failed",e.organisationList.error=t.payload})),n)}),_=I.actions,C=_.logout,F=_.setAuth,D=_.setAuthorities,S=I.reducer,N="/sc-roadworks/api/roadworks",M=Object(d.b)("roadmap/getRoadmapOrganisations",Object(O.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.get("/sc-roadworks/api/organisations").then((function(e){return e.data}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))),R=Object(d.b)("roadmap/getRoadmapRegions",Object(O.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.get("/sc-roadworks/api/regions").then((function(e){return e.data}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))),Y=Object(d.b)("roadmap/getRoadmapCategories",Object(O.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.get("/sc-roadworks/api/categories").then((function(e){return e.data}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))),L=Object(d.b)("roadmap/getRoadmap",Object(O.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.get(N).then((function(e){return e.data}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))),T=Object(d.b)("roadmap/getIntersections",Object(O.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.get("/sc-roadworks/api/intersections").then((function(e){return e.data}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))),V=Object(d.b)("roadmap/postRoadmap",function(){var e=Object(O.a)(h.a.mark((function e(t){var a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.post(N,t.data);case 2:return a=e.sent,e.next=5,j.a.post("/sc-roadworks/api/roadworks/".concat(a.data,"/geometries"),{geometries:t.geometries});case 5:return n=t.mapData.map((function(e){return"polyline"===e.type?e.coordinates:e.coordinates[0]})),e.abrupt("return",{data:JSON.parse(a.config.data),id:a.data,geometries:{type:"polygon",coordinates:n}});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),A=Object(d.b)("roadmap/postIntersections",function(){var e=Object(O.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.post("/sc-roadworks/api/intersections",t);case 2:return a=e.sent,e.abrupt("return",Object(b.a)({id:a.data},t,{intersection:{coordinates:[],type:"Point"}}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),q=Object(d.b)("roadmap/putRoadmap",function(){var e=Object(O.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.reedit){e.next=11;break}return e.next=3,j.a.put("".concat(N,"/").concat(t.id),Object(b.a)({},t.data.data,{"status-form":t.data.data.status}));case 3:return e.next=5,j.a.delete("/sc-roadworks/api/roadworks/".concat(t.id,"/geometries"));case 5:return e.next=7,j.a.post("/sc-roadworks/api/roadworks/".concat(t.id,"/geometries"),{geometries:t.data.geometries});case 7:return a=t.mapData.map((function(e){return"polyline"===e.type?e.coordinates:e.coordinates[0]})),e.abrupt("return",{reedit:t.reedit,data:t.data.data,id:t.id,geometries:{type:"polygon",coordinates:a}});case 11:return e.next=13,j.a.put("".concat(N,"/").concat(t.id),{"status-form":t.data});case 13:return e.abrupt("return",t);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),B=Object(d.b)("roadmap/deleteRoadmap",function(){var e=Object(O.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.delete("".concat(N,"/").concat(t));case 2:return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),P=Object(d.b)("roadmap/deleteIntersection",function(){var e=Object(O.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.delete("".concat("/sc-roadworks/api/intersections","/").concat(t));case 2:return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),z=Object(d.c)({name:"roadmap",initialState:{organisations:{status:"idle",data:[],error:null},regions:{status:"idle",data:[],error:null},categories:{status:"idle",data:[],error:null},data:[],status:"idle",error:null,formData:{},current:0,mapData:[],intersectionsMapData:[],editedId:null,deletedId:null,deletedIntersectionId:null,intersections:{status:"idle",error:null,data:[]}},reducers:{formValidate:function(e,t){e.formData=Object(b.a)({},e.formData,{},t.payload)},setCurrent:function(e,t){e.current=t.payload},setMapData:function(e,t){e.mapData=[].concat(Object(g.a)(e.mapData),Object(g.a)(t.payload))},setIntersectionsMapData:function(e,t){e.intersectionsMapData=t.payload},resetMapData:function(e){e.mapData=[]},resetIntersectionsMapData:function(e){e.intersectionsMapData=[]},resetData:function(e){e.data=[],e.status="idle"},resetFormData:function(e){e.formData={}},resetIntersectionsData:function(e){e.intersections.data=[],e.intersections.status="idle"},setEditedId:function(e){e.editedId=null},setDeletedId:function(e){e.deletedId=null},setDeletedIntersectionId:function(e){e.deletedIntersectionId=null}},extraReducers:(r={},Object(p.a)(r,M.fulfilled,(function(e,t){e.organisations.status="success",e.organisations.data=t.payload})),Object(p.a)(r,M.pending,(function(e){e.organisations.status="loading"})),Object(p.a)(r,M.rejected,(function(e,t){e.organisations.status="failed",e.organisations.error=t.payload})),Object(p.a)(r,R.fulfilled,(function(e,t){e.regions.status="success",e.regions.data=t.payload})),Object(p.a)(r,R.pending,(function(e,t){e.regions.status="loading"})),Object(p.a)(r,R.rejected,(function(e,t){e.regions.status="failed",e.regions.error=t.payload})),Object(p.a)(r,Y.fulfilled,(function(e,t){e.categories.status="success",e.categories.data=t.payload})),Object(p.a)(r,Y.pending,(function(e,t){e.categories.status="loading"})),Object(p.a)(r,Y.rejected,(function(e,t){e.categories.status="failed",e.categories.error=t.payload})),Object(p.a)(r,L.fulfilled,(function(e,t){e.status="success",e.data=t.payload})),Object(p.a)(r,L.pending,(function(e,t){e.status="loading"})),Object(p.a)(r,L.rejected,(function(e,t){e.status="failed",e.error=t.payload})),Object(p.a)(r,V.pending,(function(e){e.status="loading"})),Object(p.a)(r,V.fulfilled,(function(e,t){e.status="success";var a=t.payload.data,n=t.payload.id,r=t.payload.geometries,c=e.categories.data.find((function(e){return e.id===t.payload.data.category})).name,i=e.regions.data.find((function(e){return e.id===t.payload.data.region})).name,o=e.organisations.data.find((function(e){return e.id===t.payload.data.organisation})).name;a=Object(b.a)({},a,{category:c,region:i,organisation:o,id:n,geometries:r}),e.data=[a].concat(Object(g.a)(e.data))})),Object(p.a)(r,q.pending,(function(e,t){e.status="loading"})),Object(p.a)(r,q.fulfilled,(function(e,t){e.status="success";var a=e.data.findIndex((function(e){return e.id===t.payload.id}));if(e.editedId=t.payload.id,t.payload.reedit){console.log(t.payload,t.payload.data);var n=e.categories.data.find((function(e){return e.id===t.payload.data.category})).name,r=e.regions.data.find((function(e){return e.id===t.payload.data.region})).name,c=e.organisations.data.find((function(e){return e.id===t.payload.data.organisation})).name;e.data[a]=Object(b.a)({},t.payload.data,{category:n,region:r,organisation:c,id:t.payload.id}),e.data[a].geometries=t.payload.geometries}else e.data[a].status=Object(b.a)({},e.data[a].status,{},t.payload.data)})),Object(p.a)(r,B.pending,(function(e){e.status="loading"})),Object(p.a)(r,B.fulfilled,(function(e,t){e.status="success";var a=e.data.findIndex((function(e){return e.id===t.payload}));e.data.splice(a,1),e.deletedId=t.payload})),Object(p.a)(r,T.fulfilled,(function(e,t){e.intersections.status="success",e.intersections.data=t.payload})),Object(p.a)(r,T.pending,(function(e){e.intersections.status="loading"})),Object(p.a)(r,T.rejected,(function(e,t){e.intersections.status="failed",e.intersections.error=t.payload})),Object(p.a)(r,A.pending,(function(e){e.intersections.status="loading"})),Object(p.a)(r,A.fulfilled,(function(e,t){e.intersections.status="success",e.intersections.data=[t.payload].concat(Object(g.a)(e.intersections.data))})),Object(p.a)(r,P.pending,(function(e){e.intersections.status="loading"})),Object(p.a)(r,P.fulfilled,(function(e,t){e.intersections.status="success";var a=e.intersections.data.findIndex((function(e){return e.id===t.payload}));e.intersections.data.splice(a,1),e.deletedIntersectionId=t.payload,console.log(t.payload,a)})),r)}),W=z.actions,U=W.formValidate,H=W.setCurrent,J=W.setMapData,K=W.setIntersectionsMapData,G=(W.setIntersection,W.resetFormData),Q=W.setEditedId,X=W.setDeletedId,Z=W.setDeletedIntersectionId,$=W.resetIntersectionsMapData,ee=W.resetMapData,te=(W.resetData,W.resetIntersectionsData,z.reducer),ae=a(155),ne=Object(d.b)("admin/getRoles",function(){var e=Object(O.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/sc-api-gateway/acl/roles",!1,e.next=4,j.a.get("/sc-api-gateway/acl/roles",t.config).then((function(e){return e.data})).catch((function(e){return console.log(e)}));case 4:return a=e.sent,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),re=Object(d.b)("admin/getModules",function(){var e=Object(O.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/sc-api-gateway/acl/modules",e.next=3,j.a.get("/sc-api-gateway/acl/modules",t).then((function(e){return e.data})).catch((function(e){return console.log(e)}));case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ce=Object(d.b)("admin/getRoleModules",function(){var e=Object(O.a)(h.a.mark((function e(t){var a,n,r,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=[],n=Object(ae.a)(t.roles),e.prev=2,c=h.a.mark((function e(){var n,c,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.value,c="/sc-api-gateway/acl/roles/".concat(n.id,"/authorities"),e.next=4,j.a.get(c,t.config).then((function(e){return{id:n.id,repr:n.repr,"permitted-modules":e.data}})).catch((function(e){return console.log(e)}));case 4:i=e.sent,a=[].concat(Object(g.a)(a),[i]);case 6:case"end":return e.stop()}}),e)})),n.s();case 5:if((r=n.n()).done){e.next=9;break}return e.delegateYield(c(),"t0",7);case 7:e.next=5;break;case 9:e.next=14;break;case 11:e.prev=11,e.t1=e.catch(2),n.e(e.t1);case 14:return e.prev=14,n.f(),e.finish(14);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,null,[[2,11,14,17]])})));return function(t){return e.apply(this,arguments)}}()),ie=Object(d.b)("admin/postRoleModules",function(){var e=Object(O.a)(h.a.mark((function e(t){var a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.post("/sc-api-gateway/acl/roles",t.post_new_role_module).then((function(e){return e.data}));case 2:return a=e.sent,e.next=5,j.a.get("/sc-api-gateway/acl/roles/".concat(a,"/authorities")).then((function(e){return e.data}));case 5:return n=e.sent,e.abrupt("return",Object(b.a)({},t.record_new_role_module,{id:a,"permitted-modules":n}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),oe=Object(d.b)("admin/putRoleModule",function(){var e=Object(O.a)(h.a.mark((function e(t){var a,n,r,c,i,o,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.removed.length>0)){e.next=18;break}a=Object(ae.a)(t.removed),e.prev=2,a.s();case 4:if((n=a.n()).done){e.next=10;break}return r=n.value,e.next=8,j.a.delete("/sc-api-gateway/acl/authorities/".concat(r));case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),a.e(e.t0);case 15:return e.prev=15,a.f(),e.finish(15);case 18:if(!(t.added.length>0)){e.next=36;break}c=Object(ae.a)(t.added),e.prev=20,c.s();case 22:if((i=c.n()).done){e.next=28;break}return o=i.value,e.next=26,j.a.post("/sc-api-gateway/acl/roles/".concat(t.id,"/authorities"),{"module-id":o});case 26:e.next=22;break;case 28:e.next=33;break;case 30:e.prev=30,e.t1=e.catch(20),c.e(e.t1);case 33:return e.prev=33,c.f(),e.finish(33);case 36:return e.next=38,j.a.put("/sc-api-gateway/acl/roles/".concat(t.id),{repr:t.repr});case 38:return e.next=40,j.a.get("/sc-api-gateway/acl/roles/".concat(t.id,"/authorities")).then((function(e){return e.data}));case 40:return s=e.sent,e.abrupt("return",{id:t.id,repr:t.repr,"permitted-modules":s});case 42:case"end":return e.stop()}}),e,null,[[2,12,15,18],[20,30,33,36]])})));return function(t){return e.apply(this,arguments)}}()),se=Object(d.b)("admin/deleteRoleModule",function(){var e=Object(O.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j.a.delete("/sc-api-gateway/acl/roles/".concat(t)),e.abrupt("return",t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),le=Object(d.c)({name:"roles",initialState:{roles:{data:[],status:"idle",error:""},modules:{data:[],status:"idle",error:""},role_modules:{data:[],status:"idle",error:""}},reducers:{resetRoles:function(e){e.roles.status="idle",e.roles.data=[]},resetModules:function(e){e.modules.status="idle",e.modules.data=[]},resetRoleModules:function(e){e.role_modules.status="idle",e.role_modules.data=[]}},extraReducers:(c={},Object(p.a)(c,ne.pending,(function(e){e.roles.status="loading"})),Object(p.a)(c,ne.fulfilled,(function(e,t){e.roles.status="success",e.roles.data=t.payload})),Object(p.a)(c,ne.failed,(function(e,t){e.roles.status="failed",e.roles.error=t.payload})),Object(p.a)(c,re.pending,(function(e){e.modules.status="loading"})),Object(p.a)(c,re.fulfilled,(function(e,t){e.modules.status="success",e.modules.data=t.payload})),Object(p.a)(c,re.failed,(function(e,t){e.modules.status="failed",e.modules.error=t.payload})),Object(p.a)(c,ce.pending,(function(e){e.role_modules.status="loading"})),Object(p.a)(c,ce.fulfilled,(function(e,t){e.role_modules.status="success",e.role_modules.data=t.payload})),Object(p.a)(c,ce.failed,(function(e,t){e.role_modules.status="failed",e.role_modules.error=t.payload})),Object(p.a)(c,ie.pending,(function(e){e.role_modules.status="loading"})),Object(p.a)(c,ie.fulfilled,(function(e,t){e.role_modules.status="success",e.role_modules.data=[t.payload].concat(Object(g.a)(e.role_modules.data)),e.roles.data=[{repr:t.payload.repr,id:t.payload.id}].concat(Object(g.a)(e.roles.data))})),Object(p.a)(c,ie.failed,(function(e,t){e.role_modules.status="failed",e.role_modules.error=t.payload})),Object(p.a)(c,oe.pending,(function(e){e.role_modules.status="loading"})),Object(p.a)(c,oe.fulfilled,(function(e,t){var a=t.payload;e.role_modules.status="success",e.role_modules.data=e.role_modules.data.map((function(e){return e.id===a.id?a:e})),e.roles.data=e.roles.data.map((function(e){return e.id===a.id?{id:a.id,repr:a.repr}:e}))})),Object(p.a)(c,oe.failed,(function(e,t){e.role_modules.status="failed",e.role_modules.error=t.payload})),Object(p.a)(c,se.pending,(function(e){e.role_modules.status="loading"})),Object(p.a)(c,se.fulfilled,(function(e,t){e.role_modules.status="success";var a=e.role_modules.data.findIndex((function(e){return e.id===t.payload}));e.role_modules.data.splice(a,1);var n=e.roles.data.findIndex((function(e){return e.id===t.payload}));e.roles.data.splice(n,1)})),Object(p.a)(c,se.failed,(function(e,t){e.role_modules.status="failed",e.role_modules.error=t.payload})),c)}),ue=le.actions,de=(ue.resetRoles,ue.resetModules,ue.resetRoleModules,le.reducer),me=a(201),fe=Object(d.b)("admin/getUsers",function(){var e=Object(O.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/sc-api-gateway/acl/users",e.next=3,j.a.get("/sc-api-gateway/acl/users",t).then((function(e){return e.data}));case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),pe=Object(d.b)("admin/postNewUser",function(){var e=Object(O.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/sc-api-gateway/acl/users",e.next=3,j.a.post("/sc-api-gateway/acl/users",t.post).then((function(e){return console.log(e),e.data}));case 3:return a=e.sent,e.abrupt("return",Object(b.a)({"account-id":a},t.record));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),be=Object(d.b)("admin/putUser",function(){var e=Object(O.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="/sc-api-gateway/acl/users/".concat(t.record["account-id"]),e.next=3,j.a.put(a,t.post);case 3:return e.abrupt("return",t.record);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ge=Object(d.b)("admin/deleteUser",function(){var e=Object(O.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="/sc-api-gateway/acl/users/".concat(t),e.next=3,j.a.delete(a);case 3:return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ye=Object(d.c)({name:"roles",initialState:{data:[],status:"idle",error:""},reducers:{},extraReducers:(i={},Object(p.a)(i,fe.pending,(function(e){e.status="loading"})),Object(p.a)(i,fe.fulfilled,(function(e,t){e.status="success",e.data=t.payload})),Object(p.a)(i,fe.failed,(function(e,t){e.status="failed",e.error=t.payload})),Object(p.a)(i,pe.pending,(function(e){e.status="loading"})),Object(p.a)(i,pe.fulfilled,(function(e,t){e.status="success",e.data=[t.payload].concat(Object(g.a)(e.data))})),Object(p.a)(i,pe.failed,(function(e,t){e.status="failed",e.error=t.payload})),Object(p.a)(i,be.pending,(function(e){e.status="loading"})),Object(p.a)(i,be.fulfilled,(function(e,t){console.log(t.payload),e.status="success",e.data=e.data.map((function(e){return e["account-id"]===t.payload["account-id"]?t.payload:e}))})),Object(p.a)(i,be.failed,(function(e,t){e.status="failed",e.error=t.payload})),Object(p.a)(i,ge.pending,(function(e){e.status="loading"})),Object(p.a)(i,ge.fulfilled,(function(e,t){e.status="success";var a=e.data.findIndex((function(e){return e.id===t.payload}));e.data.splice(a,1)})),Object(p.a)(i,ge.failed,(function(e,t){e.status="failed",e.error=t.payload})),i)});Object(me.a)(ye.actions);var he,Oe=ye.reducer,ve=Object(d.b)("admin/getHeads",function(){var e=Object(O.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/sc-api-gateway/acl/supervisors",e.next=3,j.a.get("/sc-api-gateway/acl/supervisors",t).then((function(e){return e.data})).catch((function(e){return console.log(e)}));case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),je=Object(d.b)("admin/putHeads",function(){var e=Object(O.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.put("/sc-api-gateway/acl/supervisors/".concat(t.id),t.server);case 2:return e.abrupt("return",{id:t.id,record:t.client});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Ee=Object(d.c)({name:"heads",initialState:{data:[],status:"idle",error:null},reducers:{},extraReducers:(he={},Object(p.a)(he,ve.pending,(function(e){e.status="loading"})),Object(p.a)(he,ve.fulfilled,(function(e,t){e.status="success",e.data=t.payload})),Object(p.a)(he,ve.failed,(function(e,t){e.status="failed",e.error=t.payload})),Object(p.a)(he,je.pending,(function(e){e.status="loading"})),Object(p.a)(he,je.fulfilled,(function(e,t){e.status="success",e.data=e.data.map((function(e){return e["supervisor-id"]===t.payload.id?Object(b.a)({},e,{},t.payload.record):e}))})),Object(p.a)(he,je.failed,(function(e,t){e.status="failed",e.error=t.payload})),he)}).reducer,we=(a(267),a(49)),ke=a(110),xe=a(10),Ie=a(80),_e=a(47),Ce=a(452),Fe=a(453),De=a(454),Se=a(455),Ne=function(e,t){switch(t){case"\u0410\u043d\u0430\u043b\u0438\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0438\u043d\u0434\u0438\u043a\u0430\u0442\u043e\u0440\u044b":case"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u0438 \u0438\u043d\u0434\u0438\u043a\u0430\u0442\u043e\u0440\u043e\u0432":case"\u0421\u043f\u0440\u0430\u0432\u043e\u0447\u043d\u0438\u043a\u0438":case"\u0420\u0435\u043c\u043e\u043d\u0442 \u0434\u043e\u0440\u043e\u0433":return Me(e,"\u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043c\u0430\u0441\u0442\u0435\u0440-\u0434\u0430\u043d\u043d\u044b\u043c\u0438",t);case"\u0420\u043e\u043b\u0438":case"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438":return Me(e,"\u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f\u043c\u0438",t);case"\u0420\u0443\u043a\u043e\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u0438":return Me(e,"\u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u043e\u043d\u043d\u043e\u0439 \u043f\u0430\u043d\u0435\u043b\u044c\u044e",t);default:return e}},Me=function(e,t,a){var n=e[t];return e=n?Object(b.a)({},e,Object(p.a)({},t,{submenu:t,menuitems:[].concat(Object(g.a)(n.menuitems),[a])})):Object(b.a)({},e,Object(p.a)({},t,{submenu:t,menuitems:[a]}))},Re=Ie.a.SubMenu,Ye=s.a.memo((function(e){var t=e.width,a=Object(o.useState)({collapsed:!1,btnheight:50}),n=Object(xe.a)(a,2),r=n[0],c=n[1],i=Object(m.c)((function(e){return e.admin})).authorities;Object(o.useEffect)((function(){t<600&&c((function(e){return Object(b.a)({},e,{disabled:!0,collapsed:!1})}))}),[t]);var l=Object(o.useMemo)((function(){var e={};return i.data.forEach((function(t){t.data.forEach((function(t){e=Object(b.a)({},e,Object(p.a)({},t["permitted-module"],t["permitted-module"]))}))})),function(e){var t={};return e.forEach((function(e){t=Object(b.a)({},t,{},Ne(t,e))})),Object.values(t)}(Object.values(e)).map((function(e,t){return s.a.createElement(Re,{key:e.submenu,icon:t%2===0?s.a.createElement(Ce.a,null):s.a.createElement(Fe.a,null),title:e.submenu,className:"SideNavMenu_style_sub_menu"},e.menuitems.map((function(e){return s.a.createElement(Ie.a.Item,{key:e,icon:s.a.createElement(De.a,null),className:"SideNavMenu_style_menu_item"},s.a.createElement(f.b,{to:"".concat(e)},e))})))}))}),[i]);return s.a.createElement("div",{style:{width:t<600?"100%":r.collapsed?80:350},className:"SideNavMenu_style"},s.a.createElement(_e.a,{type:"primary",onClick:function(){c((function(e){return Object(b.a)({},e,{collapsed:!e.collapsed})}))},style:{height:r.btnheight,width:"100%"},className:"SideNavMenu_style_button"},t>600&&r.collapsed?s.a.createElement(Se.a,null):"\u041f\u0430\u043d\u0435\u043b\u044c \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u0430"),s.a.createElement(Ie.a,{defaultSelectedKeys:["1"],defaultOpenKeys:["\u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f\u043c\u0438","\u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043c\u0430\u0441\u0442\u0435\u0440-\u0434\u0430\u043d\u043d\u044b\u043c\u0438","\u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u043e\u043d\u043d\u043e\u0439 \u043f\u0430\u043d\u0435\u043b\u044c\u044e"],mode:"inline",inlineCollapsed:!(t<600)&&r.collapsed,style:{height:"100%"}},l))})),Le=a(203),Te=a(456),Ve=s.a.memo((function(e){var t=e.children,a=Object(m.c)((function(e){return e.admin})).auth,n=Object(m.b)(),r=Object(we.g)();return s.a.createElement("div",{style:{width:"100%",height:"100%"},className:"MainContent_style"},s.a.createElement("div",{className:"header header-user-wrapper MainContent_style_header"},s.a.createElement("div",{className:"MainContent_style_href"}),s.a.createElement("div",{className:"MainContent_style_header"},s.a.createElement(Le.a,{icon:s.a.createElement(Te.a,null)}),s.a.createElement("span",{style:{margin:"0 1rem"},className:"MainContent_style_header_fio"},"success"===a.status&&"".concat(a.data.name,"/").concat(a.data.organisation.abbreviation,"-").concat(a.data.organisation["full-name"])),s.a.createElement(_e.a,{onClick:function(){n(C()),n(D()),localStorage.removeItem("user"),r.push("/\u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f")}},"\u0412\u044b\u0439\u0442\u0438"))),s.a.createElement("div",{className:"main-content-wrapper MainContent_style_body"},t))})),Ae=s.a.memo((function(e){var t=e.children,a=Object(o.useState)(window.innerWidth),n=Object(xe.a)(a,2),r=n[0],c=n[1];return Object(o.useEffect)((function(){var e=function(){c(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),s.a.createElement("div",{className:"App Admin_main_style",style:{display:r<600?"block":"flex"}},s.a.createElement(Ye,{width:r}),s.a.createElement(Ve,null,s.a.createElement("div",{style:{width:"100%",margin:"20px auto",padding:5},className:"Admin_main_style_content"},t)))})),qe=function(e){var t=e.component,a=Object(ke.a)(e,["component"]);return s.a.createElement(we.b,Object.assign({},a,{render:function(e){return localStorage.getItem("user")?s.a.createElement(Ae,null,s.a.createElement(t,null)):s.a.createElement(we.a,{to:{pathname:"/\u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f",state:{from:e.location}}})}}))},Be=a(439),Pe=a(446),ze=a(444),We=(a(290),function(){var e=Be.a.useForm(),t=Object(xe.a)(e,1)[0],a=Object(we.g)(),n=Object(m.c)((function(e){return e.admin})).auth,r=Object(m.b)();Object(o.useEffect)((function(){return"success"===n.status&&Pe.a.success("\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f \u043f\u0440\u043e\u0448\u043b\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e"),"failed"===n.status&&Pe.a.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438"),function(){a.push("/")}}),[n,a]);var c=function(){var e=Object(O.a)(h.a.mark((function e(){var a,n,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.validateFields();case 2:a=e.sent,n="Basic ".concat(btoa("".concat(a.username,":").concat(a.password))),r(E({config:c={headers:{Authorization:n}},user:c}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return s.a.createElement("div",{className:"Form_main_style"},s.a.createElement("div",{className:"Form_style_wrapper"},s.a.createElement("div",{className:"title_back"},"\u041f\u0430\u043d\u0435\u043b\u044c \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u0430 ",s.a.createElement("br",null),"\u0421\u0438\u0442\u0443\u0430\u0446\u0438\u043e\u043d\u043d\u043e\u0433\u043e \u0446\u0435\u043d\u0442\u0440\u0430 \u0433\u043e\u0440\u043e\u0434\u0430 \u0430\u043b\u043c\u0430\u0442\u044b"),s.a.createElement(Be.a,{form:t,className:"Form_style_wrap"},s.a.createElement(Be.a.Item,{name:"username",className:"Form_style",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043b\u043e\u0433\u0438\u043d"}]},s.a.createElement(ze.a,{placeholder:"\u041b\u043e\u0433\u0438\u043d",className:"Form_style_item login"})),s.a.createElement(Be.a.Item,{name:"password",className:"Form_style",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c"}]},s.a.createElement(ze.a,{placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",type:"password",className:"Form_style_item password"})),s.a.createElement("div",{className:"Form_btn"},s.a.createElement("div",{onClick:function(){t.resetFields()}},s.a.createElement("span",null,"\u0441\u0431\u0440\u043e\u0441\u0438\u0442\u044c")),s.a.createElement("div",{onClick:c},s.a.createElement("span",null,"\u043f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c"))))))}),Ue=a(451),He=a(437),Je=a(438),Ke=a(457),Ge=a(458),Qe=a(459),Xe=a(460),Ze=a(119),$e=a(237),et=a(450),tt=function(e){var t=e.editing,a=e.dataIndex,n=e.placeholder,r=e.title,c=e.data,i=e.inputType,o=(e.record,e.index,e.children),l=e.notRequired,u=Object(ke.a)(e,["editing","dataIndex","placeholder","title","data","inputType","record","index","children","notRequired"]),d=Ze.a.Option,m=function(e){switch(e){case"select":return s.a.createElement(Ze.a,{placeholder:n,allowClear:!0},c.map((function(e){return s.a.createElement(d,{key:"".concat(e,"- ").concat(n),value:e},e)})));case"multi-select":return s.a.createElement(Ze.a,{placeholder:"\u041c\u043e\u0434\u0443\u043b\u0438",mode:"multiple",tagRender:function(e){var t=e.label,a=e.closable,n=e.onClose;return s.a.createElement($e.a,{closable:a,onClose:n,style:{marginRight:3}},t)},style:{width:"100%",marginBottom:15},options:c});case"number":return s.a.createElement(et.a,{min:0,max:100,formatter:function(e){return"".concat(e,"%")},parser:function(e){return e.replace("%","")}});default:return s.a.createElement(ze.a,{className:"Edit_input_style",placeholder:n,allowClear:!0})}}(i);return s.a.createElement("td",u,t?s.a.createElement(Be.a.Item,{name:a,style:{margin:0},rules:[{required:l||!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 ".concat(r,"!")}]},m):o)},at=function(e){var t=Be.a.useForm(),a=Object(xe.a)(t,1)[0],n=Object(o.useState)(""),r=Object(xe.a)(n,2),c=r[0],i=r[1],l=[].concat(Object(g.a)(e.columns),[{title:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0435",dataIndex:"",width:"5%",align:"center",key:"x",render:function(t,n){return u(n)?s.a.createElement("span",null,s.a.createElement("a",{onClick:function(){return f(n.key)},style:{marginRight:8}},s.a.createElement(Ke.a,{className:"icon_edit_btn_style",title:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})),s.a.createElement(Ue.a,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043e\u043c\u0435\u043d\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f?",onConfirm:m},s.a.createElement(Ge.a,{className:"icon_edit_btn_style",title:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}))):s.a.createElement(He.a,null,e.isEditable&&s.a.createElement("a",{disabled:""!==c,onClick:function(){return d(n,a,i)}},s.a.createElement(Qe.a,{className:"icon_edit_btn_style",title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})),e.isDeletable&&s.a.createElement(Ue.a,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0434\u0430\u043d\u044b\u043d\u0435?",onConfirm:function(){return p(n)}},s.a.createElement(Xe.a,{className:"icon_edit_btn_style",title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})))}}]),u=function(e){return e.key===c},d=function(e){a.setFieldsValue(Object(b.a)({},e)),i(e.key)},m=function(){i("")},f=function(){var t=Object(O.a)(h.a.mark((function t(n){var r,c,o,s;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,a.validateFields();case 3:r=t.sent,c=Object(g.a)(e.data),o=c.findIndex((function(e){return n===e.key})),s=c[o],e.handleEdit(Object(b.a)({},s,{},r)),i(""),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.log("Validate Failed:",t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}(),p=function(){var t=Object(O.a)(h.a.mark((function t(a){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{e.handleDelete(a)}catch(n){console.log("Validate Failed:",n)}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),y=l.map((function(e){return e.editable?Object(b.a)({},e,{onCell:function(t){return{record:t,inputType:e.type,dataIndex:e.dataIndex,title:e.title,data:e.data,placeholder:e.placeholder,editing:u(t),notRequired:e.notRequired}}}):e}));return s.a.createElement(Be.a,{form:a,component:!1},s.a.createElement(Je.a,{components:{body:{cell:tt}},bordered:!0,dataSource:e.data,columns:y,rowClassName:"editable-row",pagination:{onChange:m},loading:e.loading}))},nt=function(e,t,a){return[{title:"\u2116",dataIndex:"\u2116",align:"center",width:"2%"},{title:"\u0424\u0418\u041e",dataIndex:"name",editable:!0,placeholder:"\u0424\u0418\u041e"},{title:"\u041e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u044f",dataIndex:"organisation",editable:!0,placeholder:"\u041e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u044f",type:"select",data:e},{title:"\u0420\u043e\u043b\u044c",dataIndex:"roles",editable:!0,placeholder:"\u0420\u043e\u043b\u044c",type:"multi-select",data:t,notRequired:!1,render:function(e){return s.a.createElement("span",null,e.map((function(e){var t=e.length>5?"geekblue":"blue";return s.a.createElement($e.a,{color:t,key:e,style:{margin:"5px 5px"}},e.toUpperCase())})))}},{title:"\u041b\u043e\u0433\u0438\u043d",dataIndex:"username",editable:!0,placeholder:"\u041b\u043e\u0433\u0438\u043d"}]},rt=function(e,t,a,n){return{post:{name:e.name,"organisation-id":a.find((function(t){return t.value===e.organisation})).id,username:e.username,password:e.password?e.password:"",roles:t.filter((function(t){return e.roles.includes(t.value)})).map((function(e){return e.id})),modules:e.modules?n.filter((function(t){return e.modules.includes(t.value)})).map((function(e){return e.id})):[]},record:e=Object(b.a)({},e,{organisation:{abbreviation:e.organisation.split("-")[1],"full-name":e.organisation.split("-")[0]}})}},ct=s.a.memo((function(e){var t=e.data,a=e.status,n=e.roles,r=e.organisations,c=e.modules,i=Object(o.useState)([]),l=Object(xe.a)(i,2),u=l[0],d=l[1],f=Object(m.b)();Object(o.useEffect)((function(){"success"===a&&d(function(e){return e.map((function(e,t){return{key:e["account-id"],"\u2116":++t,name:e.name,organisation:"".concat(e.organisation["full-name"]," - ").concat(e.organisation.abbreviation),roles:e.roles.map((function(e){return e})),username:e.username,"account-id":e["account-id"]}}))}(t))}),[t,a]);return s.a.createElement(at,{columns:nt(r.map((function(e){return e.value})),n),data:u,setData:d,loading:"success"!==a,handleEdit:function(e){var t=rt(e,n,r,c),a=t.post,i=t.record;delete i["\u2116"],delete i.key,f(be({post:a,record:i}))},handleDelete:function(e){f(ge(e["account-id"]))},isEditable:!0,isDeletable:!0})})),it=s.a.memo((function(e){var t=e.roles,a=e.organisations,n=e.modules,r=Be.a.useForm(),c=Object(xe.a)(r,1)[0],i=Ze.a.Option,o=Object(m.b)(),l=function(){var e=Object(O.a)(h.a.mark((function e(){var r,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.validateFields();case 2:"undefined"===typeof(r=e.sent).roles&&(r=Object(b.a)({},r,{roles:[]})),i=rt(r,t,a,n),o(pe(i)),c.resetFields();case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return s.a.createElement("div",null,s.a.createElement(Be.a,{form:c,className:"admin-controller Roles_block_style"},s.a.createElement(Be.a.Item,{name:"name",style:{width:"60%"},rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f!"}]},s.a.createElement(ze.a,{placeholder:"\u0424\u0418\u041e"})),s.a.createElement(Be.a.Item,{name:"organisation",style:{width:"60%"},rules:[{required:!0,message:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u0438!"}]},s.a.createElement(Ze.a,{placeholder:"\u041e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u044f",allowClear:!0},a.map((function(e){return s.a.createElement(i,{key:e.value},e.value)})))),s.a.createElement(Be.a.Item,{name:"roles",style:{width:"60%"}},s.a.createElement(Ze.a,{placeholder:"\u0420\u043e\u043b\u0438",allowClear:!0,mode:"multiple",tagRender:ot,options:t})),s.a.createElement(Be.a.Item,{name:"username",style:{width:"60%"},rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043b\u043e\u0433\u0438\u043d"}]},s.a.createElement(ze.a,{placeholder:"\u041b\u043e\u0433\u0438\u043d"})),s.a.createElement(Be.a.Item,{name:"password",style:{width:"60%"},rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f!"}]},s.a.createElement(ze.a,{placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",type:"password",className:"password_style_user"})),s.a.createElement(Be.a.Item,null,s.a.createElement(_e.a,{type:"primary",htmlType:"submit",onClick:l},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"))))}));function ot(e){var t=e.label,a=e.closable,n=e.onClose;return s.a.createElement($e.a,{closable:a,onClose:n,style:{marginRight:3}},t)}var st=Object(we.h)((function(){var e=Object(m.c)((function(e){return e.users})),t=e.data,a=e.status,n=Object(m.c)((function(e){return e.roles})),r=n.roles,c=n.modules,i=Object(m.c)((function(e){return e.admin})),l=i.organisationList,u=i.config,d=Object(m.b)();Object(o.useEffect)((function(){u&&0===t.length&&d(fe(u))}),[t,u]);var f=Object(o.useMemo)((function(){return"success"===r.status?r.data.map((function(e){return{value:e.repr,id:e.id}})):[]}),[r]),p=Object(o.useMemo)((function(){return"success"===l.status?l.data.map((function(e){return Object(b.a)({},e,{value:"".concat(e["full-name"]," - ").concat(e.abbreviation)})})):[]}),[l]),g=Object(o.useMemo)((function(){if("success"===c.status)return c.data.map((function(e){return Object(b.a)({},e,{value:e.name})}))}),[c]);return s.a.createElement(s.a.Fragment,null,s.a.createElement(it,{roles:f,organisations:p,modules:g}),s.a.createElement(ct,{data:t,status:a,roles:f,organisations:p}))})),lt=s.a.memo((function(e){var t=e.options,a=Be.a.useForm(),n=Object(xe.a)(a,1)[0],r=Object(m.b)(),c=Object(o.useCallback)(Object(O.a)(h.a.mark((function e(){var a,c,i,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.validateFields();case 3:a=e.sent,c=[],i=[],t.forEach((function(e){a["permitted-modules"].includes(e.value)&&(c=[].concat(Object(g.a)(c),[e.id]),i=[].concat(Object(g.a)(i),[e.value]))})),o=Object(b.a)({},a,{"permitted-modules":c}),r(ie({post_new_role_module:o,record_new_role_module:a})),n.resetFields(),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])}))),[n,t]);return s.a.createElement(Be.a,{form:n,className:" Roles_create"},s.a.createElement(Be.a.Item,{name:"repr",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0440\u043e\u043b\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f!"}]},s.a.createElement(ze.a,{placeholder:"\u0420\u043e\u043b\u0438",allowClear:!0,style:{width:"60%"}})),s.a.createElement(Be.a.Item,{name:"permitted-modules",rules:[{required:!0,message:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043c\u043e\u0434\u0443\u043b\u0438 \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f!"}]},s.a.createElement(Ze.a,{placeholder:"\u041c\u043e\u0434\u0443\u043b\u0438",mode:"multiple",tagRender:ut,style:{width:"60%"},options:t})),s.a.createElement(Be.a.Item,null,s.a.createElement(_e.a,{type:"primary",htmlType:"submit",className:"standard_btn_admin",onClick:c},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c")))}));function ut(e){var t=e.label,a=e.closable,n=e.onClose;return s.a.createElement($e.a,{closable:a,onClose:n,style:{marginRight:3}},t)}var dt=function(e){return[{title:"\u2116",dataIndex:"\u2116",align:"center",width:"2%"},{title:"\u0420\u043e\u043b\u044c",dataIndex:"repr",width:"30%",editable:!0,placeholder:"\u0420\u043e\u043b\u0438"},{title:"\u041c\u043e\u0434\u0443\u043b\u0438",dataIndex:"permitted-modules",type:"multi-select",editable:!0,data:e,render:function(e){return s.a.createElement("span",null,e.map((function(e){var t=e.length>5?"geekblue":"blue";return s.a.createElement($e.a,{color:t,key:e,style:{margin:"5px 5px"}},e.toUpperCase())})))}}]},mt=s.a.memo((function(e){var t=e.role_modules,a=e.options,n=e.modules,r=Object(m.b)(),c=Object(o.useState)([]),i=Object(xe.a)(c,2),l=i[0],u=i[1];Object(o.useEffect)((function(){"success"===t.status&&u(function(e){return e.map((function(e,t){return{key:e.id,"\u2116":++t,repr:e.repr,"permitted-modules":e["permitted-modules"].map((function(e){return e["permitted-module"]})),modules:e["permitted-modules"]}}))}(t.data))}),[t]);return s.a.createElement(at,{columns:dt(a),data:l,setData:u,loading:"success"!==t.status,handleDelete:function(e){r(se(e.key))},handleEdit:function(e){var t=[],a=e.modules.map((function(e){return e["permitted-module"]}));t=e["permitted-modules"].filter((function(e){return!a.includes(e)})),t=n.data.filter((function(e){return t.includes(e.name)})).map((function(e){return e.id}));var c;c=e.modules.filter((function(t){return!e["permitted-modules"].includes(t["permitted-module"])})).map((function(e){return e["authority-id"]})),r(oe({id:e.key,removed:c,added:t,repr:e.repr,"permitted-modules":e["permitted-modules"]}))},isEditable:!0,isDeletable:!0})})),ft=Object(we.h)((function(){var e=Object(m.b)(),t=Object(m.c)((function(e){return e.roles})),a=t.roles,n=t.modules,r=t.role_modules,c=Object(m.c)((function(e){return e.admin})).config,i=Object(o.useState)([]),l=Object(xe.a)(i,2),u=l[0],d=l[1];return Object(o.useEffect)((function(){c&&"success"===a.status&&"idle"===r.status&&e(ce({roles:a.data,config:c}))}),[c,a,r]),Object(o.useEffect)((function(){if("success"===n.status){var e=n.data.map((function(e){return{value:e.name,id:e.id}}));d(e)}}),[n]),s.a.createElement(s.a.Fragment,null,s.a.createElement(lt,{options:u}),s.a.createElement(mt,{role_modules:r,options:u,modules:n}))})),pt=a(448),bt=a(73),gt=a(217),yt=a(216),ht=function(e){return e.map((function(e,t){switch(e.type){case"placemark":return s.a.createElement(bt.b,{key:t,geometry:e.coordinates});case"polyline":return s.a.createElement(bt.d,{key:t,geometry:e.coordinates,options:{fillColor:"#00FF00",strokeColor:"#0000FF",strokeWidth:5}});case"polygon":return s.a.createElement(bt.c,{key:t,geometry:e.coordinates,options:{editorDrawingCursor:"crosshair",editorMaxPoints:5,fillColor:"#00FF00",strokeColor:"#0000FF",strokeWidth:5}});case"Point":return s.a.createElement(bt.b,{key:t,geometry:e.coordinates});case"MultiPoint":return e.coordinates.map((function(t,a){return s.a.createElement(bt.b,{key:"".concat(a,"-").concat(e.type),geometry:t})}));default:return null}}))},Ot={center:[43.238949,76.889709],zoom:10},vt=function(){var e=Object(m.c)((function(e){return e.roadmap})),t=e.current,a=e.mapData,n=e.intersectionsMapData,r=Object(m.b)(),c=Object(o.useState)(""),i=Object(xe.a)(c,2),l=i[0],u=i[1],d=Object(o.useState)([]),f=Object(xe.a)(d,2),p=f[0],g=f[1],y=function(e){var t=Object(o.useRef)();return Object(o.useEffect)((function(){t.current=e})),t.current}({active:l,polygons:p});Object(o.useEffect)((function(){y&&y.active!==l&&p.length>0&&y.polygons===p&&(r(J(p)),g([]))}),[l,p,y]);var v=Object(o.useMemo)((function(){return function(e,t){var a={editorDrawingCursor:"crosshair",fillColor:"#00FF00",strokeColor:"#0000FF",strokeWidth:5};return"polygon"===e?s.a.createElement(bt.c,{instanceRef:function(a){return a&&t(a,e)},geometry:[],options:Object(b.a)({},a)}):"polyline"===e?s.a.createElement(bt.d,{instanceRef:function(a){return a&&t(a,e)},geometry:[],options:a}):null}(l,function(){var e=Object(O.a)(h.a.mark((function e(t,a){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.editor.startDrawing(),t.geometry.events.add("change",(function(e){g((function(t){return[{type:a,coordinates:e.originalEvent.newCoordinates}]}))})),t.editor.events.add("onchange",(function(e){t.startDrawing()})),t.editor.events.add("drawingstop",(function(e){t.editor.stopDrawing(),u("")}));case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}())}),[l]),j=Object(o.useMemo)((function(){return n.length>0?ht(n):ht(a)}),[a,n]);return s.a.createElement(s.a.Fragment,null,0===t&&s.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end",alignItems:"center",marginBottom:10}},function(e,t){return s.a.createElement("div",null,s.a.createElement(_e.a,{type:"polyline"===e&&"primary",onClick:function(){return t("polyline"===e?"":"polyline")},icon:s.a.createElement(yt.a,null)}),s.a.createElement(_e.a,{type:"polygon"===e&&"primary",style:{margin:"0 10px"},icon:s.a.createElement(gt.a,null),onClick:function(){return t("polygon"===e?"":"polygon")}}))}(l,u),s.a.createElement(_e.a,{onClick:function(){r(ee())}},"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u043a\u0430\u0440\u0442\u0443")),s.a.createElement(bt.e,{style:{minWidth:"100%"}},s.a.createElement(bt.a,{width:"100%",height:"calc(100% - 50px)",style:{minHeight:"500px",minWidth:"100%"},defaultState:Ot,modules:["geoObject.addon.editor"]},0===t&&v,j)))},jt=pt.a.Step,Et=function(e){var t=e.steps,a=e.dispatch,n=e.current,r=e.setCurrent,c=e.formValidate,i=e.form,l=e.callback;Object(o.useEffect)((function(){i.resetFields()}),[i]);var u=function(){var e=Object(O.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.validateFields();case 3:((t=e.sent)["end-date"]||t["start-date"])&&(t["end-date"]=t["end-date"]._i,t["start-date"]=t["start-date"]._i),a(c(t)),a(r(n+1)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return s.a.createElement("div",{style:{width:"100%"}},s.a.createElement(pt.a,{current:n,size:"small"},t.map((function(e){return s.a.createElement(jt,{key:e.title,title:e.title})}))),s.a.createElement("div",{className:"steps-content"},s.a.createElement(Be.a,{form:i,name:"roadwork-form"},s.a.createElement("div",{style:{width:"100%",display:"flex"}},s.a.createElement("div",{style:{width:"50%"}},t[n].content),s.a.createElement("div",{style:{width:"50%",paddingLeft:10}},s.a.createElement(vt,null))))),s.a.createElement("div",{className:"steps-action"},n>0&&s.a.createElement(_e.a,{style:{margin:"0 8px"},onClick:function(){a(r((function(e){return e-1}))),a(r(n-1))}},"\u041d\u0430\u0437\u0430\u0434"),n<t.length-1&&s.a.createElement(_e.a,{type:"primary",onClick:u},"\u0414\u0430\u043b\u0435\u0435"),3===n&&s.a.createElement(_e.a,{key:"submit",type:"primary",onClick:function(){return l()}},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c")))},wt=a(173),kt=function(e){var t=e.tabs,a=wt.a.TabPane;return s.a.createElement("div",{className:"card-container"},t?s.a.createElement(wt.a,{type:"card",className:"tabs"},t.map((function(e,t){return s.a.createElement(a,{tab:e.title,key:t},e.child)}))):"no tabs data to render")},xt=a(443),It=a(66),_t=a.n(It),Ct=a(120),Ft=a(440),Dt=a(442),St=a(461),Nt=ze.a.TextArea,Mt=Ze.a.Option,Rt=function(e,t,a){return s.a.createElement(Be.a.Item,null,s.a.createElement(Be.a.Item,{name:e,valuePropName:"value",hidden:"area"!==e&&!a,getValueFromEvent:function(e){return e.target.value}},s.a.createElement(Nt,{style:{height:70},placeholder:t,allowClear:!0})))},Yt=function(e,t,a,n){var r=e?s.a.createElement(Ft.a,{placeholder:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0433\u043e\u0434",allowClear:!1,picker:"year",format:"YYYY"}):s.a.createElement(Ft.a,{placeholder:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0434\u0430\u0442\u0443",allowClear:!1});return s.a.createElement(Be.a.Item,{label:n},s.a.createElement(ze.a.Group,{compact:!0},s.a.createElement(Be.a.Item,{name:a,rules:[{required:!0,message:"\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u043f\u043e\u043b\u0435"}],getValueFromEvent:function(e,t){return _t()(t,"YYYY-MM-DD")}},r),s.a.createElement(Be.a.Item,{name:"is-".concat(a),style:{marginLeft:10},valuePropName:"checked",getValueFromEvent:function(e){return e.target.checked}},s.a.createElement(Ct.a,{onChange:t},"\u0413\u043e\u0434"))))},Lt={name:"file",action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",listType:"picture",headers:{authorization:"authorization-text"},onChange:function(e){"uploading"!==e.file.status&&console.log(e.file,e.fileList),"done"===e.file.status?Pe.a.success("".concat(e.file.name," \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d")):"error"===e.file.status&&Pe.a.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0444\u0430\u0439\u043b\u0430 ".concat(e.file.name))}},Tt=function(e){var t=e.organisations,a=e.regions,n=e.categories,r=e.form,c=Object(o.useState)(!1),i=Object(xe.a)(c,2),l=i[0],u=i[1],d=Object(o.useState)(!1),m=Object(xe.a)(d,2),f=m[0],p=m[1],b=Object(o.useState)(!1),g=Object(xe.a)(b,2),y=g[0],h=g[1],O=Object(o.useState)(!1),v=Object(xe.a)(O,2),j=v[0],E=v[1];Object(o.useEffect)((function(){return r.getFieldValue("is-canvas-opened")&&u(r.getFieldValue("is-canvas-opened")),r.getFieldValue("is-closured")&&p(r.getFieldValue("is-closured")),r.getFieldValue("is-start-date")&&h(!!r.getFieldValue("is-start-date")),r.getFieldValue("is-end-date")&&E(r.getFieldValue(!0)),function(){u(!1),p(!1)}}),[r]);return s.a.createElement(s.a.Fragment,null,function(e){var t=e.regions,a=e.organisations,n=e.categories,r=[{name:"category",placeholder:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u044f \u0440\u0430\u0431\u043e\u0442",options:"success"===n.status?n.data.map((function(e){return e.name})):[]},{name:"organisation",placeholder:"\u041e\u0442\u0432\u0435\u0442\u0441\u0432\u0435\u043d\u043d\u044b\u0439 \u043e\u0440\u0433\u0430\u043d",options:"success"===a.status?a.data.map((function(e){return e.name})):[]},{name:"region",placeholder:"\u0420\u0430\u0439\u043e\u043d",options:"success"===t.status?t.data.map((function(e){return e.name})):[]}];return s.a.createElement("div",null,r.map((function(e,t){return s.a.createElement(Be.a.Item,{name:e.name,rules:[{required:!0,message:"\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u043f\u043e\u043b\u0435"}],key:"".concat(e.name).concat(t),hasFeedback:!0},s.a.createElement(Ze.a,{placeholder:e.placeholder,style:{width:300},allowClear:!0},e.options.map((function(e){return s.a.createElement(Mt,{value:e,key:e},e)}))))})))}({regions:a,organisations:t,categories:n}),s.a.createElement(Be.a.Item,{name:"address"},s.a.createElement(ze.a,{placeholder:"\u0410\u0434\u0440\u0435\u0441/\u0423\u043b\u0438\u0446\u0430"})),Rt("area","\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0443\u0447\u0430\u0441\u0442\u043a\u0430",!0),s.a.createElement(Be.a.Item,{name:"is-closured",noStyle:!0,valuePropName:"checked",getValueFromEvent:function(e){return e.target.checked}},s.a.createElement(Ct.a,{onChange:function(){return p((function(e){return!e}))}},"\u041f\u0435\u0440\u0435\u043a\u0440\u044b\u0442\u0438\u0435 \u0443\u043b\u0438\u0446"," ")),Rt("closure-description","\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043f\u0435\u0440\u0435\u043a\u0440\u044b\u0442\u0438\u044f",f),s.a.createElement(Be.a.Item,{name:"is-canvas-opened",noStyle:!0,valuePropName:"checked"},s.a.createElement(Ct.a,{onChange:function(){return u((function(e){return!e}))}},"\u0412\u0441\u043a\u0440\u044b\u0442\u0438\u0435 \u0434\u043e\u0440\u043e\u0436\u043d\u043e\u0433\u043e \u043f\u043e\u043b\u043e\u0442\u043d\u0430"," ")),Rt("canvas-description","\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0432\u0441\u043a\u0440\u044b\u0442\u0438\u044f",l),Yt(y,(function(e){return h(!!e.target.checked)}),"start-date","\u0414\u0430\u0442\u0430 \u043d\u0430\u0447\u0430\u043b\u0430"),Yt(j,(function(e){return E(!!e.target.checked)}),"end-date","\u0414\u0430\u0442\u0430 \u043e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u044f"),s.a.createElement(Be.a.Item,{name:"file-paths",valuePropName:"fileList"},s.a.createElement(Dt.a,Lt,s.a.createElement(_e.a,{icon:s.a.createElement(St.a,null)},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0440\u0438\u0441\u0443\u043d\u043e\u043a / \u043f\u0440\u0435\u0437\u0435\u043d\u0442\u0430\u0446\u0438\u044e"))))};var Vt=a(225),At=a.n(Vt),qt=(a(413),function(){var e=Object(o.useState)(),t=Object(xe.a)(e,2),a=t[0],n=t[1];return s.a.createElement(s.a.Fragment,null,s.a.createElement(Be.a.Item,{name:"lot-name"},s.a.createElement(ze.a,{placeholder:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430 (\u2116 \u043b\u043e\u0442\u0430)"})),s.a.createElement(Be.a.Item,{name:"company-name"},s.a.createElement(ze.a,{placeholder:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438"})),s.a.createElement(Be.a.Item,{name:"supervisor-name"},s.a.createElement(ze.a,{placeholder:"\u0424\u0418\u041e \u0440\u0443\u043a\u043e\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044f"})),s.a.createElement(Be.a.Item,{name:"contacts"},s.a.createElement(At.a,{country:"kz",value:a,onChange:function(e){return n({phone:e})}})),s.a.createElement(Be.a.Item,{name:"warranty-period"},s.a.createElement(ze.a,{placeholder:"\u0413\u0430\u0440\u0430\u043d\u0442\u0438\u0439\u043d\u044b\u0439 \u043f\u0435\u0440\u0438\u043e\u0434"})))}),Bt=ze.a.TextArea,Pt=function(){var e=Object(o.useState)(!0),t=Object(xe.a)(e,2),a=(t[0],t[1]);return s.a.createElement(s.a.Fragment,null,s.a.createElement(Be.a.Item,{name:"percentage",rules:[{required:!0,message:"\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u043f\u043e\u043b\u0435"}],label:"\u0421\u0442\u0430\u0442\u0443\u0441 \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f (%)"},s.a.createElement(et.a,{style:{width:"120px"},min:0,max:100,formatter:function(e){return"".concat(e,"%")},parser:function(e){return e.replace("%","")}})),s.a.createElement(Be.a.Item,{name:"commentary"},s.a.createElement(Bt,{style:{height:90},placeholder:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"})),s.a.createElement(Be.a.Item,{name:"is-hidden",valuePropName:"checked",getValueFromEvent:function(e){return e.target.checked}},s.a.createElement(Ct.a,null," \u0421\u043a\u0440\u044b\u0442\u044c \u0440\u0430\u0431\u043e\u0442\u0443 \u0441 \u043a\u0430\u0440\u0442\u044b")),s.a.createElement(Be.a.Item,{name:"is-canceled",valuePropName:"checked",getValueFromEvent:function(e){return e.target.checked},noStyle:!0},s.a.createElement(Ct.a,{onChange:function(e){return e.target.checked?a(!1):a(!0)}},"\u0417\u0430\u043a\u0443\u043f \u0440\u0430\u0431\u043e\u0442 \u043e\u0442\u043c\u0435\u043d\u0435\u043d / \u043f\u0440\u0438\u043e\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d")))},zt=function(e){switch(e){case"area":return"\u0423\u0447\u0430\u0441\u0442\u043e\u043a";case"address":return"\u0410\u0434\u0440\u0435\u0441/\u0443\u043b\u0438\u0446\u0430";case"contractor":return"\u041f\u043e\u0434\u0440\u044f\u0434\u0447\u0438\u043a";case"category":return"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u044f \u0440\u0430\u0431\u043e\u0442";case"end-date":return"\u0414\u0430\u0442\u0430 \u043e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u044f";case"is-end-date":return"\u0414\u0430\u0442\u0430 \u043e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u044f \u043e\u0442\u043c\u0435\u0447\u0435\u043d\u043e";case"start-date":return"\u0414\u0430\u0442\u0430 \u043d\u0430\u0447\u0430\u043b\u0430";case"is-start-date":return"\u0414\u0430\u0442\u0430 \u043d\u0430\u0447\u0430\u043b\u043e \u043e\u0442\u043c\u0435\u0447\u0435\u043d\u043e";case"closure-description":return"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043f\u0435\u0440\u0435\u043a\u0440\u044b\u0442\u0438\u044f";case"is-closured":return"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043f\u0435\u0440\u0435\u043a\u0440\u044b\u0442\u0438\u044f \u043e\u0442\u043c\u0435\u0447\u0435\u043d\u043e";case"organisation":return"\u041e\u0442\u0432\u0435\u0442\u0441\u0432\u0435\u043d\u043d\u044b\u0439 \u043e\u0440\u0433\u0430\u043d";case"file-paths":return"\u0424\u0430\u0439\u043b";case"lot-name":return"\u041b\u043e\u0442";case"percentage":return"\u0421\u0442\u0430\u0442\u0443\u0441 \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f (%)";case"region":return"\u0420\u0430\u0439\u043e\u043d";case"supervisor-name":return"\u0424\u0418\u041e \u0440\u0443\u043a\u043e\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044f";case"contacts":return"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b";case"warranty-period":return"\u0413\u0430\u0440\u0430\u043d\u0442\u0438\u0439\u043d\u044b\u0439 \u043f\u0435\u0440\u0438\u043e\u0434";case"canvas-description":return"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0432\u0441\u043a\u0440\u044b\u0442\u0438\u044f";case"is-canvas-opened":return"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0432\u0441\u043a\u0440\u044b\u0442\u0438\u044f \u043e\u0442\u043c\u0435\u0447\u0435\u043d\u043e";case"company-name":return"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438";case"canceled-comment":return"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 \u0437\u0430\u043a\u0443\u043f\u0430 \u043e\u0442\u043c\u0435\u043d\u044b";case"percentage-comment":return"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 \u0441\u0442\u0430\u0442\u0443\u0441\u0430 %";case"is-hidden":return"\u0421\u0442\u0430\u0442\u0443\u0441 \u0441\u043a\u0440\u044b\u0442";case"is-canceled":return"\u0421\u0442\u0430\u0442\u0443\u0441 \u043f\u0440\u0438\u043e\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d";case"commentary":return"\u0421\u0442\u0430\u0442\u0443\u0441 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u044f";default:return e}},Wt=function(e){var t=[];return Object.keys(e).map((function(a){"undefined"!==typeof e[a]&&"object"!==typeof e[a]&&"is-start-date"!==a&&"is-end-date"!==a&&"key"!==a&&"id"!==a?t.push({name:a,value:e[a]}):void 0===e[a]&&"is"===a.split("-")[0]?t.push({name:a,value:!1}):void 0===e[a]&&t.push({name:a,value:null})})),t},Ut=function(e,t,a,n){var r,c={},i=!1,o=!1,s=null;return e.forEach((function(e){if("is-hidden"!==e.name||"is-canceled"!==e.name||"commentary"!==e.name||"percentage"!==e.name||"is-end-date"!==e.name||"is-start-date"!==e.name)if("percentage"===e.name&&(r=e.value),"is-canceled"===e.name&&(o=e.value),"is-hidden"===e.name&&(i=e.value),"commentary"===e.name&&(s=e.value),"end-date"===e.name||"start-date"===e.name)c=e.value.length>4?Object(b.a)({},c,Object(p.a)({},e.name,e.value)):Object(b.a)({},c,Object(p.a)({},e.name,"".concat(e.value,"-01-01")));else if("category"===e.name){var l=t.data.find((function(t){return t.name===e.value})).id;c=Object(b.a)({},c,Object(p.a)({},e.name,l))}else if("organisation"===e.name){var u=a.data.find((function(t){return t.name===e.value})).id;c=Object(b.a)({},c,Object(p.a)({},e.name,u))}else if("region"===e.name){var d=n.data.find((function(t){return t.name===e.value})).id;c=Object(b.a)({},c,Object(p.a)({},e.name,d))}else c=Object(b.a)({},c,Object(p.a)({},e.name,e.value))})),c=Object(b.a)({},c,{status:{percentage:r,"is-hidden":i,"is-canceled":o,commentary:s}})},Ht=function(e){return e.map((function(e){return"polyline"===e.type?e.coordinates.map((function(e){return{y:e[1],x:e[0]}})):"polygon"===e.type?e.coordinates[0].map((function(e){return{y:e[1],x:e[0]}})):[{y:e.coordinates[1],x:e.coordinates[0]}]}))},Jt=function(e){var t=e.ob,a=Object(o.useMemo)((function(){var e=Wt(t);return e=e.filter((function(e){return"object"!==typeof e.value&&"boolean"!==typeof e.value}))}),[t]).map((function(e){return s.a.createElement(Be.a.Item,{key:e.name,label:s.a.createElement("span",{style:{color:"#92B4A7"}},zt(e.name))},e.value)}));return s.a.createElement(s.a.Fragment,null,a)},Kt=function(e){var t=e.form,a=e.callback,n=e.record,r=Object(m.c)((function(e){return e.roadmap})),c=r.current,i=r.organisations,l=r.regions,u=r.categories,d=r.formData,f=Object(m.b)(),p=Gt(i,l,u,d,t,f);return Object(o.useEffect)((function(){n&&t.setFieldsValue(Object(b.a)({},n,{"start-date":_t()(n["start-date"],"YYYY/MM/DD"),"end-date":_t()(n["end-date"],"YYYY/MM/DD")}))}),[]),s.a.createElement(Et,{steps:p,current:c,setCurrent:H,formValidate:U,dispatch:f,form:t,callback:a})},Gt=function(e,t,a,n,r,c){return[{title:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0440\u0430\u0431\u043e\u0442",content:s.a.createElement(Tt,{organisations:e,regions:t,categories:a,form:r,dispatch:c})},{title:"\u0414\u0430\u043d\u043d\u044b\u0435 \u043f\u043e\u0434\u0440\u044f\u0434\u0447\u0438\u043a\u0430",content:s.a.createElement(qt,null)},{title:"\u0421\u0442\u0430\u0442\u0443\u0441 \u0440\u0430\u0431\u043e\u0442",content:s.a.createElement(Pt,null)},{title:"\u041e\u0442\u043f\u0440\u0430\u0432\u043a\u0430 \u0434\u0430\u043d\u043d\u044b\u0445",content:s.a.createElement(Jt,{ob:n})}]},Qt=function(){var e=Object(o.useState)(!1),t=Object(xe.a)(e,2),a=t[0],n=t[1],r=Object(m.b)(),c=Object(m.c)((function(e){return e.roadmap})),i=c.organisations,l=c.regions,u=c.categories,d=c.formData,f=c.status,p=c.mapData,b=Be.a.useForm(),g=Object(xe.a)(b,1)[0],y=Object(o.useCallback)(Object(O.a)(h.a.mark((function e(){var t,a,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{t=Wt(d),a=Ut(t,u,i,l),c=Ht(p),r(V(a={data:a,geometries:c,mapData:p})),r(H(0)),r(ee()),"success"===f&&n(!1)}catch(o){console.log(o.message)}case 1:case"end":return e.stop()}}),e)}))),[u,d,r,p,i,f,l]);return s.a.createElement(s.a.Fragment,null,s.a.createElement(_e.a,{type:"primary",onClick:function(){r(H(0)),n(!0)},style:{marginBottom:10}},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"),"success"===f&&s.a.createElement(xt.a,{title:"\u0424\u043e\u0440\u043c\u0430 \u0432\u0432\u043e\u0434\u0430 \u0434\u0430\u043d\u043d\u044b\u0445 \u043f\u043e \u0440\u0435\u043c\u043e\u043d\u0442\u043d\u044b\u043c \u0440\u0430\u0431\u043e\u0442\u0430\u043c",visible:a,onOk:function(){r(H(0)),n(!1)},onCancel:function(){r(H(0)),n(!1),r(ee()),g.resetFields()},width:"80%",footer:null},s.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},s.a.createElement(Kt,{form:g,callback:y}))))},Xt=function(e){var t=e.visible,a=e.setVisible,n=e.record,r=Be.a.useForm(),c=Object(xe.a)(r,1)[0],i=Object(m.c)((function(e){return e.roadmap})),l=i.organisations,u=i.regions,d=i.categories,f=i.status,p=i.mapData,b=i.formData,g=Object(m.b)();Object(o.useEffect)((function(){var e=n.geometries.coordinates;if(e.length>0){var t=e.map((function(e){return e[0][0]==e[e.length-1][0]?{type:"polygon",coordinates:[e]}:{type:"polyline",coordinates:e}}));g(J(t))}return function(){g(ee()),g(G({})),c.setFieldsValue({})}}),[]);var y=function(){a(!1)},v=Object(o.useCallback)(Object(O.a)(h.a.mark((function e(){var t,r,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{t=Wt(b),r=Ut(t,d,l,u),i=Ht(p),r={data:r,geometries:i},g(H(0)),g(q({reedit:!0,data:r,id:n.id,mapData:p})),c.resetFields(),"success"===f&&a(!1)}catch(o){console.log(o.message)}case 1:case"end":return e.stop()}}),e)}))),[d,l,u,p,b,c,n,a,f]);return s.a.createElement(xt.a,{title:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0443\u043b\u0438\u0446\u044b",visible:t,width:"50%",onCancel:y,onOk:y,footer:[]},s.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},s.a.createElement(Kt,{form:c,callback:v,record:n})))},Zt=function(e){var t={},a=[];if("success"===e.status){for(var n=e.data,r=0;r<n.length;r++)t=Object(b.a)({},t,Object(p.a)({},n[r].name,n[r].name));a=Object.keys(t).map((function(e){return{text:e,value:e}}))}return a},$t=["2018","2019","2020","2021","2022"].map((function(e){return{value:e,text:e}})).reverse(),ea=function(){var e=Object(m.c)((function(e){return e.roadmap})),t=e.organisations,a=e.categories,n=e.status,r=e.data,c=e.editedId,i=e.deletedId,l=Object(m.b)(),u=Object(o.useState)(!1),d=Object(xe.a)(u,2),f=d[0],g=d[1],y=Object(o.useState)({}),h=Object(xe.a)(y,2),O=h[0],v=h[1],j=Object(o.useState)([]),E=Object(xe.a)(j,2),w=E[0],k=E[1],x=Object(o.useState)(),I=Object(xe.a)(x,2),_=I[0],C=I[1],F=Be.a.useForm(),D=Object(xe.a)(F,1)[0],S=Object(o.useMemo)((function(){return function(e,t,a,n){return[{title:"\u2116",dataIndex:"id",key:"id",width:"2%",align:"center",render:function(e,t){return s.a.createElement("a",{onClick:function(){n(t),a(!0)}},e)}},{title:"\u0423\u043b\u0438\u0446\u0430",dataIndex:"address",key:"address",render:function(e,t){return s.a.createElement(s.a.Fragment,null,e)}},{title:"\u0423\u0447\u0430\u0441\u0442\u043e\u043a",dataIndex:"area",key:"area"},{title:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f \u0440\u0430\u0431\u043e\u0442",dataIndex:"category",key:"category",filters:Zt(t),onFilter:function(e,t){return 0===t.category.indexOf(e)}},{title:"\u041e\u0442\u0432 \u043e\u0440\u0433\u0430\u043d",dataIndex:"organisation",key:"organisation",filters:Zt(e),onFilter:function(e,t){return 0===t.organisation.indexOf(e)}},{title:"\u0414\u0430\u0442\u0430 \u043d\u0430\u0447\u0430\u043b\u0430",dataIndex:"start-date",key:"start-date",width:"10%",align:"center",filters:$t,onFilter:function(e,t){return 0===t["start-date"].indexOf(e)}},{title:"\u0414\u0430\u0442\u0430 \u043e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u044f",dataIndex:"end-date",key:"end-date",width:"10%",align:"center",filters:$t,onFilter:function(e,t){return 0===t["end-date"].indexOf(e)}},{title:"\u0421\u0442\u0430\u0442\u0443\u0441 (%)",dataIndex:"percentage",key:"percentage",editable:!0,width:"5%",rule:!0,type:"number",align:"center",sorter:function(e,t){return t.percentage-e.percentage},sortDirections:["ascend"]}]}(t,a,g,v)}),[t,a,g,v]);Object(o.useEffect)((function(){if(_){if(c){var e=w.find((function(e){return e.id===c}));C((function(t){return t.map((function(t){return t.id===c?e:t}))})),l(Q())}i&&(C((function(e){return e.filter((function(e){return e.id!==i}))})),l(X()))}}),[w,i,c,_]),Object(o.useMemo)((function(){k(r.map((function(e){var t={key:e.id};return Object.keys(e).forEach((function(a){t="status"===a?Object(b.a)({},t,{percentage:e[a].percentage,"is-hidden":e[a]["is-hidden"],"is-canceled":e[a]["is-canceled"],commentary:e[a].commentary}):Object(b.a)({},t,Object(p.a)({},a,e[a]))})),t})))}),[r]);return s.a.createElement(Be.a,{form:D},s.a.createElement(Be.a.Item,{name:"search"},s.a.createElement(ze.a,{allowClear:!0,placeholder:"\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u0443\u043b\u0438\u0446\u0435",onChange:function(e){C(w.filter((function(t){return!(!t.address||!t.address.toLowerCase().includes(e.target.value.toLowerCase()))||t.id.toString().includes(e.target.value.toLowerCase())})))},style:{width:300}})),s.a.createElement(Be.a.Item,{name:"table"},s.a.createElement(at,{columns:S,data:_||w,setData:k,handleEdit:function(e){l(q({reedit:!1,data:{percentage:e.percentage},id:e.id}))},handleDelete:function(e){l(B(e.id))},loading:"loading"===n,isEditable:!0,isDeletable:!0})),f&&s.a.createElement(Be.a.Item,{name:"modal"},s.a.createElement(Xt,{visible:f,setVisible:g,record:O})))},ta=function(){var e=Object(m.b)(),t=Object(m.c)((function(e){return e.roadmap})),a=t.organisations,n=t.categories,r=t.regions,c=t.data;return Object(o.useEffect)((function(){0===a.data.length&&e(M()),0===r.data.length&&e(R()),0===n.data.length&&e(Y()),0===c.length&&e(L())}),[a,r,n,c]),s.a.createElement(s.a.Fragment,null,s.a.createElement(Qt,null),s.a.createElement(ea,null))},aa=Ze.a.Option,na=s.a.memo((function(e){var t=e.order,a=e.form,n=Object(o.useState)([]),r=Object(xe.a)(n,2),c=r[0],i=r[1],l=Object(m.c)((function(e){return e.roadmap})),u=l.categories,d=l.data,f=l.intersectionsMapData,b=Object(m.b)(),y="success"===u.status?u.data.map((function(e){return e.name})):[];return s.a.createElement(Be.a.Item,{style:{marginRight:20}},s.a.createElement(Be.a.Item,{name:"category-".concat(t),rules:[{required:!0,message:"\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u043f\u043e\u043b\u0435"}]},s.a.createElement(Ze.a,{placeholder:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f \u0440\u0430\u0431\u043e\u0442",style:{width:320},onChange:function(e){i(d.filter((function(t){return t.category===e})).map((function(e){return e.id}))),a.setFieldsValue(Object(p.a)({},"roadwork-".concat(t),""))}},y.map((function(e){return s.a.createElement(aa,{value:e,key:e},e)})))),c.length>0&&s.a.createElement(Be.a.Item,{name:"roadwork-".concat(t),rules:[{required:!0,message:"\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u043f\u043e\u043b\u0435"}],key:"roadwork-".concat(t)},s.a.createElement(Ze.a,{placeholder:"\u0420\u0430\u0431\u043e\u0442\u0430 ".concat(t),style:{width:320},onChange:function(e){b(K([].concat(Object(g.a)(f),[{type:"polygon",coordinates:d.find((function(t){return t.id===e})).geometries.coordinates}])))}},c.map((function(e){return s.a.createElement(aa,{value:e,key:e},e)})))))})),ra=function(e){var t=e.form,a=Object(o.useState)([1,2]),n=Object(xe.a)(a,2),r=n[0],c=n[1];return s.a.createElement("div",{style:{marginBottom:20}},s.a.createElement("div",{style:{display:"flex",flexWrap:"wrap"}},r.map((function(e){return s.a.createElement(na,{order:e,form:t})}))),s.a.createElement("div",{style:{display:"flex",alignItems:"center",marginTop:15}},s.a.createElement("div",{style:{marginRight:25}},s.a.createElement(_e.a,{size:"small",type:"primary",shape:"circle",onClick:function(){return c([].concat(Object(g.a)(r),[r.length+1]))}},"+")," ",s.a.createElement("span",null,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0435\u0449\u0435 \u043e\u0434\u043d\u0443")),s.a.createElement(s.a.Fragment,null,s.a.createElement(_e.a,{disabled:2===r.length,size:"small",type:"primary",shape:"circle",onClick:function(){c(Object(g.a)(r.filter((function(e){return e!==r.length}))))}},"-")," ",s.a.createElement("span",{style:{marginLeft:5}},"\u0423\u0431\u0440\u0430\u0442\u044c"))),s.a.createElement(Be.a.Item,{name:"area"},s.a.createElement(ze.a,{placeholder:"\u0423\u0447\u0430\u0441\u0442\u043e\u043a \u043f\u0435\u0440\u0435\u0441\u0435\u0447\u0435\u043d\u0438\u044f",style:{width:"30%",marginTop:15}})))},ca=function(){var e=Object(o.useState)(),t=Object(xe.a)(e,2),a=t[0],n=t[1],r=Be.a.useForm(),c=Object(xe.a)(r,1)[0],i=Object(m.b)(),l=function(){var e=Object(O.a)(h.a.mark((function e(){var t,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.validateFields();case 2:t=e.sent,a=Object.keys(t).filter((function(e){return"roadwork"===e.split("-")[0]})).map((function(e){return t[e]})),t={"roadwork-ids":a,"intersection-area":t.area},i(A(t)),c.resetFields(),n(!1);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),u=[s.a.createElement(_e.a,{key:"back",onClick:function(){i($()),c.resetFields(),n(!1)}},"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"),s.a.createElement(_e.a,{key:"submit",type:"primary",onClick:l},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c")];return s.a.createElement(s.a.Fragment,null,s.a.createElement(_e.a,{type:"primary",onClick:function(){i(H(1)),n(!0)},style:{marginBottom:10}},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u0435\u0440\u0435\u0441\u0435\u0447\u0435\u043d\u0438\u0435"),s.a.createElement(xt.a,{title:"\u0424\u043e\u0440\u043c\u0430 \u0432\u0432\u043e\u0434\u0430 \u0434\u0430\u043d\u043d\u044b\u0445 \u043f\u043e \u043f\u0435\u0440\u0435\u0441\u0435\u0447\u0435\u043d\u0438\u044e \u0440\u0430\u0431\u043e\u0442",visible:a,onCancel:function(){return n(!1)},width:"80%",footer:u},s.a.createElement(Be.a,{form:c},s.a.createElement(ra,{form:c}),s.a.createElement("div",{style:{width:"100%",paddingLeft:10}},s.a.createElement(vt,null)))))},ia=function(e){var t=e.visible,a=e.setVisible,n=e.record,r=e.data,c=e.intersectionsMapData,i=Object(o.useState)([]),l=Object(xe.a)(i,2),u=l[0],d=l[1],f=Object(m.b)();return Object(o.useEffect)((function(){var e=r.filter((function(e){return n.ids.includes(e.id)})),t=e.map((function(e){return{type:"polygon",coordinates:e.geometries.coordinates}}));return t=[].concat(Object(g.a)(t),[Object(b.a)({},n.intersection)]),d(e),f(H(1)),f(K([].concat(Object(g.a)(c),Object(g.a)(t)))),function(){f(H(0)),f($())}}),[]),s.a.createElement(xt.a,{title:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0443\u043b\u0438\u0446\u044b",visible:t,width:"50%",onCancel:function(){return a(!1)},onOk:function(){return a(!1)},footer:[s.a.createElement(_e.a,{key:"close",onClick:function(){return a(!1)}},"\u0417\u0430\u043a\u0440\u044b\u0442\u044c")]},s.a.createElement("div",{style:{display:"flex",flexWrap:"wrap",width:"90%",margin:"auto"}},u.map((function(e,t){return s.a.createElement("div",{style:{width:"".concat(u.length>2?"33%":"50%")}},s.a.createElement("h2",null,"\u0420\u0430\u0431\u043e\u0442\u0430 ",t+1),s.a.createElement(Jt,{ob:e}))}))),s.a.createElement("div",{style:{width:"100%",paddingLeft:10}},s.a.createElement(vt,null)))},oa=function(){var e=Object(m.c)((function(e){return e.roadmap})),t=e.categories,a=e.intersections,n=e.data,r=e.deletedIntersectionId,c=e.intersectionsMapData,i=Object(m.b)(),l=Object(o.useState)(!1),u=Object(xe.a)(l,2),d=u[0],f=u[1],y=Object(o.useState)({}),h=Object(xe.a)(y,2),O=h[0],v=h[1],j=Object(o.useState)([]),E=Object(xe.a)(j,2),w=E[0],k=E[1],x=Object(o.useState)(),I=Object(xe.a)(x,2),_=I[0],C=I[1],F=Be.a.useForm(),D=Object(xe.a)(F,1)[0];Object(o.useEffect)((function(){_&&r&&(C((function(e){return e.filter((function(e){return e.id!==r}))})),i(Z()))}),[w,r,_]),Object(o.useMemo)((function(){k(function(e,t){var a=[];return"success"===t.status&&(a=t.data.map((function(t,a){var n={"\u2116":++a,key:++a,id:t.id,address:t["intersection-area"],intersection:t.intersection,ids:t["roadwork-ids"]};return t["roadwork-ids"].forEach((function(t,a){var r=e.find((function(e){return e.id===t}));n=Object(b.a)({},n,Object(p.a)({category:r?r.category:""},"\u0420\u0430\u0431\u043e\u0442\u0430 ".concat(a+1),t))})),n}))),a}(n,a))}),[n,a]);var S=Object(o.useMemo)((function(){return function(e,t,a,n){var r=[];if("success"===a.status){var c=0;a.data.forEach((function(e){e["roadwork-ids"].length>c&&(c=e["roadwork-ids"].length)}));for(var i=0;i<c;i++)r=[].concat(Object(g.a)(r),[{title:"\u0420\u0430\u0431\u043e\u0442\u0430 ".concat(i+1),dataIndex:"\u0420\u0430\u0431\u043e\u0442\u0430 ".concat(i+1),key:"\u0420\u0430\u0431\u043e\u0442\u0430 ".concat(i+1),width:"10%",align:"center"}])}var o=[{title:"\u2116",dataIndex:"\u2116",key:"\u2116",width:"2%",align:"center",render:function(a,n){return s.a.createElement("a",{onClick:function(){t(n),e(!0)}},a)}},{title:"\u0423\u043b\u0438\u0446\u0430",dataIndex:"address",key:"address",width:"20%"},{title:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f \u0440\u0430\u0431\u043e\u0442",dataIndex:"category",width:"30%",key:"category",filters:Zt(n),onFilter:function(e,t){return 0===t.category.indexOf(e)}}];return[].concat(o,Object(g.a)(r))}(f,v,a,t)}),[f,v,a,t]);return s.a.createElement(Be.a,{form:D},s.a.createElement(Be.a.Item,{name:"search"},s.a.createElement(ze.a,{allowClear:!0,placeholder:"\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u0443\u043b\u0438\u0446\u0435",onChange:function(e){C(w.filter((function(t){if(t.address&&t.address.toLowerCase().includes(e.target.value.toLowerCase()))return!0;var a=!1;return t.ids.forEach((function(t){t.toString().includes(e.target.value.toLowerCase())&&(a=!0)})),a})))},style:{width:300}})),s.a.createElement(Be.a.Item,{name:"table"},s.a.createElement(at,{columns:S,data:_||w,setData:k,handleDelete:function(e){i(P(e.id))},loading:"success"!==a.status,isDeletable:!0})),d&&s.a.createElement(Be.a.Item,{name:"modal"},s.a.createElement(ia,{visible:d,setVisible:f,record:O,data:n,intersectionsMapData:c})))},sa=function(){var e=Object(m.b)(),t=Object(m.c)((function(e){return e.roadmap})).intersections;return Object(o.useEffect)((function(){0===t.data.length&&e(T())}),[t]),s.a.createElement(s.a.Fragment,null,s.a.createElement(ca,null),s.a.createElement(oa,null))},la=function(){return s.a.createElement(kt,{tabs:ua})},ua=[{title:"\u0421\u043f\u0438\u0441\u043e\u043a \u0440\u0430\u0431\u043e\u0442",child:s.a.createElement(ta,null)},{title:"\u0421\u043f\u0438\u0441\u043e\u043a \u043f\u0435\u0440\u0435\u0441\u0435\u0447\u0435\u043d\u0438\u0439",child:s.a.createElement(sa,null)}],da=(a(422),a(199),Object(we.h)((function(){return s.a.createElement(la,null)}))),ma=s.a.memo((function(e){var t=e.organisations,a=e.data,n=e.status,r=Object(o.useState)([]),c=Object(xe.a)(r,2),i=c[0],l=c[1];Object(o.useEffect)((function(){"success"===n&&l(function(e){return e.map((function(e,t){return{key:e["supervisor-id"],"#":++t,"supervisor-id":e["supervisor-id"],name:e.name,position:e.position,"image-path":e["image-path"],"supervised-organisations":e["supervised-organisations"].map((function(e){return"".concat(e.abbreviation,"-").concat(e["full-name"])}))}}))}(a))}),[n,a]);var u=Object(m.b)(),d=Object(o.useMemo)((function(){return function(e){return[{title:"\u2116",dataIndex:"#",width:"2%",align:"center"},{title:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c",dataIndex:"position",width:"25%"},{title:"\u0424\u0418\u041e",dataIndex:"name",width:"30%",editable:!0},{title:"\u041a\u0443\u0440\u0438\u0440\u0443\u0435\u043c\u044b\u0435 \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u0438",dataIndex:"supervised-organisations",width:"35%",type:"multi-select",editable:!0,data:e,render:function(e){return s.a.createElement("span",null,e.map((function(t,a){var n=e.length>3?"geekblue":"green";return s.a.createElement($e.a,{color:n,key:"".concat(t.split("-")[0],"-").concat(a),style:{margin:"5px 5px"}},t.toUpperCase())})))}},{title:"\u0424\u043e\u0442\u043e",dataIndex:"image-path",width:"10%",align:"center",render:function(e){return s.a.createElement(Le.a,{size:"large",src:e})}}]}("success"===t.status&&t.data.map((function(e){return{value:"".concat(e.abbreviation,"-").concat(e["full-name"]),id:e.id,label:"".concat(e.abbreviation,"-").concat(e["full-name"])}})))}),[t]);return s.a.createElement("div",null,s.a.createElement(at,{columns:d,data:i,setData:l,loading:"success"!==n,handleEdit:function(e){if("success"===t.status){var a=t.data.filter((function(t){return e["supervised-organisations"].includes("".concat(t.abbreviation,"-").concat(t["full-name"]))})).map((function(e){return e.id})),n={name:e.name,"supervised-organisations":a};u(je({id:e["supervisor-id"],client:{name:e.name,"supervised-organisations":e["supervised-organisations"].map((function(e){return{abbreviation:e.split("-")[0],"full-name":e.split("-")[1]}}))},server:n}))}},isEditable:!0}))})),fa=a(226),pa=a(227),ba=a(234),ga=a(238),ya=function(e){Object(ga.a)(a,e);var t=Object(ba.a)(a);function a(){var e;Object(fa.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={visible:!1},e.showModal=function(){e.setState({visible:!0})},e.handleOk=function(t){e.setState({visible:!1})},e.handleCancel=function(t){e.setState({visible:!1})},e}return Object(pa.a)(a,[{key:"render",value:function(){var e=this.props,t=e.btntext,a=e.btnstyle,n=e.title,r=e.children;return s.a.createElement(s.a.Fragment,null,s.a.createElement(_e.a,{type:"primary",onClick:this.showModal,style:a},t),s.a.createElement(xt.a,{title:n,width:"50%",visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel,className:"Leaders_style_modal",footer:null},r))}}]),a}(s.a.Component),ha=s.a.memo((function(e){var t=e.organisations,a=Object(o.useState)([]),n=Object(xe.a)(a,2),r=n[0],c=n[1],i=Object(m.b)();Object(o.useEffect)((function(){if("success"===t.status){var e=t.data.map((function(e,t){return{key:e.id,"#":++t,"full-name":"".concat(e.abbreviation,"-").concat(e["full-name"]),abbreviation:e.abbreviation,id:e.id}}));c(e)}}),[t]);return s.a.createElement(ya,{btntext:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043a\u0443\u0440\u0438\u0440\u0443\u0435\u043c\u044b\u0435 \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u0438",btnstyle:{marginBottom:15},title:"\u041a\u0443\u0440\u0438\u0440\u0443\u0435\u043c\u044b\u0435 \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u0438"},s.a.createElement(at,{columns:Oa,data:r,setData:c,loading:"success"!==t.status,handleEdit:function(e){i(x({abbreviation:e.abbreviation,"full-name":e["full-name"],id:e.id}))},isEditable:!0}))})),Oa=[{title:"\u2116",dataIndex:"#",width:"2%",align:"center"},{title:"\u0410\u0431\u0431\u0440\u0435\u0432\u0438\u0430\u0442\u0443\u0440\u0430",dataIndex:"abbreviation",width:"20%",editable:!0},{title:"\u041a\u0443\u0440\u0438\u0440\u0443\u0435\u043c\u044b\u0435 \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u0438",dataIndex:"full-name",width:"50%",editable:!0}],va=Object(we.h)((function(){var e=Object(m.c)((function(e){return e.admin})),t=e.organisationList,a=e.config,n=Object(m.c)((function(e){return e.heads})),r=n.status,c=n.data,i=Object(m.b)();return Object(o.useEffect)((function(){a&&0===c.length&&i(ve(a))}),[c,a]),s.a.createElement("div",null,s.a.createElement(ha,{organisations:t}),s.a.createElement(ma,{organisations:t,data:c,status:r}))})),ja=Object(o.createContext)(),Ea=function(e){var t=e.children,a=Object(o.useState)(),n=Object(xe.a)(a,2),r=n[0],c=n[1],i=Object(o.useState)(),l=Object(xe.a)(i,2),u=l[0],d=l[1],m=Object(o.useState)(),f=Object(xe.a)(m,2),p=f[0],b=f[1],g=Object(o.useState)(null),y=Object(xe.a)(g,2),h=y[0],O=y[1],v=Object(o.useState)({}),j=Object(xe.a)(v,2),E=j[0],w=j[1],k=Object(o.useState)(),x=Object(xe.a)(k,2),I=x[0],_=x[1],C=Object(o.useState)({loading:!0}),F=Object(xe.a)(C,2),D=F[0],S=F[1],N=Object(o.useState)({loading:!0}),M=Object(xe.a)(N,2),R=M[0],Y=M[1],L=Object(o.useState)({loading:!0}),T=Object(xe.a)(L,2),V=T[0],A=T[1],q=Object(o.useState)({loading:!0}),B=Object(xe.a)(q,2),P=B[0],z=B[1],W=Object(o.useState)(),U=Object(xe.a)(W,2),H=U[0],J=U[1];return s.a.createElement(ja.Provider,{value:{selectedValue:r,setSelectedValue:c,filteredData:h,setFilteredData:O,indicators:E,setIndicators:w,dictionary_names:wa,searchText:I,setSearchText:_,fetchedDictionaryData:D,setFetchedDictionaryData:S,fetchedIndicatorData:V,setFetchedIndicatorData:A,fetchedIndicatorStrategyData:P,setFetchedIndicatorStrategyData:z,fetchedIndicatorInfoData:R,setFetchedIndicatorInfoData:Y,selectedDictionaryName:u,setSelectedDictionaryName:d,selectedIndustry:p,setSelectedIndustry:b,modalIndicator:H,setModalIndicator:J}},t)},wa=["\u0421\u0444\u0435\u0440\u0430","\u0413\u043e\u0441\u0443\u0434\u0430\u0440\u0441\u0442\u0432\u0435\u043d\u043d\u0430\u044f \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0430","\u041f\u0435\u0440\u0438\u043e\u0434\u0438\u0447\u043d\u043e\u0441\u0442\u044c \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f","\u0415\u0434\u0438\u043d\u0438\u0446\u0430 \u0438\u0437\u043c\u0435\u0440\u0435\u043d\u0438\u044f","\u041e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439 \u043e\u0440\u0433\u0430\u043d","\u0418\u0441\u0442\u043e\u0447\u043d\u0438\u043a \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438","\u0421\u0442\u0440\u0430\u0442\u0435\u0433\u0438\u044f 2050"],ka=function(){var e=Object(O.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j()(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),xa=function(){var e=Object(O.a)(h.a.mark((function e(t,a){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.post(t,a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Ia=function(){var e=Object(O.a)(h.a.mark((function e(t,a){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.put(t,a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),_a=function(){var e=Object(O.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.delete(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ca=function(e){var t=e.handleAdd,a=e.text2,n=e.text1,r=e.text3,c=e.style,i=void 0===c?{margin:"5 0"}:c,o=e.text,l=void 0===o?"+":o,u=function(){return t()};return function(e,t,a){return e?s.a.createElement(_e.a,{type:"primary",onClick:u,style:i,className:"AdminButton_style",title:e},l):t?s.a.createElement(_e.a,{type:"primary",onClick:u,style:i,className:"AdminButton_style",title:t},l):a?s.a.createElement(_e.a,{type:"primary",onClick:u,style:i,className:"AdminButton_style",title:a},l):void 0}(n,a,r)},Fa=a(447),Da=function(e){var t=e.title;return s.a.createElement(Fa.a,{title:t,bordered:!1,style:{width:"100%"},className:"AdminCard_style"},e.children)},Sa=(a(445),function(e){var t=e.data,a=e.editing,n=e.dataIndex,r=(e.title,e.inputType),c=(e.record,e.children),i=Object(ke.a)(e,["data","editing","dataIndex","title","inputType","record","children"]),o=function(e){switch(e){case"select":return s.a.createElement(Ze.a,{placeholder:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435",allowClear:!0},t&&t.map((function(e){return s.a.createElement(Ze.a.Option,{key:"".concat(e.title,"-").concat(e.id),value:e.title},e.title)})));case"number":return s.a.createElement(et.a,{className:"Edit_input_style",min:0});default:return s.a.createElement(ze.a,{className:"Edit_input_style"})}}(r);return s.a.createElement("td",Object.assign({},i,{className:"Table_td_style_line"}),a?s.a.createElement(Be.a.Item,{name:n,style:{margin:0},rules:"select"!==r&&"date"!==r&&"number"!==r&&[{required:!0,message:"\u044d\u0442\u043e \u043f\u043e\u043b\u0435 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u044c!"}]},o):c)}),Na=s.a.memo((function(e){var t=e.cols,a=e.data,n=e.loading,r=e.url,c=e.url2,i=e.setFetchedData,l=e.save,u=e.isLink,d=Object(o.useContext)(ja).searchText,m=Object(o.useState)(),f=Object(xe.a)(m,2),p=f[0],y=f[1],h=Object(o.useState)(""),O=Object(xe.a)(h,2),v=O[0],j=O[1],E=Be.a.useForm(),w=Object(xe.a)(E,1)[0];Object(o.useEffect)((function(){if(a&&d){var e=a.filter((function(e){var t=e.children&&e.children.some((function(e){return e.key.toLowerCase().includes(d.toLowerCase())})),a=e.key&&e.key.toLowerCase().includes(d.toLowerCase());return t||a}));y(e)}}),[a,d]);var k=Object(o.useCallback)((function(e){return e.key===v}),[v]),x=function(){j("")},I=Object(o.useCallback)((function(e){_a("".concat(r,"/").concat(e)).then((function(e){return ka(c||r).then((function(e){return i({loading:!1,data:e.data})})).catch((function(e){return console.log(e)}))}))}),[r,c,i]),_=Object(o.useMemo)((function(){var e=u?t:[].concat(Object(g.a)(t),[{title:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0435",dataIndex:"",key:"x",render:function(e,t){return k(t)?s.a.createElement("span",null,s.a.createElement("a",{onClick:function(){return l(t,w,j)},style:{marginRight:8}},s.a.createElement(Ke.a,{className:"icon_edit_btn_style",title:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})),s.a.createElement(Ue.a,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043e\u043c\u0435\u043d\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f?",onConfirm:x},s.a.createElement(Ge.a,{className:"icon_edit_btn_style",title:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}))):s.a.createElement(He.a,null,s.a.createElement("a",{disabled:""!==v,onClick:function(){return function(e,t,a){t.setFieldsValue(Object(b.a)({},e)),a(e.key)}(t,w,j)}},s.a.createElement(Qe.a,{className:"icon_edit_btn_style",title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})),s.a.createElement(Ue.a,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0434\u0430\u043d\u044b\u043d\u0435?",onConfirm:function(){return I(t.id)}},s.a.createElement(Xe.a,{className:"icon_edit_btn_style",title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})))}}]);return(t.length>0&&"\u0412\u0441\u0435 \u0441\u043f\u0440\u0430\u0432\u043e\u0447\u043d\u0438\u043a\u0438"===t[0].title?t:e).map((function(e){return e.editable?Object(b.a)({},e,{onCell:function(t){return{record:t,inputType:e.type,dataIndex:e.dataIndex,title:e.title,data:e.data,editing:k(t)}}}):e}))}),[t,v,k,I,l,u,w]);return s.a.createElement(Be.a,{form:w,component:!1},s.a.createElement(Je.a,{components:{body:{cell:Sa}},locale:{filterTitle:"\u041c\u0435\u043d\u044e \u0444\u0438\u043b\u044c\u0442\u0440\u0430",filterConfirm:"\u041e\u043a",filterReset:"\u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c",filterEmptyText:"\u041d\u0435\u0442 \u0444\u0438\u043b\u044c\u0442\u0440\u043e\u0432",selectAll:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0443\u044e \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443",selectInvert:"Invert current page",selectionAll:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0432\u0441\u0435",sortTitle:"\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c",expand:"Expand row",collapse:"Collapse row",triggerDesc:"\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u043e \u0443\u0431\u044b\u0432\u0430\u043d\u0438\u044e",triggerAsc:"\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u043e \u0432\u043e\u0437\u0440\u0430\u0441\u0442\u0430\u043d\u0438\u044e",cancelSort:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0443"},columns:_,dataSource:d?p:a,loading:n,pagination:{pageSizeOptions:["10","20","25","30"],showSizeChanger:!0,locale:{items_per_page:""},onChange:x},className:"AdminTable_style"}))})),Ma=function(e){var t=e.isLink,a=e.isStrategy,n=Object(o.useState)(!1),r=Object(xe.a)(n,2),c=r[0],i=r[1],l=Object(o.useContext)(ja),u=l.dictionary_names,d=l.setModalIndicator,m=l.fetchedDictionaryData,f=l.fetchedIndicatorData,y=l.setFetchedIndicatorData;Object(o.useEffect)((function(){ka("/sc-analytic-indicators/api/indicators").then((function(e){y({loading:!1,data:e.data})}))}),[]);var v=Object(o.useMemo)((function(){if(f.loading)return[];var e={};return(a?f.data.filter((function(e){if(e.dictionaries.\u0422\u0438\u043f&&"\u0421\u0442\u0440\u0430\u0442\u0435\u0433\u0438\u044f"===e.dictionaries.\u0422\u0438\u043f)return e})):f.data.filter((function(e){if(e.dictionaries.\u0422\u0438\u043f&&"\u0418\u043d\u0434\u0438\u043a\u0430\u0442\u043e\u0440"===e.dictionaries.\u0422\u0438\u043f)return e}))).forEach((function(t){var a,n={id:t.id,key:"".concat(t.name,"-").concat(t.id),"\u0418\u043d\u0434\u0438\u043a\u0430\u0442\u043e\u0440":t.name};(a=t.dictionaries,Object.keys(a).map((function(e){return e}))).map((function(e){n=Object(b.a)({},n,Object(p.a)({},e,t.dictionaries[e]))})),e=Object(b.a)({},e,Object(p.a)({},t.name,n))})),Object.values(e)}),[f,a]),j=Object(o.useMemo)((function(){var e=[].concat(Object(g.a)(u),["\u041e\u0442\u0440\u0430\u0441\u043b\u044c"]);(e=e.filter((function(e){return a?"\u0421\u0444\u0435\u0440\u0430"!==e:"\u0421\u0442\u0440\u0430\u0442\u0435\u0433\u0438\u044f 2050"!==e}))).sort();var n={},r={};if(!m.loading){var c;m.data.forEach((function(e){if(n=Object(b.a)({},n,Object(p.a)({},e.name,e.options.map((function(e){return e.name})))),a?"\u0421\u0442\u0440\u0430\u0442\u0435\u0433\u0438\u044f 2050"===e.name:"\u0421\u0444\u0435\u0440\u0430"===e.name){var t,c=e.options.map((function(e){return e.options.map((function(e){return e.name}))}));n=Object(b.a)({},n,{"\u041e\u0442\u0440\u0430\u0441\u043b\u044c":(t=[]).concat.apply(t,Object(g.a)(c))})}r=Object(b.a)({},r,Object(p.a)({},e.name,e.options.map((function(e){return{title:e.name,value:e.name,id:e.id,children:[]}}))))}));var o=m.data.find((function(e){return a?"\u0421\u0442\u0440\u0430\u0442\u0435\u0433\u0438\u044f 2050"===e.name:"\u0421\u0444\u0435\u0440\u0430"===e.name}));r=Object(b.a)({},r,{"\u041e\u0442\u0440\u0430\u0441\u043b\u044c":(c=[]).concat.apply(c,Object(g.a)(o.options.map((function(e){return e.options.map((function(e){return{title:e.name,value:e.name,id:e.id,children:[]}}))}))))})}return[{title:"\u0418\u043d\u0434\u0438\u043a\u0430\u0442\u043e\u0440",dataIndex:"\u0418\u043d\u0434\u0438\u043a\u0430\u0442\u043e\u0440",width:250,editable:!0,render:function(e,a){return t?s.a.createElement("a",{onClick:function(){i(!0),d({name:a.key,id:a.id})}},e):e},sorter:function(e,t){return function(e,t){return e===t?0:e>t?1:-1}(e.\u0418\u043d\u0434\u0438\u043a\u0430\u0442\u043e\u0440,t.\u0418\u043d\u0434\u0438\u043a\u0430\u0442\u043e\u0440)},sortDirections:["ascend"]}].concat(Object(g.a)(e.map((function(e){var t,a=n[e]&&n[e].map((function(e){return{text:e,value:e}}));return{title:(t="\u0421\u0442\u0440\u0430\u0442\u0435\u0433\u0438\u044f 2050"===e?"\u0421\u0444\u0435\u0440\u0430":e,t.charAt(0).toUpperCase()+t.slice(1)),dataIndex:e,editable:!0,width:250,data:r[e],filters:a,type:"select",onFilter:function(t,a){return a[e]===t}}}))))}),[m,t,a,u,d]),E=function(){var e=Object(O.a)(h.a.mark((function e(t,n,r){var c,i,o,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c={name:t["\u0418\u043d\u0434\u0438\u043a\u0430\u0442\u043e\u0440"],dictionaries:[a?229:227]},i=[],e.next=5,n.validateFields();case 5:o=e.sent,s=Object.keys(o).map((function(e){return{name:e,value:o[e]}})),s.filter((function(e){return void 0!==e.value&&"\u0418\u043d\u0434\u0438\u043a\u0430\u0442\u043e\u0440"!==e.name})).map((function(e){if("\u041e\u0442\u0440\u0430\u0441\u043b\u044c"===e.name){var t=a?"\u0421\u0442\u0440\u0430\u0442\u0435\u0433\u0438\u044f 2050":"\u0421\u0444\u0435\u0440\u0430",n=m.data.find((function(e){return e.name===t})).options.find((function(t){return t.options.find((function(t){return t.name===e.value}))})).options.find((function(t){return t.name===e.value}));i=[].concat(Object(g.a)(i),[n.id])}else{var r=m.data.find((function(t){return t.name===e.name})).options.find((function(t){return t.name===e.value}));i=[].concat(Object(g.a)(i),[r.id])}})),c.dictionaries=[].concat(Object(g.a)(c.dictionaries),Object(g.a)(i)),Ia("/sc-analytic-indicators/api/indicators/".concat(t.id),c).then((function(e){return ka("/sc-analytic-indicators/api/indicators").then((function(e){y({loading:!1,data:e.data})}))})).catch((function(e){return console.log(e)})),n.resetFields(),r(""),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),console.log("Validate Failed:",e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t,a,n){return e.apply(this,arguments)}}();return s.a.createElement(s.a.Fragment,null,s.a.createElement(Pa,{open:c,setOpen:i,className:"AdminIndicator_style"}),s.a.createElement(Na,{cols:j,data:v,loading:f.loading,url:"/sc-analytic-indicators/api/indicators",setFetchedData:y,save:E,isLink:t}))},Ra=function(e){var t=e.placeholder,a=void 0===t?"\u041d\u043e\u0432\u044b\u0439 \u044d\u043b\u0435\u043c\u0435\u043d\u0442":t,n=e.defaultValue,r=void 0===n?"":n,c=e.required,i=void 0===c||c,o=e.inptRef;return s.a.createElement(ze.a,{placeholder:a,defaultValue:r,required:i,allowClear:!0,ref:o,className:"AdminInput_style"})},Ya=function(e){return s.a.createElement(wt.a,{defaultActiveKey:"1",tabPosition:e.position||"left",className:e.classname||"Indicators_tab_style"},e.children)},La=a(449),Ta=function(e){var t=e.plan,a=Object(o.useState)({date:null,value:null}),n=Object(xe.a)(a,2),r=n[0],c=n[1],i=Object(o.useState)({alert:!1}),l=Object(xe.a)(i,2),u=l[0],d=l[1],m=Object(o.useContext)(ja),f=m.modalIndicator,p=m.setFetchedIndicatorInfoData,g=Be.a.useForm(),y=Object(xe.a)(g,1)[0];return s.a.createElement(Be.a,{form:y,className:"Controllers_style_inner"},s.a.createElement(Be.a.Item,{className:"Controllers_style_item"},s.a.createElement(He.a,null,s.a.createElement(Be.a.Item,{name:"datepicker_field",className:"datepicker_field_style"},s.a.createElement(He.a,null,s.a.createElement(Ft.a,{onChange:function(e,t){return c((function(e){return Object(b.a)({},e,{date:{year:t}})}))},picker:"year",allowClear:!0,placeholder:"\u0413\u043e\u0434",locale:Va}),s.a.createElement(Ua,{placeholder:"\u041c\u0435\u0441\u044f\u0446",data:Aa,style:{width:170,background:"#fff",color:"#333"},callBack:function(e){return c((function(t){return Object(b.a)({},t,{date:Object(b.a)({},t.date,{month:e})})}))}}))),s.a.createElement(Be.a.Item,{name:"number_field"},s.a.createElement(et.a,{onChange:function(e){return c((function(t){return Object(b.a)({},t,{value:e})}))},placeholder:t,min:0})),s.a.createElement(_e.a,{type:"primary",onClick:function(){if(r.date&&r.value||0===r.value){var e={date:r.date.month?"".concat(r.date.year,"-").concat(r.date.month,"-15"):"".concat(r.date.year,"-12-31"),"edit-comment":"",fact:"\u0424\u0430\u043a\u0442"===t?r.value:null,planned:"\u0424\u0430\u043a\u0442"!==t?r.value:null};c({date:null,value:null}),xa("/sc-analytic-indicators/api/indicators/".concat(f.id,"/indexes"),e).then((function(e){d({alert:!0,message:"\u0423\u0441\u043f\u0435\u0448\u043d\u043e",description:"\u0414\u0430\u043d\u043d\u044b\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u044b \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440",type:"success"}),setTimeout((function(){return d({alert:!1})}),15e3),ka("/sc-analytic-indicators/api/indicators/".concat(f.id,"/indexes")).then((function(e){p({data:e.data,loading:!1})}))})),y.resetFields()}else d({alert:!0,message:"\u041e\u0448\u0438\u0431\u043a\u0430",description:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0441\u0435 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b\u0435 \u0434\u0430\u043d\u044b\u043d\u0435 \u0434\u043b\u044f \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0438 \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440",type:"error"}),setTimeout((function(){return d({alert:!1})}),15e3)}},"+"))),u.alert&&s.a.createElement(La.a,{message:u.message,description:u.description,type:u.type,closable:!0,onClose:function(){return d({alert:!1})},style:{margin:15}}))},Va={lang:{locale:"ru",placeholder:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0434\u0430\u0442\u0443",today:"\u0421\u0435\u0433\u043e\u0434\u043d\u044f",now:"\u0421\u0435\u0439\u0447\u0430\u0441",ok:"\u043e\u043a",clear:"\u043e\u0447\u0438\u0441\u0442\u0438\u0442\u044c",month:"\u041c\u0435\u0441\u044f\u0446",year:"\u0413\u043e\u0434",yearFormat:"YYYY",dateFormat:"M/D/YYYY",dayFormat:"D",dateTimeFormat:"M/D/YYYY HH:mm:ss",monthFormat:"MMMM",monthBeforeYear:!1},timePickerLocale:{placeholder:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0432\u0440\u0435\u043c\u044f"},dateFormat:"YYYY-MM-DD",dateTimeFormat:"YYYY-MM-DD HH:mm:ss",weekFormat:"YYYY-wo",monthFormat:"YYYY-MM"},Aa=[{id:"01",title:"\u042f\u043d\u0432\u0430\u0440\u044c",value:"\u042f\u043d\u0432\u0430\u0440\u044c",children:[]},{id:"02",title:"\u0424\u0435\u0432\u0440\u0430\u043b\u044c",value:"\u0424\u0435\u0432\u0440\u0430\u043b\u044c",children:[]},{id:"03",title:"\u041c\u0430\u0440\u0442",value:"\u041c\u0430\u0440\u0442",children:[]},{id:"04",title:"\u0410\u043f\u0440\u0435\u043b\u044c",value:"\u0410\u043f\u0440\u0435\u043b\u044c",children:[]},{id:"05",title:"\u041c\u0430\u0439",value:"\u041c\u0430\u0439",children:[]},{id:"06",title:"\u0418\u044e\u043d\u044c",value:"\u0418\u044e\u043d\u044c",children:[]},{id:"07",title:"\u0418\u044e\u043b\u044c",value:"\u0418\u044e\u043b\u044c",children:[]},{id:"08",title:"\u0410\u0432\u0433\u0443\u0441\u0442",value:"\u0410\u0432\u0433\u0443\u0441\u0442",children:[]},{id:"09",title:"\u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044c",value:"\u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044c",children:[]},{id:"10",title:"\u041e\u043a\u0442\u044f\u0431\u0440\u044c",value:"\u041e\u043a\u0442\u044f\u0431\u0440\u044c",children:[]},{id:"11",title:"\u041d\u043e\u044f\u0431\u0440\u044c",value:"\u041d\u043e\u044f\u0431\u0440\u044c",children:[]},{id:"12",title:"\u0414\u0435\u043a\u0430\u0431\u0440\u044c",value:"\u0414\u0435\u043a\u0430\u0431\u0440\u044c",children:[]}],qa=function(e){var t=e.plan,a=(e.isStrategy,Object(o.useContext)(ja)),n=a.fetchedIndicatorInfoData,r=a.setFetchedIndicatorInfoData,c=a.modalIndicator,i=Object(o.useMemo)((function(){return[{title:"\u0414\u0430\u0442\u0430",dataIndex:"year",key:"year",render:function(e){return s.a.createElement("a",null,e)}},{title:t,dataIndex:t,key:t,type:"number",editable:!0},{title:"\u0414\u0430\u0442\u0430 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f",dataIndex:"date",key:"date"},{title:"\u041a\u043e\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439",key:"comment",editable:!0,dataIndex:"comment"}]}),[t]),l=Object(o.useMemo)((function(){var e=[];return n.loading||(e=n.data.map((function(e,a){var n=e["last-edit"].substr(0,e["last-edit"].indexOf("T")),r=e.date.substr(0,7);return"\u041f\u043b\u0430\u043d"===t?e.planned||0===e.planned?{key:"".concat(e["indicator-name"],"-").concat(e.id),id:e.id,year:r,"\u041f\u043b\u0430\u043d":e.planned,date:n,comment:e["edit-comment"]}:null:e.fact||0===e.fact?{key:"".concat(e["indicator-name"],"-").concat(e.id),id:e.id,year:r,"\u0424\u0430\u043a\u0442":e.fact,date:n,comment:e["edit-comment"]}:null}))),e.length>0&&(e=e.filter((function(e){return void 0!==e&&null!==e}))),e}),[n,t]),u=function(){var e=Object(O.a)(h.a.mark((function e(t,a,i){var o,s,l;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.validateFields();case 3:o=e.sent,s=n.data.find((function(e){return e.id===t.id})),l={date:"".concat(t.year,"-01"),"edit-comment":o.comment,fact:o.\u0424\u0430\u043a\u0442?o.\u0424\u0430\u043a\u0442:s.fact,planned:o.\u041f\u043b\u0430\u043d?o.\u041f\u043b\u0430\u043d:s.planned},Ia("/sc-analytic-indicators/api/indexes/".concat(t.id),l).then((function(e){return ka("/sc-analytic-indicators/api/indicators/".concat(c.id,"/indexes")).then((function(e){r({data:e.data,loading:!1})}))})).catch((function(e){return console.log(e)})),i(""),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log("Validate Failed:",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,a,n){return e.apply(this,arguments)}}();return s.a.createElement(Na,{cols:i,data:l,loading:n.loading,url:"/sc-analytic-indicators/api/indexes",setFetchedData:r,url2:"/sc-analytic-indicators/api/indicators/".concat(c.id,"/indexes"),save:u,edit:function(e,t,a){t.setFieldsValue(Object(b.a)({},e)),a(e.key)}})},Ba=function(e){var t=e.plan,a=e.isStrategy;return s.a.createElement("div",{className:"Controllers_style"},s.a.createElement(Ta,{plan:t}),s.a.createElement(qa,{plan:t,isStrategy:a}))},Pa=function(e){var t=e.open,a=e.setOpen,n=Object(o.useContext)(ja),r=n.modalIndicator,c=n.setFetchedIndicatorInfoData;Object(o.useEffect)((function(){r&&ka("/sc-analytic-indicators/api/indicators/".concat(r.id,"/indexes")).then((function(e){return c((function(t){return Object(b.a)({},t,{data:e.data,loading:!1})}))}))}),[r]);var i=wt.a.TabPane,l=function(){a(!1)};return s.a.createElement(xt.a,{title:r&&r.name,visible:t,width:"auto",onOk:l,onCancel:l,className:"AdminModal_style"},s.a.createElement(Ya,{position:"top"},s.a.createElement(i,{tab:"\u041f\u043b\u0430\u043d",key:"1"},s.a.createElement(Ba,{plan:"\u041f\u043b\u0430\u043d"})),s.a.createElement(i,{tab:"\u0424\u0430\u043a\u0442",key:"2"},s.a.createElement(Ba,{plan:"\u0424\u0430\u043a\u0442"}))))},za=function(e){var t=e.placeholder,a=Object(o.useRef)(),n=Object(o.useContext)(ja).setSearchText;return s.a.createElement(ze.a,{placeholder:t||"\u041f\u043e\u0438\u0441\u043a \u0441\u043f\u0440\u0430\u0432\u043e\u0447\u043d\u0438\u043a\u0430",defaultValue:"",ref:a,allowClear:!0,onChange:function(){return n(a.current.input.value)},className:"AdminSearch_style"})},Wa=a(441),Ua=function(e){var t=e.data,a=e.placeholder,n=void 0===a?"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0441\u043f\u0440\u0430\u0432\u043e\u0447\u043d\u0438\u043a":a,r=e.style,c=void 0===r?{margin:5,marginLeft:0,marginRight:8}:r,i=e.callBack,l=e.defaultValue,u=Object(o.useContext)(ja),d=u.setSelectedDictionaryName,m=u.setSelectedIndustry,f=u.dictionary_names,p=function(e){return d(e)},b=function(e){var a=t.find((function(t){return t.value===e}));m(e),i&&a&&i(a.id)},g=function(e){return e.map((function(e){return{title:e,value:e,children:[]}}))};return s.a.createElement(s.a.Fragment,null,t?s.a.createElement(Wa.a,{style:c,allowClear:!0,placeholder:n,treeData:t,onChange:b,className:"AdminSelect_style",defaultValue:l,virtual:!1}):s.a.createElement(Wa.a,{placeholder:n,onChange:p,style:c,treeData:g(f),className:"AdminSelect_style",virtual:!1}))},Ha=function(){var e=Object(o.useContext)(ja),t=e.selectedDictionaryName,a=e.fetchedDictionaryData,n=e.setFetchedDictionaryData,r=Object(o.useState)([]),c=Object(xe.a)(r,2),i=c[0],l=c[1],u=Object(o.useMemo)((function(){return t?[{title:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435",dataIndex:t,editable:!0,width:"90%"}]:[{title:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435",dataIndex:"All",width:"90%",padding:"10px"}]}),[t]);Object(o.useEffect)((function(){var e=[];if(!a.loading){var n,r=a.data.filter((function(e){return"\u0422\u0438\u043f"!==e.name})),c=r.find((function(e){return e.name===t}));e=t?c.options.map((function(e){var a;return e.options.length>0?(a={key:e.name,id:e.id,tag:e.tag,"parent-id":c.id},Object(p.a)(a,t,e.name),Object(p.a)(a,"children",e.options.map((function(a){var n;return n={key:a.name},Object(p.a)(n,t,a.name),Object(p.a)(n,"parent-id",e.id),Object(p.a)(n,"tag",e.tag),Object(p.a)(n,"id",a.id),n}))),a):Object(p.a)({key:e.name,id:e.id,tag:e.tag,"parent-id":c.id},t,e.name)})):(n=[]).concat.apply(n,Object(g.a)(r.map((function(e){return"\u0421\u0444\u0435\u0440\u0430"===e.name||"\u0421\u0442\u0440\u0430\u0442\u0435\u0433\u0438\u044f 2050"===t?e.options.map((function(e){return{key:e.name,All:e.name,children:e.options.map((function(e){return{key:e.name,All:e.name}}))}})):{key:e.name,All:e.name,children:e.options.map((function(e){return{key:e.name,All:e.name}}))}}))))}l(e)}),[a,t]);var d=function(){var e=Object(O.a)(h.a.mark((function e(t,a,r){var c,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.validateFields();case 3:c=e.sent,i={name:c[t.tag],tag:t.tag},Ia("/sc-analytic-indicators/api/dictionaries/".concat(t.id),i).then((function(e){return ka("/sc-analytic-indicators/api/dictionaries").then((function(e){return n({loading:!1,data:e.data})}))})).catch((function(e){return console.log(e)})),r(""),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log("Validate Failed:",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,a,n){return e.apply(this,arguments)}}();return s.a.createElement(Na,{cols:u,data:i,loading:a.loading,url:"/sc-analytic-indicators/api/dictionaries",setFetchedData:n,save:d})},Ja=function(e){var t,a=e.ant_form,n=Object(o.useRef)(),r=Object(o.useRef)(),c=Object(o.useState)({alert:!1}),i=Object(xe.a)(c,2),l=i[0],u=i[1],d=Object(o.useContext)(ja),m=d.selectedIndustry,f=d.selectedDictionaryName,p=d.fetchedDictionaryData,b=d.setFetchedDictionaryData;p.loading||(t=p.data.find((function(e){return e.name===f})));var g=[];return t&&(g=t.options.map((function(e){return{id:e.id,title:e.name,value:e.name,children:[]}}))),s.a.createElement(s.a.Fragment,null,f&&s.a.createElement(Be.a.Item,{name:"dictionary-controllers Controllers_style"},s.a.createElement("div",{className:"form_add_sphere Controllers_style_inner"},s.a.createElement(Ra,{inptRef:n,required:!0,placeholder:"\u0421\u0444\u0435\u0440\u0430"===f||"\u0421\u0442\u0440\u0430\u0442\u0435\u0433\u0438\u044f 2050"===f?"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u043e\u0432\u0443\u044e \u0441\u0444\u0435\u0440\u0443":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u043e\u0432\u044b\u0439 \u044d\u043b\u0435\u043c\u0435\u043d\u0442"}),s.a.createElement(Ca,{handleAdd:function(){if(n.current.input.value){var e=n.current.input.value,r={"parent-id":t.id,tag:f,name:e,options:[]};xa("/sc-analytic-indicators/api/dictionaries",r).then((function(e){u({alert:!0,message:"\u0423\u0441\u043f\u0435\u0448\u043d\u043e",description:"\u0414\u0430\u043d\u043d\u044b\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u044b \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440",type:"success"}),setTimeout((function(){return u({alert:!1})}),3e3),ka("/sc-analytic-indicators/api/dictionaries").then((function(e){return b({loading:!1,data:e.data})})).catch((function(e){u({alert:!0,message:"\u041e\u0448\u0438\u0431\u043a\u0430",description:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0441 \u0437\u0430\u043f\u0438\u0441\u044c\u044e \u0434\u0430\u043d\u043d\u044b\u0445 \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440",type:"error"}),setTimeout((function(){return u({alert:!1})}),3e3)}))})),a.resetFields()}else u({alert:!0,message:"\u041e\u0448\u0438\u0431\u043a\u0430",description:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0434\u043b\u044f \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0438 \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440",type:"error"}),setTimeout((function(){return u({alert:!1})}),3e3)},text1:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u0444\u0435\u0440\u0443"}))),"\u0421\u0444\u0435\u0440\u0430"===f||"\u0421\u0442\u0440\u0430\u0442\u0435\u0433\u0438\u044f 2050"===f?s.a.createElement(Be.a.Item,{className:"form_add_sphere_wrap"},s.a.createElement(Ua,{data:g,placeholder:"\u0421\u0434\u0435\u043b\u0430\u0439\u0442\u0435 \u0432\u044b\u0431\u043e\u0440"}),s.a.createElement("div",{className:"form_add_sphere"},s.a.createElement(Be.a.Item,{name:"dictionary-child-controllers"},s.a.createElement(Ra,{inptRef:r,placeholder:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u043e\u0432\u0443\u044e \u043e\u0442\u0440\u0430\u0441\u043b\u044c",required:!0})),s.a.createElement(Ca,{handleAdd:function(){if(m&&r.current.input.value){var e=r.current.input.value,n={"parent-id":t.options.find((function(e){return e.name===m})).id,tag:"\u041e\u0442\u0440\u0430\u0441\u043b\u044c",name:e,options:[]};xa("/sc-analytic-indicators/api/dictionaries",n).then((function(e){u({alert:!0,message:"\u0423\u0441\u043f\u0435\u0448\u043d\u043e",description:"\u0414\u0430\u043d\u043d\u044b\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u044b \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440",type:"success"}),setTimeout((function(){return u({alert:!1})}),3e3),ka("/sc-analytic-indicators/api/dictionaries").then((function(e){return b({loading:!1,data:e.data})})).catch((function(e){u({alert:!0,message:"\u041e\u0448\u0438\u0431\u043a\u0430",description:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0441 \u0437\u0430\u043f\u0438\u0441\u044c\u044e \u0434\u0430\u043d\u043d\u044b\u0445 \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440",type:"error"}),setTimeout((function(){return u({alert:!1})}),3e3)}))})),a.resetFields()}else u({alert:!0,message:"\u041e\u0448\u0438\u0431\u043a\u0430",description:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0441\u0435 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b\u0435 \u0434\u0430\u043d\u044b\u043d\u0435 \u0434\u043b\u044f \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0438 \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440",type:"error"}),setTimeout((function(){return u({alert:!1})}),3e3)},text2:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043e\u0442\u0440\u0430\u0441\u043b\u044c"}))):null,l.alert&&s.a.createElement(La.a,{message:l.message,description:l.description,type:l.type,closable:!0,onClose:function(){return u({alert:!1})},style:{margin:15}}))},Ka=function(){var e=Be.a.useForm(),t=Object(xe.a)(e,1)[0],a=Object(o.useContext)(ja).setFetchedDictionaryData;return Object(o.useEffect)((function(){ka("/sc-analytic-indicators/api/dictionaries").then((function(e){a({loading:!1,data:e.data})}))}),[]),s.a.createElement(Be.a,{form:t},s.a.createElement(Be.a.Item,{style:{display:"flex",justifyContent:"space-between",width:"60%"}},s.a.createElement("div",{className:"first_stage_filter"},s.a.createElement(Ua,null))),s.a.createElement(Ja,{ant_form:t}),s.a.createElement(Be.a.Item,{style:{width:"60%",marginBottom:10}},s.a.createElement(za,{style:{width:"40%",margin:"5 0",marginRight:8}})),s.a.createElement(Be.a.Item,null,s.a.createElement(Ha,null)))},Ga=function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement(Ea,null,s.a.createElement(Ka,null)))},Qa=function(e){var t=e.isStrategy,a=Object(o.useState)([]),n=Object(xe.a)(a,2),r=n[0],c=n[1],i=Object(o.useContext)(ja),l=i.fetchedDictionaryData,u=i.setFetchedIndicatorData,d=i.setFetchedIndicatorStrategyData,m=Object(o.useRef)(),f=Be.a.useForm(),p=Object(xe.a)(f,1)[0],b=Object(o.useState)({alert:!1}),y=Object(xe.a)(b,2),h=y[0],O=y[1],v=function(e){c((function(t){return[].concat(Object(g.a)(t),[e])}))},j=Object(o.useMemo)((function(){var e,a=[],n=[];l.loading||(n=l.data.find((function(e){return t?"\u0421\u0442\u0440\u0430\u0442\u0435\u0433\u0438\u044f 2050"===e.name:"\u0421\u0444\u0435\u0440\u0430"===e.name})).options.map((function(e){return e.options.map((function(e){return{name:e.name,id:e.id}}))})),a=l.data.filter((function(e){return"\u0422\u0438\u043f"!==e.name})).filter((function(e){return t?"\u0421\u0444\u0435\u0440\u0430"!==e.name:"\u0421\u0442\u0440\u0430\u0442\u0435\u0433\u0438\u044f 2050"!==e.name})).map((function(e,a){var n=t?"\u0421\u0442\u0440\u0430\u0442\u0435\u0433\u0438\u044f 2050":"\u0421\u0444\u0435\u0440\u0430",r=e.options.map((function(t){return e.name===n?{id:t.id,title:t.name,value:t.name,children:[]}:{id:t.id,title:t.name,value:t.name,children:t.options.map((function(e){return{id:e.id,title:e.name,value:e.name,children:[]}}))}}));return s.a.createElement(Ua,{key:a,placeholder:"\u0421\u0442\u0440\u0430\u0442\u0435\u0433\u0438\u044f 2050"===e.name?"\u0421\u0444\u0435\u0440\u0430":e.name,data:r,callBack:function(e){return v(e)}})})));return a.push(s.a.createElement(Ua,{key:45,placeholder:"\u041e\u0442\u0440\u0430\u0441\u043b\u044c",data:(e=[]).concat.apply(e,Object(g.a)(n)).map((function(e){return{id:e.id,title:e.name,value:e.name,children:[]}})),callBack:function(e){return v(e)}})),a.map((function(e){return e}))}),[l,t]);return s.a.createElement("div",{className:"form_indicators"},!l.loading&&s.a.createElement(Be.a,{form:p},s.a.createElement(Be.a.Item,{style:{width:"60%"}},s.a.createElement(Be.a.Item,{name:"input"},s.a.createElement(Ra,{placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0438\u043d\u0434\u0438\u043a\u0430\u0442\u043e\u0440\u0430",inptRef:m,style:{margin:20,marginLeft:0,marginTop:0,minWidth:250,width:250}})),j,s.a.createElement(Ca,{type:"primary",handleAdd:function(){if(m.current.input.value){var e=t?229:227,a={name:m.current.input.value,dictionaries:[].concat(Object(g.a)(r),[e])};xa("/sc-analytic-indicators/api/indicators",a).then((function(e){O({alert:!0,message:"\u0423\u0441\u043f\u0435\u0448\u043d\u043e",description:"\u0414\u0430\u043d\u043d\u044b\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u044b \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440",type:"success"}),setTimeout((function(){return O({alert:!1})}),3e3),ka("/sc-analytic-indicators/api/indicators").then((function(e){u({loading:!1,data:e.data}),d({loading:!1,data:e.data})})).catch((function(e){O({alert:!0,message:"\u041e\u0448\u0438\u0431\u043a\u0430",description:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0441 \u0437\u0430\u043f\u0438\u0441\u044c\u044e \u0434\u0430\u043d\u043d\u044b\u0445 \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440",type:"error"}),setTimeout((function(){return O({alert:!1})}),3e3)}))})),p.resetFields()}else O({alert:!0,message:"\u041e\u0448\u0438\u0431\u043a\u0430",description:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0441\u0435 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b\u0435 \u0434\u0430\u043d\u044b\u043d\u0435 \u0434\u043b\u044f \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0438 \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440",type:"error"}),setTimeout((function(){return O({alert:!1})}),3e3)},text3:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0438\u043d\u0434\u0438\u043a\u0430\u0442\u043e\u0440"})),h.alert&&s.a.createElement(La.a,{message:h.message,description:h.description,type:h.type,closable:!0,onClose:function(){return O({alert:!1})},style:{margin:15}})))},Xa=function(){var e=wt.a.TabPane,t=Object(o.useContext)(ja),a=t.fetchedDictionaryData,n=t.setFetchedDictionaryData;return Object(o.useEffect)((function(){a.data||ka("/sc-analytic-indicators/api/dictionaries").then((function(e){n({loading:!1,data:e.data})}))}),[]),s.a.createElement(Ya,{position:"top"},s.a.createElement(e,{tab:"\u041f\u0430\u043d\u0435\u043b\u044c \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u0430",key:"1"},s.a.createElement(Qa,null),s.a.createElement("div",{style:{width:"60%",margin:"20px 0"}},s.a.createElement(za,{placeholder:"\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u0438\u043d\u0434\u0438\u043a\u0430\u0442\u043e\u0440\u0430\u043c"})),s.a.createElement(Ma,null)),s.a.createElement(e,{tab:"\u0418\u043d\u0434\u0438\u043a\u0430\u0442\u043e\u0440 \u0441\u0442\u0440\u0430\u0442\u0435\u0433\u0438\u0438",key:"2"},s.a.createElement(Qa,{isStrategy:!0}),s.a.createElement("div",{style:{width:"60%",margin:"20px 0"}},s.a.createElement(za,{placeholder:"\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u0438\u043d\u0434\u0438\u043a\u0430\u0442\u043e\u0440\u0430\u043c"})),s.a.createElement(Ma,{isStrategy:!0})))},Za=function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement(Ea,null,s.a.createElement(Xa,null)))},$a=function(){var e=wt.a.TabPane;return s.a.createElement(s.a.Fragment,null,s.a.createElement(Ea,null,s.a.createElement(Ya,{position:"top"},s.a.createElement(e,{tab:"\u041f\u0430\u043d\u0435\u043b\u044c \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u0430",key:"1"},s.a.createElement("div",{style:{width:"60%",margin:20}},s.a.createElement(za,{placeholder:"\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u043f\u043e\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044f\u043c \u0438\u043d\u0434\u0438\u043a\u0430\u0442\u043e\u0440\u043e\u0432"})),s.a.createElement(Da,null,s.a.createElement(Ma,{isLink:!0}))),s.a.createElement(e,{tab:"\u0418\u043d\u0434\u0438\u043a\u0430\u0442\u043e\u0440 \u0441\u0442\u0440\u0430\u0442\u0435\u0433\u0438\u0438",key:"2"},s.a.createElement("div",{style:{width:"60%",margin:20}},s.a.createElement(za,{placeholder:"\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u043f\u043e\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044f\u043c \u0438\u043d\u0434\u0438\u043a\u0430\u0442\u043e\u0440\u043e\u0432"})),s.a.createElement(Da,null,s.a.createElement(Ma,{isStrategy:!0,isLink:!0}))))))},en=s.a.memo((function(){return s.a.createElement(we.d,null,s.a.createElement(we.a,{exact:!0,from:"/",to:"/\u0420\u043e\u043b\u0438"}),s.a.createElement(qe,{exact:!0,path:"/\u0420\u043e\u043b\u0438",component:ft}),s.a.createElement(qe,{exact:!0,path:"/\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438",component:st}),s.a.createElement(qe,{exact:!0,path:"/\u0420\u0435\u043c\u043e\u043d\u0442 \u0434\u043e\u0440\u043e\u0433",component:da}),s.a.createElement(qe,{exact:!0,path:"/\u0420\u0443\u043a\u043e\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u0438",component:va}),s.a.createElement(we.b,{path:"/\u0421\u043f\u0440\u0430\u0432\u043e\u0447\u043d\u0438\u043a\u0438",component:function(){return s.a.createElement(Ae,null,s.a.createElement(Ga,null))}}),s.a.createElement(we.b,{path:"/\u0410\u043d\u0430\u043b\u0438\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0438\u043d\u0434\u0438\u043a\u0430\u0442\u043e\u0440\u044b",component:function(){return s.a.createElement(Ae,null,s.a.createElement(Za,null))}}),s.a.createElement(we.b,{path:"/\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u0438 \u0438\u043d\u0434\u0438\u043a\u0430\u0442\u043e\u0440\u043e\u0432",component:function(){return s.a.createElement(Ae,null,s.a.createElement($a,null))}}),s.a.createElement(we.b,{exact:!0,path:"/\u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f",component:We}))}));a(435);var tn=function(){var e=Object(m.c)((function(e){return e.admin})),t=e.auth,a=e.config,n=Object(m.c)((function(e){return e.roles})),r=n.roles,c=n.modules,i=Object(m.b)();return Object(o.useEffect)((function(){var e=JSON.parse(localStorage.getItem("user"));e&&"idle"===t.status&&i(F({auth:e.auth,config:e.config}))}),[t]),Object(o.useEffect)((function(){"success"===r.status&&"success"===t.status&&r.data.forEach((function(e){t.data.roles.includes(e.repr)&&i(w({config:a,id:e.id,repr:e.repr}))}))}),[t,r,a]),Object(o.useEffect)((function(){"success"===t.status&&i(k(a))}),[a,t]),Object(o.useEffect)((function(){"success"===t.status&&("idle"===r.status&&i(ne({auth:t.data,config:a})),"idle"===c.status&&i(re(a)))}),[t,r,c,a]),s.a.createElement(en,null)},an=Object(d.a)({reducer:{roadmap:te,admin:S,roles:de,users:Oe,heads:Ee}});u.a.render(s.a.createElement(m.a,{store:an},s.a.createElement(f.a,{basename:"/admin"},s.a.createElement(tn,null))),document.getElementById("root"))}},[[242,1,2]]]);
//# sourceMappingURL=main.b22ff3e0.chunk.js.map