(this.webpackJsonpsit_centre=this.webpackJsonpsit_centre||[]).push([[0],{240:function(e,t,a){e.exports=a(433)},265:function(e,t,a){},419:function(e,t,a){},432:function(e,t,a){},433:function(e,t,a){"use strict";a.r(t);var n,r=a(0),c=a.n(r),i=a(36),o=a.n(i),l=a(49),s=a(32),u=a(73),d=a(13),m=a(16),f=a(30),p=a(200),b=a(11),y=a.n(b),g=a(28),h=a(45),E=a.n(h),v=Object(l.b)("admin/getCurrentUser",function(){var e=Object(g.a)(y.a.mark((function e(t){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/sc-api-gateway/acl/users/current",e.next=3,E.a.get("/sc-api-gateway/acl/users/current").then((function(e){return e.data})).catch((function(e){return console.log(e)}));case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),O=Object(l.b)("admin/getRoles",function(){var e=Object(g.a)(y.a.mark((function e(t){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/sc-api-gateway/acl/roles",e.next=3,E.a.get("/sc-api-gateway/acl/roles").then((function(e){return e.data})).catch((function(e){return console.log(e)}));case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),j=Object(l.b)("admin/getModules",function(){var e=Object(g.a)(y.a.mark((function e(t){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/sc-api-gateway/acl/modules",e.next=3,E.a.get("/sc-api-gateway/acl/modules").then((function(e){return e.data})).catch((function(e){return console.log(e)}));case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),k=Object(l.b)("admin/getRoleModules",function(){var e=Object(g.a)(y.a.mark((function e(t){var a,n,r,c;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=[],n=Object(p.a)(t),e.prev=2,c=y.a.mark((function e(){var t,n,c;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.value,n="/sc-api-gateway/acl/roles/".concat(t.id,"/authorities"),e.next=4,E.a.get(n).then((function(e){return{repr:t.repr,"permitted-modules":e.data.map((function(e){return e["module-name"]}))}})).catch((function(e){return console.log(e)}));case 4:c=e.sent,a=[].concat(Object(f.a)(a),[c]);case 6:case"end":return e.stop()}}),e)})),n.s();case 5:if((r=n.n()).done){e.next=9;break}return e.delegateYield(c(),"t0",7);case 7:e.next=5;break;case 9:e.next=14;break;case 11:e.prev=11,e.t1=e.catch(2),n.e(e.t1);case 14:return e.prev=14,n.f(),e.finish(14);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,null,[[2,11,14,17]])})));return function(t){return e.apply(this,arguments)}}()),w=Object(l.b)("admin/postRoleModules",function(){var e=Object(g.a)(y.a.mark((function e(t){var a,n,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],n={},r=[],t.arr.forEach((function(e){t.row["permitted-modules"].includes(e.value)&&(a=[].concat(Object(f.a)(a),[e.id]),r=[].concat(Object(f.a)(r),[e.value]))})),n=Object(m.a)({},t.row,{"permitted-modules":a}),e.next=7,E.a.post("/sc-api-gateway/acl/roles",n).then((function(e){return e.data}));case 7:return console.log(n,Object(m.a)({},t.row,{"permitted-modules":r})),e.abrupt("return",Object(m.a)({},t.row,{"permitted-modules":r}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),x=Object(l.c)({name:"admin",initialState:{data:[],status:"idle",error:null,auth:{data:{},status:"idle",error:""},roles:{data:[],status:"idle",error:""},modules:{data:[],status:"idle",error:""},role_modules:{data:[],status:"idle",error:""}},reducers:{resetRoles:function(e){e.roles.status="idle",e.roles.data=[]},resetModules:function(e){e.modules.status="idle",e.modules.data=[]},resetRoleModules:function(e){e.role_modules.status="idle",e.role_modules.data=[]}},extraReducers:(n={},Object(d.a)(n,O.pending,(function(e,t){e.roles.status="loading"})),Object(d.a)(n,O.fulfilled,(function(e,t){e.roles.status="success",e.roles.data=t.payload})),Object(d.a)(n,O.failed,(function(e,t){e.roles.status="failed",e.roles.error=t.payload})),Object(d.a)(n,v.pending,(function(e,t){e.auth.status="loading"})),Object(d.a)(n,v.fulfilled,(function(e,t){e.auth.status="success",e.auth.data=t.payload})),Object(d.a)(n,v.failed,(function(e,t){e.modules.status="failed",e.modules.error=t.payload})),Object(d.a)(n,j.pending,(function(e,t){e.modules.status="loading"})),Object(d.a)(n,j.fulfilled,(function(e,t){e.modules.status="success",e.modules.data=t.payload})),Object(d.a)(n,j.failed,(function(e,t){e.modules.status="failed",e.modules.error=t.payload})),Object(d.a)(n,k.pending,(function(e,t){e.role_modules.status="loading"})),Object(d.a)(n,k.fulfilled,(function(e,t){e.role_modules.status="success",e.role_modules.data=t.payload})),Object(d.a)(n,k.failed,(function(e,t){e.role_modules.status="failed",e.role_modules.error=t.payload})),Object(d.a)(n,w.pending,(function(e,t){e.role_modules.status="loading"})),Object(d.a)(n,w.fulfilled,(function(e,t){console.log(t.payload),e.role_modules.status="success",e.role_modules.data=[t.payload].concat(Object(f.a)(e.role_modules.data))})),Object(d.a)(n,w.failed,(function(e,t){e.role_modules.status="failed",e.role_modules.error=t.payload})),n)}),I=x.actions,C=I.resetRoles,_=I.resetModules,F=I.resetRoleModules,D=x.reducer,S=(a(265),a(50)),N=a(110),M=a(9),Y=a(78),T=a(47),R=a(449),V=a(450),L=a(451),A=a(452),B=Y.a.SubMenu,P=function(e){var t=e.width,a=Object(r.useState)({collapsed:!1,btnheight:50}),n=Object(M.a)(a,2),i=n[0],o=n[1];Object(r.useEffect)((function(){t<600&&o((function(e){return Object(m.a)({},e,{disabled:!0,collapsed:!1})}))}),[t]);var l=Object(r.useMemo)((function(){return q.map((function(e,t){return c.a.createElement(B,{key:e.submenu,icon:t%2===0?c.a.createElement(R.a,null):c.a.createElement(V.a,null),title:e.submenu,className:"SideNavMenu_style_sub_menu"},e.menuitems.map((function(e){return c.a.createElement(Y.a.Item,{key:e,icon:c.a.createElement(L.a,null),className:"SideNavMenu_style_menu_item"},c.a.createElement(u.b,{to:"".concat(e)},e))})))}))}),[]);return c.a.createElement("div",{style:{width:t<600?"100%":i.collapsed?80:350},className:"SideNavMenu_style"},c.a.createElement(T.a,{type:"primary",onClick:function(){o((function(e){return Object(m.a)({},e,{collapsed:!e.collapsed})}))},style:{height:i.btnheight,width:"100%"},className:"SideNavMenu_style_button"},t>600&&i.collapsed?c.a.createElement(A.a,null):"\u041f\u0430\u043d\u0435\u043b\u044c \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u0430"),c.a.createElement(Y.a,{defaultSelectedKeys:["1"],defaultOpenKeys:["sub1"],mode:"inline",inlineCollapsed:!(t<600)&&i.collapsed,style:{height:"100%"}},l))},q=[{submenu:"\u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043c\u0430\u0441\u0442\u0435\u0440-\u0434\u0430\u043d\u043d\u044b\u043c\u0438",menuitems:["\u0421\u043f\u0440\u0430\u0432\u043e\u0447\u043d\u0438\u043a\u0438","\u0410\u043d\u0430\u043b\u0438\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0438\u043d\u0434\u0438\u043a\u0430\u0442\u043e\u0440\u044b","\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u0438 \u0438\u043d\u0434\u0438\u043a\u0430\u0442\u043e\u0440\u043e\u0432","\u041a\u0430\u0440\u0442\u0430 \u0440\u0435\u043c\u043e\u043d\u0442\u043d\u044b\u0445 \u0440\u0430\u0431\u043e\u0442"]},{submenu:"\u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f\u043c\u0438",menuitems:["\u0420\u043e\u043b\u0438","\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438"]}],z=a(453),W=function(e){var t=e.children;return c.a.createElement("div",{style:{width:"100%",height:"100%"},className:"MainContent_style"},c.a.createElement("div",{className:"header header-user-wrapper MainContent_style_header"},c.a.createElement("div",{className:"MainContent_style_href"}),c.a.createElement("div",{className:"MainContent_style_header"},c.a.createElement(z.a,{style:{marginRight:"1rem"}}),c.a.createElement("span",{style:{margin:"0 1rem"},className:"MainContent_style_header_fio"},"\u0424\u0418\u041e/\u041e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u044f"),c.a.createElement(T.a,{className:"MainContent_style_header_btn"},"\u0412\u044b\u0439\u0442\u0438"))),c.a.createElement("div",{className:"main-content-wrapper MainContent_style_body"},t))},U=function(e){var t=e.children,a=Object(r.useState)(window.innerWidth),n=Object(M.a)(a,2),i=n[0],o=n[1];return Object(r.useEffect)((function(){var e=function(){o(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),c.a.createElement("div",{className:"App Admin_main_style",style:{display:i<600?"block":"flex"}},c.a.createElement(P,{width:i}),c.a.createElement(W,null,c.a.createElement("div",{style:{width:"100%",margin:"20px auto",padding:5},className:"Admin_main_style_content"},t)))},J=function(e){var t=e.component,a=Object(N.a)(e,["component"]),n=Object(s.c)((function(e){return e.admin})).auth;return c.a.createElement(S.b,Object.assign({},a,{render:function(e){return Object.keys(n.data).length>0?c.a.createElement(U,null,c.a.createElement(t,null)):c.a.createElement(S.a,{to:{pathname:"/\u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f",state:{from:e.location}}})}}))},H=function(e){var t=Object(s.b)(),a=Object(s.c)((function(e){return e.admin})).auth;return Object(r.useEffect)((function(){t(v())}),[t]),a.data&&a.data.username?c.a.createElement(S.b,{render:function(){return c.a.createElement(S.a,{exact:!0,to:"/\u041a\u0430\u0440\u0442\u0430 \u0440\u0435\u043c\u043e\u043d\u0442\u043d\u044b\u0445 \u0440\u0430\u0431\u043e\u0442",from:"/\u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f"})}}):""},G=a(120),K=a(436),Q=a(441),X=a(448),Z=a(434),$=a(435),ee=a(454),te=a(455),ae=a(456),ne=a(457),re=a(235),ce=a(447),ie=function(e){var t=e.editing,a=e.dataIndex,n=e.placeholder,r=e.title,i=e.data,o=e.inputType,l=(e.record,e.index,e.children),s=Object(N.a)(e,["editing","dataIndex","placeholder","title","data","inputType","record","index","children"]),u=G.a.Option,d=function(e){switch(e){case"select":return c.a.createElement(G.a,{placeholder:n,allowClear:!0},i.map((function(e){return c.a.createElement(u,{key:"".concat(e,"- ").concat(n),value:e},e)})));case"multi-select":return c.a.createElement(G.a,{placeholder:"\u041c\u043e\u0434\u0443\u043b\u0438",mode:"multiple",tagRender:function(e){var t=e.label,a=e.closable,n=e.onClose;return c.a.createElement(re.a,{closable:a,onClose:n,style:{marginRight:3}},t)},style:{width:"100%",marginBottom:15},options:i});case"number":return c.a.createElement(ce.a,{min:0,max:100,formatter:function(e){return"".concat(e,"%")},parser:function(e){return e.replace("%","")}});default:return c.a.createElement(Q.a,{className:"Edit_input_style",placeholder:n,allowClear:!0})}}(o);return c.a.createElement("td",s,t?c.a.createElement(K.a.Item,{name:a,style:{margin:0},rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 ".concat(r,"!")}]},d):l)},oe=function(e){var t=K.a.useForm(),a=Object(M.a)(t,1)[0],n=Object(r.useState)(""),i=Object(M.a)(n,2),o=i[0],l=i[1],s=[].concat(Object(f.a)(e.columns),[{title:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0435",dataIndex:"",width:"5%",align:"center",key:"x",render:function(e,t){return u(t)?c.a.createElement("span",null,c.a.createElement("a",{onClick:function(){return b(t.key)},style:{marginRight:8}},c.a.createElement(ee.a,{className:"icon_edit_btn_style",title:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})),c.a.createElement(X.a,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043e\u043c\u0435\u043d\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f?",onConfirm:p},c.a.createElement(te.a,{className:"icon_edit_btn_style",title:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}))):c.a.createElement(Z.a,null,c.a.createElement("a",{disabled:""!==o,onClick:function(){return d(t,a,l)}},c.a.createElement(ae.a,{className:"icon_edit_btn_style",title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})),c.a.createElement(X.a,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0434\u0430\u043d\u044b\u043d\u0435?",onConfirm:function(){return h(t)}},c.a.createElement(ne.a,{className:"icon_edit_btn_style",title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})))}}]),u=function(e){return e.key===o},d=function(e){a.setFieldsValue(Object(m.a)({},e)),l(e.key)},p=function(){l("")},b=function(){var t=Object(g.a)(y.a.mark((function t(n){var r,c,i,o;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,a.validateFields();case 3:r=t.sent,c=Object(f.a)(e.data),i=c.findIndex((function(e){return n===e.key})),o=c[i],e.handleEdit(Object(m.a)({},o,{},r)),l(""),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.log("Validate Failed:",t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}(),h=function(){var t=Object(g.a)(y.a.mark((function t(a){var n;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{n=Object(f.a)(e.data),e.setData(n.filter((function(e){return e.key!==a.key}))),e.handleDelete(a)}catch(r){console.log("Validate Failed:",r)}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),E=s.map((function(e){return e.editable?Object(m.a)({},e,{onCell:function(t){return{record:t,inputType:e.type,dataIndex:e.dataIndex,title:e.title,data:e.data,placeholder:e.placeholder,editing:u(t)}}}):e}));return c.a.createElement(K.a,{form:a,component:!1},c.a.createElement($.a,{components:{body:{cell:ie}},bordered:!0,dataSource:e.data,columns:E,rowClassName:"editable-row",pagination:{onChange:p},loading:e.loading}))},le=a(214),se=a(215),ue=a(232),de=a(236),me=a(443),fe=a(439),pe=a(458),be=a(459);function ye(e,t){var a=new FileReader;a.addEventListener("load",(function(){return t(a.result)})),a.readAsDataURL(e)}function ge(e){var t="image/jpeg"===e.type||"image/png"===e.type;t||me.a.error("\u041c\u043e\u0436\u043d\u043e \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e JPG/PNG \u0444\u043e\u0440\u043c\u0430\u0442\u0430 \u0444\u0430\u0439\u043b!");var a=e.size/1024/1024<2;return a||me.a.error("\u041a\u0430\u0440\u0442\u0438\u043d\u043a\u0430 \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u043c\u0435\u043d\u044c\u0448\u0435 2MB!"),t&&a}var he,Ee=function(e){Object(de.a)(a,e);var t=Object(ue.a)(a);function a(){var e;Object(le.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={loading:!1},e.handleChange=function(t){"uploading"!==t.file.status?"done"===t.file.status&&ye(t.file.originFileObj,(function(t){return e.setState({imageUrl:t,loading:!1})})):e.setState({loading:!0})},e}return Object(se.a)(a,[{key:"render",value:function(){var e=c.a.createElement("div",null,this.state.loading?c.a.createElement(pe.a,null):c.a.createElement(be.a,null)),t=this.state.imageUrl;return c.a.createElement(fe.a,{name:"avatar",listType:"picture-card",className:"avatar-uploader",action:t,showUploadList:!1,beforeUpload:ge,onChange:this.handleChange},t?c.a.createElement("img",{src:t,alt:"avatar",style:{width:"100%"}}):e)}}]),a}(c.a.Component),ve=Object(S.g)((function(){var e=Object(r.useState)([{key:"0","\u2116":1,"\u0424\u0418\u041e":"John Cena","\u041e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u044f":"WWE membership","\u0420\u043e\u043b\u044c":"\u0421\u0443\u043f\u0435\u0440\u0430\u0434\u043c\u0438\u043d","\u041b\u043e\u0433\u0438\u043d":"johncena","\u041f\u0430\u0440\u043e\u043b\u044c":"supremexxx","\u0424\u043e\u0442\u043e":"\u0444\u043e\u0442\u043e1"},{key:"1","\u2116":2,"\u0424\u0418\u041e":"John Snow","\u041e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u044f":"Bastards","\u0420\u043e\u043b\u044c":"\u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440","\u041b\u043e\u0433\u0438\u043d":"bastardsnow","\u041f\u0430\u0440\u043e\u043b\u044c":"myloveDaenerys","\u0424\u043e\u0442\u043e":"\u0444\u043e\u0442\u043e2"}]),t=Object(M.a)(e,2),a=t[0],n=t[1];return c.a.createElement(c.a.Fragment,null,c.a.createElement(Oe,{setData:n,data:a}),c.a.createElement(oe,{columns:we,data:a,setData:n}))})),Oe=function(e){e.data;var t=e.setData,a=G.a.Option,n=K.a.useForm(),r=Object(M.a)(n,1)[0],i=function(){var e=Object(g.a)(y.a.mark((function e(){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.validateFields();case 3:a=e.sent,t((function(e){return[].concat(Object(f.a)(e),[{key:"".concat(a.role,"-").concat(e.length+1),"\u2116":e.length+1,"\u0424\u0418\u041e":a.name,"\u041e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u044f":a.organization,"\u0420\u043e\u043b\u044c":a.role,"\u041b\u043e\u0433\u0438\u043d":a.username,"\u041f\u0430\u0440\u043e\u043b\u044c":a.pwd,"\u0424\u043e\u0442\u043e":a.avatar}])})),r.resetFields(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return c.a.createElement("div",null,c.a.createElement(K.a,{form:r,className:"admin-controller Roles_block_style",onFinish:i,onFinishFailed:function(e){console.log("Failed:",e)}},c.a.createElement(K.a.Item,{className:"Roles_block_style",name:"name",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f!"}]},c.a.createElement(Q.a,{placeholder:"\u0424\u0418\u041e"})),c.a.createElement(K.a.Item,{name:"organization",rules:[{required:!0,message:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u0438!"}]},c.a.createElement(G.a,{placeholder:"\u041e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u044f",allowClear:!0},ke.map((function(e){return c.a.createElement(a,{key:e,value:e},e)})))),c.a.createElement(K.a.Item,{name:"role",rules:[{required:!0,message:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0440\u043e\u043b\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f!"}]},c.a.createElement(G.a,{placeholder:"\u0420\u043e\u043b\u0438",allowClear:!0},je.map((function(e){return c.a.createElement(a,{key:e,value:e},e)})))),c.a.createElement(K.a.Item,{name:"username"},c.a.createElement(Q.a,{placeholder:"\u041b\u043e\u0433\u0438\u043d",type:"email"})),c.a.createElement(K.a.Item,{name:"pwd",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f!"}]},c.a.createElement(Q.a,{placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",type:"password",className:"password_style_user"})),c.a.createElement(K.a.Item,{name:"avatar"},c.a.createElement(Ee,null)),c.a.createElement(K.a.Item,null,c.a.createElement(T.a,{type:"primary",htmlType:"submit",className:"standard_btn_admin"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"))))},je=["\u0421\u0443\u043f\u0435\u0440\u0430\u0434\u043c\u0438\u043d","\u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440","\u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440 \u0438\u043d\u0434\u0438\u043a\u0430\u0442\u043e\u0440\u043e\u0432","\u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440 \u043a\u0430\u0440\u0442\u044b \u0440\u0435\u043c\u043e\u043d\u0442\u043d\u044b\u0445 \u0434\u043e\u0440\u043e\u0433"],ke=["\u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u044f 1","\u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u044f 2","\u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u044f 3"],we=[{title:"\u2116",dataIndex:"\u2116"},{title:"\u0424\u0418\u041e",dataIndex:"\u0424\u0418\u041e",editable:!0},{title:"\u041e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u044f",dataIndex:"\u041e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u044f",type:"select",placeholder:"\u041e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u0438",data:ke,editable:!0},{title:"\u0420\u043e\u043b\u044c",dataIndex:"\u0420\u043e\u043b\u044c",type:"select",placeholder:"\u0420\u043e\u043b\u0438",data:je,editable:!0},{title:"\u041b\u043e\u0433\u0438\u043d",dataIndex:"\u041b\u043e\u0433\u0438\u043d"},{title:"\u041f\u0430\u0440\u043e\u043b\u044c",dataIndex:"\u041f\u0430\u0440\u043e\u043b\u044c",editable:!0},{title:"\u0424\u043e\u0442\u043e",dataIndex:"\u0424\u043e\u0442\u043e",editable:!0}],xe=function(e){return[{title:"\u0420\u043e\u043b\u044c",dataIndex:"repr",width:"30%",editable:!0,placeholder:"\u0420\u043e\u043b\u0438"},{title:"\u041c\u043e\u0434\u0443\u043b\u0438",dataIndex:"permitted-modules",type:"multi-select",editable:!0,data:e,render:function(e){return c.a.createElement("span",null,e.map((function(e){var t=e.length>5?"geekblue":"blue";return c.a.createElement(re.a,{color:t,key:e,style:{margin:"5px 5px"}},e.toUpperCase())})))}}]},Ie=Object(S.g)((function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.admin})),a=t.modules,n=t.roles,i=t.role_modules,o=Object(r.useState)([]),l=Object(M.a)(o,2),u=l[0],d=l[1];Object(r.useEffect)((function(){return e(O()),e(j()),function(){e(C()),e(_())}}),[e]),Object(r.useEffect)((function(){return"success"===n.status&&e(k(n.data)),function(){return e(F())}}),[n,e]),Object(r.useEffect)((function(){"success"===i.status&&d(function(e){return e.map((function(e,t){return{key:t,repr:e.repr,"permitted-modules":e["permitted-modules"]}}))}(i.data))}),[i]);var m=Object(r.useMemo)((function(){return a.data.map((function(e){return{value:e.name,id:e.id}}))}),[a]);return c.a.createElement(c.a.Fragment,null,c.a.createElement(Ce,{options:m,dispatch:e}),c.a.createElement(oe,{columns:xe(m),data:u,setData:d,loading:"success"!==i.status}))})),Ce=function(e){var t=e.options,a=e.dispatch,n=K.a.useForm(),r=Object(M.a)(n,1)[0],i=function(){var e=Object(g.a)(y.a.mark((function e(){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.validateFields();case 3:n=e.sent,a(w({row:n,arr:t})),r.resetFields(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return c.a.createElement(K.a,{form:r,className:" Roles_create",onFinish:i,onFinishFailed:function(e){console.log("Failed:",e)}},c.a.createElement(K.a.Item,{name:"repr",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0440\u043e\u043b\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f!"}]},c.a.createElement(Q.a,{placeholder:"\u0420\u043e\u043b\u0438",allowClear:!0,style:{width:"60%"}})),c.a.createElement(K.a.Item,{name:"permitted-modules",rules:[{required:!0,message:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043c\u043e\u0434\u0443\u043b\u0438 \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f!"}]},c.a.createElement(G.a,{placeholder:"\u041c\u043e\u0434\u0443\u043b\u0438",mode:"multiple",tagRender:_e,style:{width:"60%"},options:t})),c.a.createElement(K.a.Item,null,c.a.createElement(T.a,{type:"primary",htmlType:"submit",className:"standard_btn_admin"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c")))};function _e(e){var t=e.label,a=e.closable,n=e.onClose;return c.a.createElement(re.a,{closable:a,onClose:n,style:{marginRight:3}},t)}var Fe="/sc-roadworks/api/roadworks",De=Object(l.b)("roadmap/fetchOrganizations",Object(g.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.get("/sc-roadworks/api/organisations");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))),Se=Object(l.b)("roadmap/fetchRegions",Object(g.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.get("/sc-roadworks/api/regions");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))),Ne=Object(l.b)("roadmap/fetchCategories",Object(g.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.get("/sc-roadworks/api/categories");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))),Me=Object(l.b)("roadmap/fetchRoadMap",Object(g.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.get(Fe);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))),Ye=Object(l.b)("roadmap/fetchIntersections",Object(g.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.get("/sc-roadworks/api/intersections");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))),Te=Object(l.b)("roadmap/postRoadMap",function(){var e=Object(g.a)(y.a.mark((function e(t){var a,n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.post(Fe,t.data);case 2:return a=e.sent,e.next=5,E.a.post("/sc-roadworks/api/roadworks/".concat(a.data,"/geometries"),{geometries:t.geometries});case 5:return n=t.mapData.map((function(e){return"polyline"===e.type?e.coordinates:e.coordinates[0]})),e.abrupt("return",{data:JSON.parse(a.config.data),id:a.data,geometries:{type:"polygon",coordinates:n}});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Re=Object(l.b)("roadmap/postIntersections",function(){var e=Object(g.a)(y.a.mark((function e(t){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.post("/sc-roadworks/api/custom-intersections",t);case 2:return a=e.sent,console.log(a),e.abrupt("return",JSON.parse(a.config.data));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Ve=Object(l.b)("roadmap/putRoadMap",function(){var e=Object(g.a)(y.a.mark((function e(t){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.reedit){e.next=11;break}return e.next=3,E.a.put("".concat(Fe,"/").concat(t.id),Object(m.a)({},t.data.data,{"status-form":t.data.data.status}));case 3:return e.next=5,E.a.delete("/sc-roadworks/api/roadworks/".concat(t.id,"/geometries"));case 5:return e.next=7,E.a.post("/sc-roadworks/api/roadworks/".concat(t.id,"/geometries"),{geometries:t.data.geometries});case 7:return a=t.mapData.map((function(e){return"polyline"===e.type?e.coordinates:e.coordinates[0]})),e.abrupt("return",{reedit:t.reedit,data:t.data.data,id:t.id,geometries:{type:"polygon",coordinates:a}});case 11:return e.next=13,E.a.put("".concat(Fe,"/").concat(t.id),{"status-form":t.data});case 13:return e.abrupt("return",t);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Le=Object(l.b)("roadmap/deleteRoadMap",function(){var e=Object(g.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.delete("".concat(Fe,"/").concat(t));case 2:return e.abrupt("return",{id:t});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Ae=Object(l.c)({name:"roadmap",initialState:{organisations:{status:"idle",data:[],error:null},regions:{status:"idle",data:[],error:null},categories:{status:"idle",data:[],error:null},data:[],status:"idle",error:null,formData:{},current:0,mapData:[],crossListMapData:[],editedId:null,deletedId:null,editedIntersectionId:null,deletedIntersectionId:null,intersections:{status:"idle",error:null,data:[]}},reducers:{formValidate:function(e,t){e.formData=Object(m.a)({},e.formData,{},t.payload)},setCurrent:function(e,t){e.current=t.payload},setMapData:function(e,t){e.mapData=[].concat(Object(f.a)(e.mapData),Object(f.a)(t.payload))},setCrossListMapData:function(e,t){e.crossListMapData=[].concat(Object(f.a)(e.crossListMapData),Object(f.a)(t.payload))},resetMapData:function(e){e.mapData=[]},resetCrossListMapData:function(e){e.crossListMapData=[]},resetData:function(e){e.data=[],e.status="idle"},resetFormData:function(e){e.formData={}},resetIntersectionsData:function(e){e.intersections.data=[],e.intersections.status="idle"},setEditedId:function(e){e.editedId=null},setDeletedId:function(e){e.deletedId=null}},extraReducers:(he={},Object(d.a)(he,De.fulfilled,(function(e,t){e.organisations.status="success",e.organisations.data=t.payload})),Object(d.a)(he,De.pending,(function(e,t){e.organisations.status="loading"})),Object(d.a)(he,De.rejected,(function(e,t){e.organisations.status="failed",e.organisations.error=t.payload})),Object(d.a)(he,Se.fulfilled,(function(e,t){e.regions.status="success",e.regions.data=t.payload})),Object(d.a)(he,Se.pending,(function(e,t){e.regions.status="loading"})),Object(d.a)(he,Se.rejected,(function(e,t){e.regions.status="failed",e.regions.error=t.payload})),Object(d.a)(he,Ne.fulfilled,(function(e,t){e.categories.status="success",e.categories.data=t.payload})),Object(d.a)(he,Ne.pending,(function(e,t){e.categories.status="loading"})),Object(d.a)(he,Ne.rejected,(function(e,t){e.categories.status="failed",e.categories.error=t.payload})),Object(d.a)(he,Me.fulfilled,(function(e,t){e.status="success",e.data=t.payload})),Object(d.a)(he,Me.pending,(function(e,t){e.status="loading"})),Object(d.a)(he,Me.rejected,(function(e,t){e.status="failed",e.error=t.payload})),Object(d.a)(he,Ye.fulfilled,(function(e,t){e.intersections.status="success",e.intersections.data=t.payload})),Object(d.a)(he,Ye.pending,(function(e,t){e.intersections.status="loading"})),Object(d.a)(he,Ye.rejected,(function(e,t){e.intersections.status="failed",e.intersections.error=t.payload})),Object(d.a)(he,Te.pending,(function(e){e.status="loading"})),Object(d.a)(he,Te.fulfilled,(function(e,t){e.status="success";var a=t.payload.data,n=t.payload.id,r=t.payload.geometries,c=e.categories.data.find((function(e){return e.id===t.payload.data.category})).name,i=e.regions.data.find((function(e){return e.id===t.payload.data.region})).name,o=e.organisations.data.find((function(e){return e.id===t.payload.data.organisation})).name;a=Object(m.a)({},a,{category:c,region:i,organisation:o,id:n,geometries:r}),e.data=[a].concat(Object(f.a)(e.data))})),Object(d.a)(he,Re.pending,(function(e,t){e.intersections.status="loading"})),Object(d.a)(he,Re.succes,(function(e,t){e.intersections.status="success",e.intersections.data=[t.payload].concat(Object(f.a)(e.intersections.data))})),Object(d.a)(he,Ve.pending,(function(e,t){e.status="loading"})),Object(d.a)(he,Ve.fulfilled,(function(e,t){e.status="success";var a=e.data.findIndex((function(e){return e.id===t.payload.id}));if(e.editedId=t.payload.id,t.payload.reedit){console.log(t.payload,t.payload.data);var n=e.categories.data.find((function(e){return e.id===t.payload.data.category})).name,r=e.regions.data.find((function(e){return e.id===t.payload.data.region})).name,c=e.organisations.data.find((function(e){return e.id===t.payload.data.organisation})).name;e.data[a]=Object(m.a)({},t.payload.data,{category:n,region:r,organisation:c,id:t.payload.id}),e.data[a].geometries=t.payload.geometries}else e.data[a].status=Object(m.a)({},e.data[a].status,{},t.payload.data)})),Object(d.a)(he,Le.pending,(function(e){e.status="loading"})),Object(d.a)(he,Le.fulfilled,(function(e,t){e.status="success",e.data=e.data.filter((function(e){return e.id!==t.payload.id})),e.deletedId=t.payload.id})),he)}),Be=Ae.actions,Pe=Be.formValidate,qe=Be.setCurrent,ze=Be.setMapData,We=Be.setCrossListMapData,Ue=(Be.setIntersection,Be.resetFormData),Je=Be.setEditedId,He=Be.setDeletedId,Ge=Be.resetCrossListMapData,Ke=Be.resetMapData,Qe=(Be.resetData,Be.resetIntersectionsData,Ae.reducer),Xe=a(445),Ze=a(84),$e=a(222),et=a(221),tt=function(e){return e.map((function(e,t){switch(e.type){case"placemark":return c.a.createElement(Ze.b,{key:t,geometry:e.coordinates});case"polyline":return c.a.createElement(Ze.d,{key:t,geometry:e.coordinates,options:{fillColor:"#00FF00",strokeColor:"#0000FF",strokeWidth:5}});case"polygon":return c.a.createElement(Ze.c,{key:t,geometry:e.coordinates,options:{editorDrawingCursor:"crosshair",editorMaxPoints:5,fillColor:"#00FF00",strokeColor:"#0000FF",strokeWidth:5}});default:return null}}))},at={center:[43.238949,76.889709],zoom:10},nt=function(){var e=Object(s.c)((function(e){return e.roadmap})),t=e.current,a=e.mapData,n=e.crossListMapData,i=Object(s.b)(),o=Object(r.useState)(""),l=Object(M.a)(o,2),u=l[0],d=l[1],f=Object(r.useState)([]),p=Object(M.a)(f,2),b=p[0],h=p[1],E=function(e){var t=Object(r.useRef)();return Object(r.useEffect)((function(){t.current=e})),t.current}({active:u,polygons:b});Object(r.useEffect)((function(){E&&E.active!==u&&b.length>0&&E.polygons===b&&(i(ze(b)),h([]))}),[u,b,E]);var v=Object(r.useMemo)((function(){return function(e,t){var a={editorDrawingCursor:"crosshair",fillColor:"#00FF00",strokeColor:"#0000FF",strokeWidth:5};return"polygon"===e?c.a.createElement(Ze.c,{instanceRef:function(a){return a&&t(a,e)},geometry:[],options:Object(m.a)({},a)}):"polyline"===e?c.a.createElement(Ze.d,{instanceRef:function(a){return a&&t(a,e)},geometry:[],options:a}):null}(u,function(){var e=Object(g.a)(y.a.mark((function e(t,a){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.editor.startDrawing(),t.geometry.events.add("change",(function(e){h((function(t){return[{type:a,coordinates:e.originalEvent.newCoordinates}]}))})),t.editor.events.add("onchange",(function(e){t.startDrawing()})),t.editor.events.add("drawingstop",(function(e){t.editor.stopDrawing(),d("")}));case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}())}),[u]),O=Object(r.useMemo)((function(){return n.length>0?tt(n):tt(a)}),[a,n]);return c.a.createElement(c.a.Fragment,null,0===t&&c.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end",alignItems:"center",marginBottom:10}},function(e,t){return c.a.createElement("div",null,c.a.createElement(T.a,{type:"polyline"===e&&"primary",onClick:function(){return t("polyline"===e?"":"polyline")},icon:c.a.createElement(et.a,null)}),c.a.createElement(T.a,{type:"polygon"===e&&"primary",style:{margin:"0 10px"},icon:c.a.createElement($e.a,null),onClick:function(){return t("polygon"===e?"":"polygon")}}))}(u,d),c.a.createElement(T.a,{onClick:function(){i(Ke())}},"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u043a\u0430\u0440\u0442\u0443")),c.a.createElement(Ze.e,{style:{minWidth:"100%"}},c.a.createElement(Ze.a,{width:"100%",height:"calc(100% - 50px)",style:{minHeight:"500px",minWidth:"100%"},defaultState:at,modules:["geoObject.addon.editor"]},0===t&&v,O)))},rt=Xe.a.Step,ct=function(e){var t=e.steps,a=e.dispatch,n=e.current,i=e.setCurrent,o=e.formValidate,l=e.form,s=e.callback;Object(r.useEffect)((function(){l.resetFields()}),[l]);var u=function(){var e=Object(g.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.validateFields();case 3:((t=e.sent)["end-date"]||t["start-date"])&&(t["end-date"]=t["end-date"]._i,t["start-date"]=t["start-date"]._i),a(o(t)),a(i(n+1)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return c.a.createElement("div",{style:{width:"100%"}},c.a.createElement(Xe.a,{current:n,size:"small"},t.map((function(e){return c.a.createElement(rt,{key:e.title,title:e.title})}))),c.a.createElement("div",{className:"steps-content"},c.a.createElement(K.a,{form:l,name:"roadwork-form"},c.a.createElement("div",{style:{width:"100%",display:"flex"}},c.a.createElement("div",{style:{width:"50%"}},t[n].content),c.a.createElement("div",{style:{width:"50%",paddingLeft:10}},c.a.createElement(nt,null))))),c.a.createElement("div",{className:"steps-action"},n>0&&c.a.createElement(T.a,{style:{margin:"0 8px"},onClick:function(){a(i((function(e){return e-1}))),a(i(n-1))}},"\u041d\u0430\u0437\u0430\u0434"),n<t.length-1&&c.a.createElement(T.a,{type:"primary",onClick:u},"\u0414\u0430\u043b\u0435\u0435"),3===n&&c.a.createElement(T.a,{key:"submit",type:"primary",onClick:function(){return s()}},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c")))},it=a(172),ot=function(e){var t=e.tabs,a=it.a.TabPane;return c.a.createElement("div",{className:"card-container"},t?c.a.createElement(it.a,{type:"card",className:"tabs"},t.map((function(e,t){return c.a.createElement(a,{tab:e.title,key:t},e.child)}))):"no tabs data to render")},lt=a(440),st=a(65),ut=a.n(st),dt=a(121),mt=a(437),ft=a(460),pt=Q.a.TextArea,bt=G.a.Option,yt=function(e,t,a){return c.a.createElement(K.a.Item,null,c.a.createElement(K.a.Item,{name:e,valuePropName:"value",hidden:"area"!==e&&!a,getValueFromEvent:function(e){return e.target.value}},c.a.createElement(pt,{style:{height:70},placeholder:t,allowClear:!0})))},gt=function(e,t,a,n){var r=e?c.a.createElement(mt.a,{placeholder:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0433\u043e\u0434",allowClear:!1,picker:"year",format:"YYYY"}):c.a.createElement(mt.a,{placeholder:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0434\u0430\u0442\u0443",allowClear:!1});return c.a.createElement(K.a.Item,{label:n},c.a.createElement(Q.a.Group,{compact:!0},c.a.createElement(K.a.Item,{name:a,rules:[{required:!0,message:"\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u043f\u043e\u043b\u0435"}],getValueFromEvent:function(e,t){return ut()(t,"YYYY-MM-DD")}},r),c.a.createElement(K.a.Item,{name:"is-".concat(a),style:{marginLeft:10},valuePropName:"checked",getValueFromEvent:function(e){return e.target.checked}},c.a.createElement(dt.a,{onChange:t},"\u0413\u043e\u0434"))))},ht={name:"file",action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",listType:"picture",headers:{authorization:"authorization-text"},onChange:function(e){"uploading"!==e.file.status&&console.log(e.file,e.fileList),"done"===e.file.status?me.a.success("".concat(e.file.name," \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d")):"error"===e.file.status&&me.a.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0444\u0430\u0439\u043b\u0430 ".concat(e.file.name))}},Et=function(e){var t=e.organisations,a=e.regions,n=e.categories,i=e.form,o=Object(r.useState)(!1),l=Object(M.a)(o,2),s=l[0],u=l[1],d=Object(r.useState)(!1),m=Object(M.a)(d,2),f=m[0],p=m[1],b=Object(r.useState)(!1),y=Object(M.a)(b,2),g=y[0],h=y[1],E=Object(r.useState)(!1),v=Object(M.a)(E,2),O=v[0],j=v[1];Object(r.useEffect)((function(){return i.getFieldValue("is-canvas-opened")&&u(i.getFieldValue("is-canvas-opened")),i.getFieldValue("is-closured")&&p(i.getFieldValue("is-closured")),i.getFieldValue("is-start-date")&&h(!!i.getFieldValue("is-start-date")),i.getFieldValue("is-end-date")&&j(i.getFieldValue(!0)),function(){u(!1),p(!1)}}),[i]);return c.a.createElement(c.a.Fragment,null,function(e){var t=e.regions,a=e.organisations,n=e.categories,r=[{name:"category",placeholder:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u044f \u0440\u0430\u0431\u043e\u0442",options:"success"===n.status?n.data.map((function(e){return e.name})):[]},{name:"organisation",placeholder:"\u041e\u0442\u0432\u0435\u0442\u0441\u0432\u0435\u043d\u043d\u044b\u0439 \u043e\u0440\u0433\u0430\u043d",options:"success"===a.status?a.data.map((function(e){return e.name})):[]},{name:"region",placeholder:"\u0420\u0430\u0439\u043e\u043d",options:"success"===t.status?t.data.map((function(e){return e.name})):[]}];return c.a.createElement("div",null,r.map((function(e,t){return c.a.createElement(K.a.Item,{name:e.name,rules:[{required:!0,message:"\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u043f\u043e\u043b\u0435"}],key:"".concat(e.name).concat(t),hasFeedback:!0},c.a.createElement(G.a,{placeholder:e.placeholder,style:{width:300},allowClear:!0},e.options.map((function(e){return c.a.createElement(bt,{value:e,key:e},e)}))))})))}({regions:a,organisations:t,categories:n}),c.a.createElement(K.a.Item,{name:"address"},c.a.createElement(Q.a,{placeholder:"\u0410\u0434\u0440\u0435\u0441/\u0423\u043b\u0438\u0446\u0430"})),yt("area","\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0443\u0447\u0430\u0441\u0442\u043a\u0430",!0),c.a.createElement(K.a.Item,{name:"is-closured",noStyle:!0,valuePropName:"checked",getValueFromEvent:function(e){return e.target.checked}},c.a.createElement(dt.a,{onChange:function(){return p((function(e){return!e}))}},"\u041f\u0435\u0440\u0435\u043a\u0440\u044b\u0442\u0438\u0435 \u0443\u043b\u0438\u0446"," ")),yt("closure-description","\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043f\u0435\u0440\u0435\u043a\u0440\u044b\u0442\u0438\u044f",f),c.a.createElement(K.a.Item,{name:"is-canvas-opened",noStyle:!0,valuePropName:"checked"},c.a.createElement(dt.a,{onChange:function(){return u((function(e){return!e}))}},"\u0412\u0441\u043a\u0440\u044b\u0442\u0438\u0435 \u0434\u043e\u0440\u043e\u0436\u043d\u043e\u0433\u043e \u043f\u043e\u043b\u043e\u0442\u043d\u0430"," ")),yt("canvas-description","\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0432\u0441\u043a\u0440\u044b\u0442\u0438\u044f",s),gt(g,(function(e){return h(!!e.target.checked)}),"start-date","\u0414\u0430\u0442\u0430 \u043d\u0430\u0447\u0430\u043b\u0430"),gt(O,(function(e){return j(!!e.target.checked)}),"end-date","\u0414\u0430\u0442\u0430 \u043e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u044f"),c.a.createElement(K.a.Item,{name:"file-paths",valuePropName:"fileList"},c.a.createElement(fe.a,ht,c.a.createElement(T.a,{icon:c.a.createElement(ft.a,null)},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0440\u0438\u0441\u0443\u043d\u043e\u043a / \u043f\u0440\u0435\u0437\u0435\u043d\u0442\u0430\u0446\u0438\u044e"))))};var vt=a(225),Ot=a.n(vt),jt=(a(410),function(){var e=Object(r.useState)(),t=Object(M.a)(e,2),a=t[0],n=t[1];return c.a.createElement(c.a.Fragment,null,c.a.createElement(K.a.Item,{name:"lot-name"},c.a.createElement(Q.a,{placeholder:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430 (\u2116 \u043b\u043e\u0442\u0430)"})),c.a.createElement(K.a.Item,{name:"company-name"},c.a.createElement(Q.a,{placeholder:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438"})),c.a.createElement(K.a.Item,{name:"supervisor-name"},c.a.createElement(Q.a,{placeholder:"\u0424\u0418\u041e \u0440\u0443\u043a\u043e\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044f"})),c.a.createElement(K.a.Item,{name:"contacts"},c.a.createElement(Ot.a,{country:"kz",value:a,onChange:function(e){return n({phone:e})}})),c.a.createElement(K.a.Item,{name:"warranty-period"},c.a.createElement(Q.a,{placeholder:"\u0413\u0430\u0440\u0430\u043d\u0442\u0438\u0439\u043d\u044b\u0439 \u043f\u0435\u0440\u0438\u043e\u0434"})))}),kt=Q.a.TextArea,wt=function(){var e=Object(r.useState)(!0),t=Object(M.a)(e,2),a=(t[0],t[1]);return c.a.createElement(c.a.Fragment,null,c.a.createElement(K.a.Item,{name:"percentage",rules:[{required:!0,message:"\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u043f\u043e\u043b\u0435"}],label:"\u0421\u0442\u0430\u0442\u0443\u0441 \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f (%)"},c.a.createElement(ce.a,{style:{width:"120px"},min:0,max:100,formatter:function(e){return"".concat(e,"%")},parser:function(e){return e.replace("%","")}})),c.a.createElement(K.a.Item,{name:"commentary"},c.a.createElement(kt,{style:{height:90},placeholder:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"})),c.a.createElement(K.a.Item,{name:"is-hidden",valuePropName:"checked",getValueFromEvent:function(e){return e.target.checked}},c.a.createElement(dt.a,null," \u0421\u043a\u0440\u044b\u0442\u044c \u0440\u0430\u0431\u043e\u0442\u0443 \u0441 \u043a\u0430\u0440\u0442\u044b")),c.a.createElement(K.a.Item,{name:"is-canceled",valuePropName:"checked",getValueFromEvent:function(e){return e.target.checked},noStyle:!0},c.a.createElement(dt.a,{onChange:function(e){return e.target.checked?a(!1):a(!0)}},"\u0417\u0430\u043a\u0443\u043f \u0440\u0430\u0431\u043e\u0442 \u043e\u0442\u043c\u0435\u043d\u0435\u043d / \u043f\u0440\u0438\u043e\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d")))},xt=function(e){switch(e){case"area":return"\u0423\u0447\u0430\u0441\u0442\u043e\u043a";case"address":return"\u0410\u0434\u0440\u0435\u0441/\u0443\u043b\u0438\u0446\u0430";case"contractor":return"\u041f\u043e\u0434\u0440\u044f\u0434\u0447\u0438\u043a";case"category":return"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u044f \u0440\u0430\u0431\u043e\u0442";case"end-date":return"\u0414\u0430\u0442\u0430 \u043e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u044f";case"is-end-date":return"\u0414\u0430\u0442\u0430 \u043e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u044f \u043e\u0442\u043c\u0435\u0447\u0435\u043d\u043e";case"start-date":return"\u0414\u0430\u0442\u0430 \u043d\u0430\u0447\u0430\u043b\u0430";case"is-start-date":return"\u0414\u0430\u0442\u0430 \u043d\u0430\u0447\u0430\u043b\u043e \u043e\u0442\u043c\u0435\u0447\u0435\u043d\u043e";case"closure-description":return"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043f\u0435\u0440\u0435\u043a\u0440\u044b\u0442\u0438\u044f";case"is-closured":return"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043f\u0435\u0440\u0435\u043a\u0440\u044b\u0442\u0438\u044f \u043e\u0442\u043c\u0435\u0447\u0435\u043d\u043e";case"organisation":return"\u041e\u0442\u0432\u0435\u0442\u0441\u0432\u0435\u043d\u043d\u044b\u0439 \u043e\u0440\u0433\u0430\u043d";case"file-paths":return"\u0424\u0430\u0439\u043b";case"lot-name":return"\u041b\u043e\u0442";case"percentage":return"\u0421\u0442\u0430\u0442\u0443\u0441 \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f (%)";case"region":return"\u0420\u0430\u0439\u043e\u043d";case"supervisor-name":return"\u0424\u0418\u041e \u0440\u0443\u043a\u043e\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044f";case"contacts":return"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b";case"warranty-period":return"\u0413\u0430\u0440\u0430\u043d\u0442\u0438\u0439\u043d\u044b\u0439 \u043f\u0435\u0440\u0438\u043e\u0434";case"canvas-description":return"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0432\u0441\u043a\u0440\u044b\u0442\u0438\u044f";case"is-canvas-opened":return"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0432\u0441\u043a\u0440\u044b\u0442\u0438\u044f \u043e\u0442\u043c\u0435\u0447\u0435\u043d\u043e";case"company-name":return"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438";case"canceled-comment":return"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 \u0437\u0430\u043a\u0443\u043f\u0430 \u043e\u0442\u043c\u0435\u043d\u044b";case"percentage-comment":return"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 \u0441\u0442\u0430\u0442\u0443\u0441\u0430 %";case"is-hidden":return"\u0421\u0442\u0430\u0442\u0443\u0441 \u0441\u043a\u0440\u044b\u0442";case"is-canceled":return"\u0421\u0442\u0430\u0442\u0443\u0441 \u043f\u0440\u0438\u043e\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d";case"commentary":return"\u0421\u0442\u0430\u0442\u0443\u0441 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u044f";default:return e}},It=function(e){var t=[];return Object.keys(e).map((function(a){"undefined"!==typeof e[a]&&"object"!==typeof e[a]&&"is-start-date"!==a&&"is-end-date"!==a&&"key"!==a&&"id"!==a?t.push({name:a,value:e[a]}):void 0===e[a]&&"is"===a.split("-")[0]?t.push({name:a,value:!1}):void 0===e[a]&&t.push({name:a,value:null})})),t},Ct=function(e,t,a,n){var r,c={},i=!1,o=!1,l=null;return e.forEach((function(e){if("is-hidden"!==e.name||"is-canceled"!==e.name||"commentary"!==e.name||"percentage"!==e.name||"is-end-date"!==e.name||"is-start-date"!==e.name)if("percentage"===e.name&&(r=e.value),"is-canceled"===e.name&&(o=e.value),"is-hidden"===e.name&&(i=e.value),"commentary"===e.name&&(l=e.value),"end-date"===e.name||"start-date"===e.name)c=e.value.length>4?Object(m.a)({},c,Object(d.a)({},e.name,e.value)):Object(m.a)({},c,Object(d.a)({},e.name,"".concat(e.value,"-01-01")));else if("category"===e.name){var s=t.data.find((function(t){return t.name===e.value})).id;c=Object(m.a)({},c,Object(d.a)({},e.name,s))}else if("organisation"===e.name){var u=a.data.find((function(t){return t.name===e.value})).id;c=Object(m.a)({},c,Object(d.a)({},e.name,u))}else if("region"===e.name){var f=n.data.find((function(t){return t.name===e.value})).id;c=Object(m.a)({},c,Object(d.a)({},e.name,f))}else c=Object(m.a)({},c,Object(d.a)({},e.name,e.value))})),c=Object(m.a)({},c,{status:{percentage:r,"is-hidden":i,"is-canceled":o,commentary:l}})},_t=function(e){return e.map((function(e){return"polyline"===e.type?e.coordinates.map((function(e){return{y:e[1],x:e[0]}})):"polygon"===e.type?e.coordinates[0].map((function(e){return{y:e[1],x:e[0]}})):[{y:e.coordinates[1],x:e.coordinates[0]}]}))},Ft=function(e){var t=e.ob,a=Object(r.useMemo)((function(){var e=It(t);return e=e.filter((function(e){return"object"!==typeof e.value&&"boolean"!==typeof e.value}))}),[t]).map((function(e){return c.a.createElement(K.a.Item,{key:e.name,label:c.a.createElement("span",{style:{color:"#92B4A7"}},xt(e.name))},e.value)}));return c.a.createElement(c.a.Fragment,null,a)},Dt=function(e){var t=e.form,a=e.callback,n=e.record,i=Object(s.c)((function(e){return e.roadmap})),o=i.current,l=i.organisations,u=i.regions,d=i.categories,f=i.formData,p=Object(s.b)(),b=St(l,u,d,f,t,p);return Object(r.useEffect)((function(){n&&t.setFieldsValue(Object(m.a)({},n,{"start-date":ut()(n["start-date"],"YYYY/MM/DD"),"end-date":ut()(n["end-date"],"YYYY/MM/DD")}))}),[]),c.a.createElement(ct,{steps:b,current:o,setCurrent:qe,formValidate:Pe,dispatch:p,form:t,callback:a})},St=function(e,t,a,n,r,i){return[{title:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0440\u0430\u0431\u043e\u0442",content:c.a.createElement(Et,{organisations:e,regions:t,categories:a,form:r,dispatch:i})},{title:"\u0414\u0430\u043d\u043d\u044b\u0435 \u043f\u043e\u0434\u0440\u044f\u0434\u0447\u0438\u043a\u0430",content:c.a.createElement(jt,null)},{title:"\u0421\u0442\u0430\u0442\u0443\u0441 \u0440\u0430\u0431\u043e\u0442",content:c.a.createElement(wt,null)},{title:"\u041e\u0442\u043f\u0440\u0430\u0432\u043a\u0430 \u0434\u0430\u043d\u043d\u044b\u0445",content:c.a.createElement(Ft,{ob:n})}]},Nt=function(){var e=Object(r.useState)(!1),t=Object(M.a)(e,2),a=t[0],n=t[1],i=Object(s.b)(),o=Object(s.c)((function(e){return e.roadmap})),l=o.organisations,u=o.regions,d=o.categories,m=o.formData,f=o.status,p=o.mapData,b=K.a.useForm(),h=Object(M.a)(b,1)[0],E=Object(r.useCallback)(Object(g.a)(y.a.mark((function e(){var t,a,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{t=It(m),a=Ct(t,d,l,u),r=_t(p),i(Te(a={data:a,geometries:r,mapData:p})),i(qe(0)),i(Ke()),"success"===f&&n(!1)}catch(c){console.log(c.message)}case 1:case"end":return e.stop()}}),e)}))),[d,m,i,p,l,f,u]);return c.a.createElement(c.a.Fragment,null,c.a.createElement(T.a,{type:"primary",onClick:function(){i(qe(0)),n(!0)},style:{marginBottom:10}},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"),"success"===f&&c.a.createElement(lt.a,{title:"\u0424\u043e\u0440\u043c\u0430 \u0432\u0432\u043e\u0434\u0430 \u0434\u0430\u043d\u043d\u044b\u0445 \u043f\u043e \u0440\u0435\u043c\u043e\u043d\u0442\u043d\u044b\u043c \u0440\u0430\u0431\u043e\u0442\u0430\u043c",visible:a,onOk:function(){i(qe(0)),n(!1)},onCancel:function(){i(qe(0)),n(!1),i(Ke()),h.resetFields()},width:"80%",footer:null},c.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},c.a.createElement(Dt,{form:h,callback:E}))))},Mt=function(e){var t=e.visible,a=e.setVisible,n=e.record,i=K.a.useForm(),o=Object(M.a)(i,1)[0],l=Object(s.c)((function(e){return e.roadmap})),u=l.organisations,d=l.regions,m=l.categories,f=l.status,p=l.mapData,b=l.formData,h=Object(s.b)();Object(r.useEffect)((function(){var e=n.geometries.coordinates;if(e.length>0){var t=e.map((function(e){return e[0][0]==e[e.length-1][0]?{type:"polygon",coordinates:[e]}:{type:"polyline",coordinates:e}}));h(ze(t))}return function(){h(Ke()),h(Ue({})),o.setFieldsValue({})}}),[]);var E=function(){a(!1)},v=Object(r.useCallback)(Object(g.a)(y.a.mark((function e(){var t,r,c;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{t=It(b),r=Ct(t,m,u,d),c=_t(p),r={data:r,geometries:c},h(qe(0)),h(Ve({reedit:!0,data:r,id:n.id,mapData:p})),o.resetFields(),"success"===f&&a(!1)}catch(i){console.log(i.message)}case 1:case"end":return e.stop()}}),e)}))),[m,u,d,p,b,o,n,a,f]);return c.a.createElement(lt.a,{title:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0443\u043b\u0438\u0446\u044b",visible:t,width:"50%",onCancel:E,onOk:E,footer:[]},c.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},c.a.createElement(Dt,{form:o,callback:v,record:n})))},Yt=function(e){var t={},a=[];if("success"===e.status){for(var n=e.data,r=0;r<n.length;r++)t=Object(m.a)({},t,Object(d.a)({},n[r].name,n[r].name));a=Object.keys(t).map((function(e){return{text:e,value:e}}))}return a},Tt=["2018","2019","2020","2021","2022"].map((function(e){return{value:e,text:e}})).reverse(),Rt=function(){var e=Object(s.c)((function(e){return e.roadmap})),t=e.organisations,a=e.categories,n=e.status,i=e.data,o=e.editedId,l=e.deletedId,u=Object(s.b)(),f=Object(r.useState)(!1),p=Object(M.a)(f,2),b=p[0],y=p[1],g=Object(r.useState)({}),h=Object(M.a)(g,2),E=h[0],v=h[1],O=Object(r.useState)([]),j=Object(M.a)(O,2),k=j[0],w=j[1],x=Object(r.useState)(),I=Object(M.a)(x,2),C=I[0],_=I[1],F=K.a.useForm(),D=Object(M.a)(F,1)[0],S=Object(r.useMemo)((function(){return function(e,t,a,n){return[{title:"\u2116",dataIndex:"id",key:"id",width:"2%",align:"center",render:function(e,t){return c.a.createElement("a",{onClick:function(){n(t),a(!0)}},e)}},{title:"\u0423\u043b\u0438\u0446\u0430",dataIndex:"address",key:"address",render:function(e,t){return c.a.createElement(c.a.Fragment,null,e)}},{title:"\u0423\u0447\u0430\u0441\u0442\u043e\u043a",dataIndex:"area",key:"area"},{title:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f \u0440\u0430\u0431\u043e\u0442",dataIndex:"category",key:"category",filters:Yt(t),onFilter:function(e,t){return 0===t.category.indexOf(e)}},{title:"\u041e\u0442\u0432 \u043e\u0440\u0433\u0430\u043d",dataIndex:"organisation",key:"organisation",filters:Yt(e),onFilter:function(e,t){return 0===t.organisation.indexOf(e)}},{title:"\u0414\u0430\u0442\u0430 \u043d\u0430\u0447\u0430\u043b\u0430",dataIndex:"start-date",key:"start-date",width:"10%",align:"center",filters:Tt,onFilter:function(e,t){return 0===t["start-date"].indexOf(e)}},{title:"\u0414\u0430\u0442\u0430 \u043e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u044f",dataIndex:"end-date",key:"end-date",width:"10%",align:"center",filters:Tt,onFilter:function(e,t){return 0===t["end-date"].indexOf(e)}},{title:"\u0421\u0442\u0430\u0442\u0443\u0441 (%)",dataIndex:"percentage",key:"percentage",editable:!0,width:"5%",rule:!0,type:"number",align:"center",sorter:function(e,t){return t.percentage-e.percentage},sortDirections:["ascend"]}]}(t,a,y,v)}),[t,a,y,v]);Object(r.useEffect)((function(){if(C){if(o){var e=k.find((function(e){return e.id===o}));_((function(t){return t.map((function(t){return t.id===o?e:t}))})),u(Je())}l&&(_((function(e){return e.filter((function(e){return e.id!==l}))})),u(He()))}}),[k,l,o,C]),Object(r.useMemo)((function(){w(i.map((function(e){var t={key:e.id};return Object.keys(e).forEach((function(a){t="status"===a?Object(m.a)({},t,{percentage:e[a].percentage,"is-hidden":e[a]["is-hidden"],"is-canceled":e[a]["is-canceled"],commentary:e[a].commentary}):Object(m.a)({},t,Object(d.a)({},a,e[a]))})),t})))}),[i]);return c.a.createElement(K.a,{form:D},c.a.createElement(K.a.Item,{name:"search"},c.a.createElement(Q.a,{allowClear:!0,placeholder:"\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u0443\u043b\u0438\u0446\u0435",onChange:function(e){_(k.filter((function(t){return!(!t.address||!t.address.toLowerCase().includes(e.target.value.toLowerCase()))||t.id.toString().includes(e.target.value.toLowerCase())})))},style:{width:300}})),c.a.createElement(K.a.Item,{name:"table"},c.a.createElement(oe,{columns:S,data:C||k,setData:w,handleEdit:function(e){u(Ve({reedit:!1,data:{percentage:e.percentage},id:e.id}))},handleDelete:function(e){u(Le(e.id))},loading:"loading"===n})),b&&c.a.createElement(K.a.Item,{name:"modal"},c.a.createElement(Mt,{visible:b,setVisible:y,record:E})))},Vt=function(){var e=Object(s.b)();return Object(r.useEffect)((function(){e(De()),e(Se()),e(Ne()),e(Me())}),[]),c.a.createElement(c.a.Fragment,null,c.a.createElement(Nt,null),c.a.createElement(Rt,null))},Lt=G.a.Option,At=function(){var e=Object(s.c)((function(e){return e.roadmap})),t=e.categories,a=e.data,n=Object(r.useState)([1,2]),i=Object(M.a)(n,2),o=i[0],l=i[1],u=Object(r.useState)(),p=Object(M.a)(u,2),b=p[0],y=p[1],g=Object(s.b)();return c.a.createElement("div",{style:{marginBottom:20}},c.a.createElement("div",{style:{display:"flex",flexWrap:"wrap"}},o.map((function(e){return function(e){var n="success"===t.status?t.data.map((function(e){return e.name})):[];return c.a.createElement(K.a.Item,{style:{marginRight:20}},c.a.createElement(K.a.Item,{name:"category-".concat(e),rules:[{required:!0,message:"\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u043f\u043e\u043b\u0435"}]},c.a.createElement(G.a,{placeholder:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f \u0440\u0430\u0431\u043e\u0442",style:{width:240},allowClear:!0,onChange:function(t){return y((function(n){return Object(m.a)({},n,Object(d.a)({},e,a.filter((function(e){return e.category===t})).map((function(e){return e.id}))))}))}},n.map((function(e,t){return c.a.createElement(Lt,{value:e,key:e},e)})))),b&&b[e]&&c.a.createElement(K.a.Item,{name:"roadwork-".concat(e),rules:[{required:!0,message:"\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u043f\u043e\u043b\u0435"}],key:"roadwork-".concat(e)},c.a.createElement(G.a,{placeholder:"\u0420\u0430\u0431\u043e\u0442\u0430 ".concat(e),style:{width:240},allowClear:!0,onChange:function(e){return g(We([{type:"polygon",coordinates:a.find((function(t){return t.id===e})).geometries.coordinates}]))}},b[e].map((function(e,t){return c.a.createElement(Lt,{value:e,key:e},e)})))))}(e)}))),c.a.createElement("div",{style:{display:"flex",alignItems:"center",marginTop:15}},c.a.createElement("div",{style:{marginRight:25}},c.a.createElement(T.a,{size:"small",type:"primary",shape:"circle",onClick:function(){return l([].concat(Object(f.a)(o),[o.length+1]))}},"+")," ",c.a.createElement("span",null,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0435\u0449\u0435 \u043e\u0434\u043d\u0443")),c.a.createElement(c.a.Fragment,null,c.a.createElement(T.a,{disabled:2===o.length,size:"small",type:"primary",shape:"circle",onClick:function(){l(Object(f.a)(o.filter((function(e){return e!==o.length}))))}},"-")," ",c.a.createElement("span",{style:{marginLeft:5}},"\u0423\u0431\u0440\u0430\u0442\u044c"))),c.a.createElement(K.a.Item,{name:"area"},c.a.createElement(Q.a,{placeholder:"\u0423\u0447\u0430\u0441\u0442\u043e\u043a \u043f\u0435\u0440\u0435\u0441\u0435\u0447\u0435\u043d\u0438\u044f",style:{width:"30%",marginTop:15}})))},Bt=function(){var e=Object(r.useState)(),t=Object(M.a)(e,2),a=t[0],n=t[1],i=K.a.useForm(),o=Object(M.a)(i,1)[0],l=Object(s.b)(),u=function(){var e=Object(g.a)(y.a.mark((function e(){var t,a,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.validateFields();case 2:t=e.sent,a=Object.values(t),r=a.filter((function(e){return"string"!==typeof e})),t={"roadwork-ids":r,"intersection-area":t.area},l(Re(t)),l(Ge()),o.resetFields(),n(!1);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d=[c.a.createElement(T.a,{key:"back",onClick:function(){return n(!1)}},"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"),c.a.createElement(T.a,{key:"submit",type:"primary",onClick:u},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c")];return c.a.createElement(c.a.Fragment,null,c.a.createElement(T.a,{type:"primary",onClick:function(){l(qe(1)),n(!0)},style:{marginBottom:10}},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u0435\u0440\u0435\u0441\u0435\u0447\u0435\u043d\u0438\u0435"),c.a.createElement(lt.a,{title:"\u0424\u043e\u0440\u043c\u0430 \u0432\u0432\u043e\u0434\u0430 \u0434\u0430\u043d\u043d\u044b\u0445 \u043f\u043e \u043f\u0435\u0440\u0435\u0441\u0435\u0447\u0435\u043d\u0438\u044e \u0440\u0430\u0431\u043e\u0442",visible:a,onCancel:function(){l(Ge()),o.resetFields(),n(!1)},width:"80%",footer:d},c.a.createElement(K.a,{form:o},c.a.createElement(At,null),c.a.createElement("div",{style:{width:"100%",paddingLeft:10}},c.a.createElement(nt,null)))))},Pt=function(e){var t=e.visible,a=e.setVisible,n=e.record,i=e.data,o=Object(r.useState)([]),l=Object(M.a)(o,2),u=l[0],d=l[1],m=Object(s.b)();return Object(r.useEffect)((function(){var e=Object.keys(n).filter((function(e){return"\u0420\u0430\u0431\u043e\u0442\u0430"===e.substring(0,6)&&n[e]})).map((function(e){return n[e]})),t=[];e.forEach((function(e){i.forEach((function(a){a.id===e&&(t=[].concat(Object(f.a)(t),[a]))}))}));var a=t.map((function(e){return{type:"polygon",coordinates:e.geometries.coordinates}}));return a=[].concat(Object(f.a)(a),[{type:"placemark",coordinates:n.coordinates}]),d(t),m(qe(1)),m(We(a)),function(){m(qe(0)),m(Ge())}}),[]),c.a.createElement(lt.a,{title:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0443\u043b\u0438\u0446\u044b",visible:t,width:"50%",onCancel:function(){return a(!1)},onOk:function(){return a(!1)},footer:[c.a.createElement(T.a,{key:"close",onClick:function(){return a(!1)}},"\u0417\u0430\u043a\u0440\u044b\u0442\u044c")]},c.a.createElement("div",{style:{display:"flex",flexWrap:"wrap",width:"90%",margin:"auto"}},u.map((function(e,t){return c.a.createElement("div",{style:{width:"".concat(u.length>2?"33%":"50%")}},c.a.createElement("h2",null,"\u0420\u0430\u0431\u043e\u0442\u0430 ",t+1),c.a.createElement(Ft,{ob:e}))}))),c.a.createElement("div",{style:{width:"100%",paddingLeft:10}},c.a.createElement(nt,null)))},qt=function(){var e=Object(s.c)((function(e){return e.roadmap})),t=e.categories,a=e.intersections,n=e.data,i=e.editedId,o=Object(s.b)(),l=Object(r.useState)(!1),u=Object(M.a)(l,2),p=u[0],b=u[1],y=Object(r.useState)({}),g=Object(M.a)(y,2),h=g[0],E=g[1],v=Object(r.useState)([]),O=Object(M.a)(v,2),j=O[0],k=O[1],w=Object(r.useState)(),x=Object(M.a)(w,2),I=x[0],C=x[1],_=K.a.useForm(),F=Object(M.a)(_,1)[0];Object(r.useEffect)((function(){if(i&&I){var e=j.find((function(e){return e.id===i}));console.log("editing filtered data"),C((function(t){return t.map((function(t){return t.id===i?e:t}))})),o(Je({just_id:!1}))}}),[j,i,I]);var D=Object(r.useMemo)((function(){return function(e,t,a,n){var r=[];if("success"===a.status){var i=0;a.data.forEach((function(e){e["roadwork-ids"].length>i&&(i=e["roadwork-ids"].length)}));for(var o=0;o<i;o++)r=[].concat(Object(f.a)(r),[{title:"\u0420\u0430\u0431\u043e\u0442\u0430 ".concat(o+1),dataIndex:"\u0420\u0430\u0431\u043e\u0442\u0430 ".concat(o+1),key:"\u0420\u0430\u0431\u043e\u0442\u0430 ".concat(o+1),width:"10%",align:"center"}])}var l=[{title:"\u2116",dataIndex:"\u2116",key:"\u2116",width:"2%",align:"center",render:function(a,n){return c.a.createElement("a",{onClick:function(){t(n),e(!0)}},a)}},{title:"\u0423\u043b\u0438\u0446\u0430",dataIndex:"address",key:"address",width:"20%"},{title:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f \u0440\u0430\u0431\u043e\u0442",dataIndex:"category",width:"30%",key:"category",filters:Yt(n),onFilter:function(e,t){return 0===t.category.indexOf(e)}}];return[].concat(l,Object(f.a)(r))}(b,E,a,t)}),[b,E,a,t]);Object(r.useMemo)((function(){k(function(e,t){var a=[];return"success"===t.status&&(a=t.data.map((function(t,a){var n={"\u2116":a+1,key:a+1,address:"some street",coordinates:t.intersection.coordinates};return t["roadwork-ids"].forEach((function(t,a){var r=e.find((function(e){return e.id===t}));n=Object(m.a)({},n,Object(d.a)({category:r?r.category:""},"\u0420\u0430\u0431\u043e\u0442\u0430 ".concat(a+1),t))})),n}))),a}(n,a))}),[n,a]);return c.a.createElement(K.a,{form:F},c.a.createElement(K.a.Item,{name:"search"},c.a.createElement(Q.a,{allowClear:!0,placeholder:"\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u0443\u043b\u0438\u0446\u0435",onChange:function(e){C(j.filter((function(t){return t.address&&t.address.toLowerCase().includes(e.target.value.toLowerCase())})))},style:{width:300}})),c.a.createElement(K.a.Item,{name:"table"},c.a.createElement(oe,{columns:D,data:I||j,setData:k,handleEdit:function(e){console.log(e,"run bitch")},handleDelete:function(e){o(Le(e.id))},loading:"success"!==a.status})),p&&c.a.createElement(K.a.Item,{name:"modal"},c.a.createElement(Pt,{visible:p,setVisible:b,record:h,data:n})))},zt=function(){var e=Object(s.b)();return Object(r.useEffect)((function(){e(Ye())}),[]),c.a.createElement(c.a.Fragment,null,c.a.createElement(Bt,null),c.a.createElement(qt,null))},Wt=function(){return c.a.createElement(ot,{tabs:Ut})},Ut=[{title:"\u0421\u043f\u0438\u0441\u043e\u043a \u0440\u0430\u0431\u043e\u0442",child:c.a.createElement(Vt,null)},{title:"\u0421\u043f\u0438\u0441\u043e\u043a \u043f\u0435\u0440\u0435\u0441\u0435\u0447\u0435\u043d\u0438\u0439",child:c.a.createElement(zt,null)}],Jt=(a(419),a(198),Object(l.a)({reducer:{roadmap:Qe}})),Ht=Object(S.g)((function(){return c.a.createElement(s.a,{store:Jt},c.a.createElement(Wt,null))})),Gt=Object(r.createContext)(),Kt=function(e){var t=e.children,a=Object(r.useState)(),n=Object(M.a)(a,2),i=n[0],o=n[1],l=Object(r.useState)(),s=Object(M.a)(l,2),u=s[0],d=s[1],m=Object(r.useState)(),f=Object(M.a)(m,2),p=f[0],b=f[1],y=Object(r.useState)(null),g=Object(M.a)(y,2),h=g[0],E=g[1],v=Object(r.useState)({}),O=Object(M.a)(v,2),j=O[0],k=O[1],w=Object(r.useState)(),x=Object(M.a)(w,2),I=x[0],C=x[1],_=Object(r.useState)({loading:!0}),F=Object(M.a)(_,2),D=F[0],S=F[1],N=Object(r.useState)({loading:!0}),Y=Object(M.a)(N,2),T=Y[0],R=Y[1],V=Object(r.useState)({loading:!0}),L=Object(M.a)(V,2),A=L[0],B=L[1],P=Object(r.useState)({loading:!0}),q=Object(M.a)(P,2),z=q[0],W=q[1],U=Object(r.useState)(),J=Object(M.a)(U,2),H=J[0],G=J[1];return c.a.createElement(Gt.Provider,{value:{selectedValue:i,setSelectedValue:o,filteredData:h,setFilteredData:E,indicators:j,setIndicators:k,dictionary_names:Qt,searchText:I,setSearchText:C,fetchedDictionaryData:D,setFetchedDictionaryData:S,fetchedIndicatorData:A,setFetchedIndicatorData:B,fetchedIndicatorStrategyData:z,setFetchedIndicatorStrategyData:W,fetchedIndicatorInfoData:T,setFetchedIndicatorInfoData:R,selectedDictionaryName:u,setSelectedDictionaryName:d,selectedIndustry:p,setSelectedIndustry:b,modalIndicator:H,setModalIndicator:G}},t)},Qt=["\u0421\u0444\u0435\u0440\u0430","\u0413\u043e\u0441\u0443\u0434\u0430\u0440\u0441\u0442\u0432\u0435\u043d\u043d\u0430\u044f \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0430","\u041f\u0435\u0440\u0438\u043e\u0434\u0438\u0447\u043d\u043e\u0441\u0442\u044c \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f","\u0415\u0434\u0438\u043d\u0438\u0446\u0430 \u0438\u0437\u043c\u0435\u0440\u0435\u043d\u0438\u044f","\u041e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439 \u043e\u0440\u0433\u0430\u043d","\u0418\u0441\u0442\u043e\u0447\u043d\u0438\u043a \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438","\u0421\u0442\u0440\u0430\u0442\u0435\u0433\u0438\u044f 2050"],Xt=function(){var e=Object(g.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E()(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Zt=function(){var e=Object(g.a)(y.a.mark((function e(t,a){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.post(t,a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),$t=function(){var e=Object(g.a)(y.a.mark((function e(t,a){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.put(t,a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),ea=function(){var e=Object(g.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.delete(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ta=function(e){var t=e.handleAdd,a=e.text2,n=e.text1,r=e.text3,i=e.style,o=void 0===i?{margin:"5 0"}:i,l=e.text,s=void 0===l?"+":l,u=function(){return t()};return function(e,t,a){return e?c.a.createElement(T.a,{type:"primary",onClick:u,style:o,className:"AdminButton_style",title:e},s):t?c.a.createElement(T.a,{type:"primary",onClick:u,style:o,className:"AdminButton_style",title:t},s):a?c.a.createElement(T.a,{type:"primary",onClick:u,style:o,className:"AdminButton_style",title:a},s):void 0}(n,a,r)},aa=a(444),na=function(e){var t=e.title;return c.a.createElement(aa.a,{title:t,bordered:!1,style:{width:"100%"},className:"AdminCard_style"},e.children)},ra=(a(442),function(e){var t,a=e.isLink,n=e.isStrategy,i=Object(r.useState)(!1),o=Object(M.a)(i,2),l=o[0],s=o[1],u=Object(r.useContext)(Gt),p=u.dictionary_names,b=u.setModalIndicator,h=u.fetchedDictionaryData,E=u.fetchedIndicatorData,v=u.setFetchedIndicatorData,O=[];Object(r.useEffect)((function(){Xt("/sc-analytic-indicators/api/indicators").then((function(e){v({loading:!1,data:e.data})}))}),[]);var j=[].concat(Object(f.a)(p),["\u041e\u0442\u0440\u0430\u0441\u043b\u044c"]);(j=j.filter((function(e){return n?"\u0421\u0444\u0435\u0440\u0430"!==e:"\u0421\u0442\u0440\u0430\u0442\u0435\u0433\u0438\u044f 2050"!==e}))).sort();var k={},w={};if(!h.loading){var x;h.data.map((function(e){if(k=Object(m.a)({},k,Object(d.a)({},e.name,e.options.map((function(e){return e.name})))),n?"\u0421\u0442\u0440\u0430\u0442\u0435\u0433\u0438\u044f 2050"===e.name:"\u0421\u0444\u0435\u0440\u0430"===e.name){var t,a=e.options.map((function(e){return e.options.map((function(e){return e.name}))}));k=Object(m.a)({},k,{"\u041e\u0442\u0440\u0430\u0441\u043b\u044c":(t=[]).concat.apply(t,Object(f.a)(a))})}w=Object(m.a)({},w,Object(d.a)({},e.name,e.options.map((function(e){return{title:e.name,value:e.name,id:e.id,children:[]}}))))}));var I=h.data.find((function(e){return n?"\u0421\u0442\u0440\u0430\u0442\u0435\u0433\u0438\u044f 2050"===e.name:"\u0421\u0444\u0435\u0440\u0430"===e.name}));w=Object(m.a)({},w,{"\u041e\u0442\u0440\u0430\u0441\u043b\u044c":(x=[]).concat.apply(x,Object(f.a)(I.options.map((function(e){return e.options.map((function(e){return{title:e.name,value:e.name,id:e.id,children:[]}}))}))))})}(t=[{title:"\u0418\u043d\u0434\u0438\u043a\u0430\u0442\u043e\u0440",dataIndex:"\u0418\u043d\u0434\u0438\u043a\u0430\u0442\u043e\u0440",width:250,editable:!0,render:function(e,t){return a?c.a.createElement("a",{onClick:function(){s(!0),b({name:t.key,id:t.id})}},e):e},sorter:function(e,t){return function(e,t){return e===t?0:e>t?1:-1}(e.\u0418\u043d\u0434\u0438\u043a\u0430\u0442\u043e\u0440,t.\u0418\u043d\u0434\u0438\u043a\u0430\u0442\u043e\u0440)},sortDirections:["ascend"]}].concat(Object(f.a)(j.map((function(e){var t,a=k[e]&&k[e].map((function(e){return{text:e,value:e}}));return{title:(t="\u0421\u0442\u0440\u0430\u0442\u0435\u0433\u0438\u044f 2050"===e?"\u0421\u0444\u0435\u0440\u0430":e,t.charAt(0).toUpperCase()+t.slice(1)),dataIndex:e,editable:!0,width:250,data:w[e],filters:a,type:"select",onFilter:function(t,a){return a[e]===t}}})))),E.loading)||(n?E.data.filter((function(e){return e.dictionaries.\u0422\u0438\u043f&&"\u0421\u0442\u0440\u0430\u0442\u0435\u0433\u0438\u044f"===e.dictionaries.\u0422\u0438\u043f})):E.data.filter((function(e){return e.dictionaries.\u0422\u0438\u043f&&"\u0418\u043d\u0434\u0438\u043a\u0430\u0442\u043e\u0440"===e.dictionaries.\u0422\u0438\u043f}))).map((function(e){var t={id:e.id,key:e.name,"\u0418\u043d\u0434\u0438\u043a\u0430\u0442\u043e\u0440":e.name};(function(e){return Object.keys(e).map((function(e){return e}))})(e.dictionaries).map((function(a){t=Object(m.a)({},t,Object(d.a)({},a,e.dictionaries[a]))})),O.push(t)}));var C=function(){var e=Object(g.a)(y.a.mark((function e(t,a,r){var c,i,o,l;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c={name:t["\u0418\u043d\u0434\u0438\u043a\u0430\u0442\u043e\u0440"],dictionaries:[n?229:227]},i=[],e.next=5,a.validateFields();case 5:o=e.sent,l=Object.keys(o).map((function(e){return{name:e,value:o[e]}})),l.filter((function(e){return void 0!==e.value&&"\u0418\u043d\u0434\u0438\u043a\u0430\u0442\u043e\u0440"!==e.name})).map((function(e){if("\u041e\u0442\u0440\u0430\u0441\u043b\u044c"===e.name){var t=n?"\u0421\u0442\u0440\u0430\u0442\u0435\u0433\u0438\u044f 2050":"\u0421\u0444\u0435\u0440\u0430",a=h.data.find((function(e){return e.name===t})).options.find((function(t){return t.options.find((function(t){return t.name===e.value}))})).options.find((function(t){return t.name===e.value}));i=[].concat(Object(f.a)(i),[a.id])}else{var r=h.data.find((function(t){return t.name===e.name})).options.find((function(t){return t.name===e.value}));i=[].concat(Object(f.a)(i),[r.id])}})),c.dictionaries=[].concat(Object(f.a)(c.dictionaries),Object(f.a)(i)),$t("/sc-analytic-indicators/api/indicators/".concat(t.id),c).then((function(e){return Xt("/sc-analytic-indicators/api/indicators").then((function(e){v({loading:!1,data:e.data})}))})).catch((function(e){return console.log(e)})),a.resetFields(),r(""),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),console.log("Validate Failed:",e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t,a,n){return e.apply(this,arguments)}}();return c.a.createElement(c.a.Fragment,null,c.a.createElement(fa,{open:l,setOpen:s,className:"AdminIndicator_style"}),c.a.createElement(ha,{cols:t,data:O,loading:E.loading,url:"/sc-analytic-indicators/api/indicators",setFetchedData:v,save:C,isLink:a}))}),ca=function(e){var t=e.placeholder,a=void 0===t?"\u041d\u043e\u0432\u044b\u0439 \u044d\u043b\u0435\u043c\u0435\u043d\u0442":t,n=e.defaultValue,r=void 0===n?"":n,i=e.required,o=void 0===i||i,l=e.inptRef;return c.a.createElement(Q.a,{placeholder:a,defaultValue:r,required:o,allowClear:!0,ref:l,className:"AdminInput_style"})},ia=function(e){return c.a.createElement(it.a,{defaultActiveKey:"1",tabPosition:e.position||"left",className:e.classname||"Indicators_tab_style"},e.children)},oa=a(446),la=function(e){var t=e.plan,a=Object(r.useState)({date:null,value:null}),n=Object(M.a)(a,2),i=n[0],o=n[1],l=Object(r.useState)({alert:!1}),s=Object(M.a)(l,2),u=s[0],d=s[1],f=Object(r.useContext)(Gt),p=f.modalIndicator,b=f.setFetchedIndicatorInfoData,y=K.a.useForm(),g=Object(M.a)(y,1)[0];return c.a.createElement(K.a,{form:g,className:"Controllers_style_inner"},c.a.createElement(K.a.Item,{className:"Controllers_style_item"},c.a.createElement(Z.a,null,c.a.createElement(K.a.Item,{name:"datepicker_field",className:"datepicker_field_style"},c.a.createElement(Z.a,null,c.a.createElement(mt.a,{onChange:function(e,t){return o((function(e){return Object(m.a)({},e,{date:{year:t}})}))},picker:"year",allowClear:!0,placeholder:"\u0413\u043e\u0434",locale:sa}),c.a.createElement(ya,{placeholder:"\u041c\u0435\u0441\u044f\u0446",data:ua,style:{width:170,background:"#fff",color:"#333"},callBack:function(e){return o((function(t){return Object(m.a)({},t,{date:Object(m.a)({},t.date,{month:e})})}))}}))),c.a.createElement(K.a.Item,{name:"number_field"},c.a.createElement(ce.a,{onChange:function(e){return o((function(t){return Object(m.a)({},t,{value:e})}))},placeholder:t})),c.a.createElement(T.a,{type:"primary",onClick:function(){if(i.date&&i.value){var e={date:i.date.month?"".concat(i.date.year,"-").concat(i.date.month,"-15"):"".concat(i.date.year,"-12-31"),"edit-comment":"",fact:"\u0424\u0430\u043a\u0442"===t?i.value:null,planned:"\u0424\u0430\u043a\u0442"!==t?i.value:null};o({date:null,value:null}),Zt("/sc-analytic-indicators/api/indicators/".concat(p.id,"/indexes"),e).then((function(e){d({alert:!0,message:"\u0423\u0441\u043f\u0435\u0448\u043d\u043e",description:"\u0414\u0430\u043d\u043d\u044b\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u044b \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440",type:"success"}),setTimeout((function(){return d({alert:!1})}),15e3),Xt("/sc-analytic-indicators/api/indicators/".concat(p.id,"/indexes")).then((function(e){b({data:e.data,loading:!1})}))})).catch((function(e){d({alert:!0,message:"\u041e\u0448\u0438\u0431\u043a\u0430",description:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0441 \u0437\u0430\u043f\u0438\u0441\u044c\u044e \u0434\u0430\u043d\u043d\u044b\u0445 \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440",type:"error"}),setTimeout((function(){return d({alert:!1})}),15e3)})),g.resetFields()}else d({alert:!0,message:"\u041e\u0448\u0438\u0431\u043a\u0430",description:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0441\u0435 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b\u0435 \u0434\u0430\u043d\u044b\u043d\u0435 \u0434\u043b\u044f \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0438 \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440",type:"error"}),setTimeout((function(){return d({alert:!1})}),15e3)}},"+"))),u.alert&&c.a.createElement(oa.a,{message:u.message,description:u.description,type:u.type,closable:!0,onClose:function(){return d({alert:!1})},style:{margin:15}}))},sa={lang:{locale:"ru",placeholder:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0434\u0430\u0442\u0443",today:"\u0421\u0435\u0433\u043e\u0434\u043d\u044f",now:"\u0421\u0435\u0439\u0447\u0430\u0441",ok:"\u043e\u043a",clear:"\u043e\u0447\u0438\u0441\u0442\u0438\u0442\u044c",month:"\u041c\u0435\u0441\u044f\u0446",year:"\u0413\u043e\u0434",yearFormat:"YYYY",dateFormat:"M/D/YYYY",dayFormat:"D",dateTimeFormat:"M/D/YYYY HH:mm:ss",monthFormat:"MMMM",monthBeforeYear:!1},timePickerLocale:{placeholder:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0432\u0440\u0435\u043c\u044f"},dateFormat:"YYYY-MM-DD",dateTimeFormat:"YYYY-MM-DD HH:mm:ss",weekFormat:"YYYY-wo",monthFormat:"YYYY-MM"},ua=[{id:"01",title:"\u042f\u043d\u0432\u0430\u0440\u044c",value:"\u042f\u043d\u0432\u0430\u0440\u044c",children:[]},{id:"02",title:"\u0424\u0435\u0432\u0440\u0430\u043b\u044c",value:"\u0424\u0435\u0432\u0440\u0430\u043b\u044c",children:[]},{id:"03",title:"\u041c\u0430\u0440\u0442",value:"\u041c\u0430\u0440\u0442",children:[]},{id:"04",title:"\u0410\u043f\u0440\u0435\u043b\u044c",value:"\u0410\u043f\u0440\u0435\u043b\u044c",children:[]},{id:"05",title:"\u041c\u0430\u0439",value:"\u041c\u0430\u0439",children:[]},{id:"06",title:"\u0418\u044e\u043d\u044c",value:"\u0418\u044e\u043d\u044c",children:[]},{id:"07",title:"\u0418\u044e\u043b\u044c",value:"\u0418\u044e\u043b\u044c",children:[]},{id:"08",title:"\u0410\u0432\u0433\u0443\u0441\u0442",value:"\u0410\u0432\u0433\u0443\u0441\u0442",children:[]},{id:"09",title:"\u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044c",value:"\u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044c",children:[]},{id:"10",title:"\u041e\u043a\u0442\u044f\u0431\u0440\u044c",value:"\u041e\u043a\u0442\u044f\u0431\u0440\u044c",children:[]},{id:"11",title:"\u041d\u043e\u044f\u0431\u0440\u044c",value:"\u041d\u043e\u044f\u0431\u0440\u044c",children:[]},{id:"12",title:"\u0414\u0435\u043a\u0430\u0431\u0440\u044c",value:"\u0414\u0435\u043a\u0430\u0431\u0440\u044c",children:[]}],da=function(e){var t=e.plan,a=(e.isStrategy,Object(r.useContext)(Gt)),n=a.fetchedIndicatorInfoData,i=a.setFetchedIndicatorInfoData,o=a.modalIndicator,l=[{title:"\u0414\u0430\u0442\u0430",dataIndex:"year",key:"year",render:function(e){return c.a.createElement("a",null,e)}},{title:t,dataIndex:t,key:t,type:"number",editable:!0},{title:"\u0414\u0430\u0442\u0430 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f",dataIndex:"date",key:"date"},{title:"\u041a\u043e\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439",key:"comment",editable:!0,dataIndex:"comment"}],s=!n.loading&&n.data.map((function(e,a){var n=e["last-edit"].substr(0,e["last-edit"].indexOf("T")),r=e.date.substr(0,7);return"\u041f\u043b\u0430\u043d"===t?e.planned&&{key:a,id:e.id,year:r,"\u041f\u043b\u0430\u043d":e.planned,date:n,comment:e["edit-comment"]}:e.fact&&{key:a,id:e.id,year:r,"\u0424\u0430\u043a\u0442":e.fact,date:n,comment:e["edit-comment"]}}));s=s&&s.filter((function(e){return void 0!==e&&null!==e}));var u=function(){var e=Object(g.a)(y.a.mark((function e(t,a,r){var c,l,s;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.validateFields();case 3:c=e.sent,l=n.data.find((function(e){return e.id===t.id})),s={date:"".concat(t.year,"-01"),"edit-comment":c.comment,fact:c.\u0424\u0430\u043a\u0442?c.\u0424\u0430\u043a\u0442:l.fact,planned:c.\u041f\u043b\u0430\u043d?c.\u041f\u043b\u0430\u043d:l.planned},$t("/sc-analytic-indicators/api/indexes/".concat(t.id),s).then((function(e){return Xt("/sc-analytic-indicators/api/indicators/".concat(o.id,"/indexes")).then((function(e){i({data:e.data,loading:!1})}))})).catch((function(e){return console.log(e)})),r(""),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log("Validate Failed:",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,a,n){return e.apply(this,arguments)}}();return c.a.createElement(ha,{cols:l,data:s,loading:n.loading,url:"/sc-analytic-indicators/api/indexes",setFetchedData:i,url2:"/sc-analytic-indicators/api/indicators/".concat(o.id,"/indexes"),save:u,edit:function(e,t,a){t.setFieldsValue(Object(m.a)({},e)),a(e.key)}})},ma=function(e){var t=e.plan,a=e.isStrategy;return c.a.createElement("div",{className:"Controllers_style"},c.a.createElement(la,{plan:t}),c.a.createElement(da,{plan:t,isStrategy:a}))},fa=function(e){var t=e.open,a=e.setOpen,n=Object(r.useContext)(Gt),i=n.modalIndicator,o=n.setFetchedIndicatorInfoData;Object(r.useEffect)((function(){return i&&Xt("/sc-analytic-indicators/api/indicators/".concat(i.id,"/indexes")).then((function(e){return o((function(t){return Object(m.a)({},t,{data:e.data,loading:!1})}))})),function(){return o({loading:!0})}}),[i,o]);var l=it.a.TabPane,s=function(){a(!1)};return c.a.createElement(lt.a,{title:i&&i.name,visible:t,width:"auto",onOk:s,onCancel:s,className:"AdminModal_style"},c.a.createElement(ia,{position:"top"},c.a.createElement(l,{tab:"\u041f\u043b\u0430\u043d",key:"1"},c.a.createElement(ma,{plan:"\u041f\u043b\u0430\u043d"})),c.a.createElement(l,{tab:"\u0424\u0430\u043a\u0442",key:"2"},c.a.createElement(ma,{plan:"\u0424\u0430\u043a\u0442"}))))},pa=function(e){e.style,e.ref;var t=Object(r.useRef)(),a=Object(r.useContext)(Gt).setSearchText;return c.a.createElement(Q.a,{placeholder:"\u041f\u043e\u0438\u0441\u043a \u0441\u043f\u0440\u0430\u0432\u043e\u0447\u043d\u0438\u043a\u0430",defaultValue:"",ref:t,allowClear:!0,onChange:function(){return a(t.current.input.value)},className:"AdminSearch_style"})},ba=a(438),ya=function(e){var t=e.data,a=e.placeholder,n=void 0===a?"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0441\u043f\u0440\u0430\u0432\u043e\u0447\u043d\u0438\u043a":a,i=e.style,o=void 0===i?{margin:5,marginLeft:0,marginRight:8}:i,l=e.callBack,s=e.defaultValue,u=Object(r.useContext)(Gt),d=u.setSelectedDictionaryName,m=u.setSelectedIndustry,f=u.dictionary_names,p=function(e){return d(e)},b=function(e){var a=t.find((function(t){return t.value===e}));m(e),l&&a&&l(a.id)},y=function(e){return e.map((function(e){return{title:e,value:e,children:[]}}))};return c.a.createElement(c.a.Fragment,null,t?c.a.createElement(ba.a,{style:o,allowClear:!0,placeholder:n,treeData:t,onChange:b,className:"AdminSelect_style",defaultValue:s}):c.a.createElement(ba.a,{placeholder:n,onChange:p,style:o,treeData:y(f),className:"AdminSelect_style"}))},ga=function(e){var t=e.data,a=e.editing,n=e.dataIndex,r=(e.title,e.inputType),i=(e.record,e.children),o=Object(N.a)(e,["data","editing","dataIndex","title","inputType","record","children"]),l=function(e){switch(e){case"select":return c.a.createElement(G.a,{placeholder:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435",allowClear:!0},t&&t.map((function(e){return c.a.createElement(G.a.Option,{key:"".concat(e.title,"-").concat(e.id),value:e.title},e.title)})));case"number":return c.a.createElement(ce.a,{className:"Edit_input_style"});default:return c.a.createElement(Q.a,{className:"Edit_input_style"})}}(r);return c.a.createElement("td",Object.assign({},o,{className:"Table_td_style_line"}),a?c.a.createElement(K.a.Item,{name:n,style:{margin:0},rules:"select"!==r&&"date"!==r&&"number"!==r&&[{required:!0,message:"\u044d\u0442\u043e \u043f\u043e\u043b\u0435 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u044c!"}]},l):i)},ha=function(e){var t=e.cols,a=e.data,n=e.loading,i=e.url,o=e.url2,l=e.setFetchedData,s=e.save,u=e.isLink,d=Object(r.useContext)(Gt).searchText,p=Object(r.useState)(),b=Object(M.a)(p,2),y=b[0],g=b[1],h=Object(r.useState)(""),E=Object(M.a)(h,2),v=E[0],O=E[1],j=K.a.useForm(),k=Object(M.a)(j,1)[0];Object(r.useEffect)((function(){a&&d&&g(a.filter((function(e){var t=e.children&&e.children.some((function(e){return e.key.toLowerCase().includes(d.toLowerCase())})),a=e.key.toLowerCase().includes(d.toLowerCase());return t||a})))}),[a,d]);var w=function(e){return e.key===v},x=function(){O("")},I=u?t:[].concat(Object(f.a)(t),[{title:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0435",dataIndex:"",key:"x",render:function(e,t){return w(t)?c.a.createElement("span",null,c.a.createElement("a",{onClick:function(){return s(t,k,O)},style:{marginRight:8}},c.a.createElement(ee.a,{className:"icon_edit_btn_style",title:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})),c.a.createElement(X.a,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043e\u043c\u0435\u043d\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f?",onConfirm:x},c.a.createElement(te.a,{className:"icon_edit_btn_style",title:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}))):c.a.createElement(Z.a,null,c.a.createElement("a",{disabled:""!==v,onClick:function(){return function(e,t,a){t.setFieldsValue(Object(m.a)({},e)),a(e.key)}(t,k,O)}},c.a.createElement(ae.a,{className:"icon_edit_btn_style",title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})),c.a.createElement(X.a,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0434\u0430\u043d\u044b\u043d\u0435?",onConfirm:function(){return C(t.id)}},c.a.createElement(ne.a,{className:"icon_edit_btn_style",title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})))}}]);t="\u0412\u0441\u0435 \u0441\u043f\u0440\u0430\u0432\u043e\u0447\u043d\u0438\u043a\u0438"===t[0].title?t:I;var C=function(e){ea("".concat(i,"/").concat(e)).then((function(e){return Xt(o||i).then((function(e){return l({loading:!1,data:e.data})})).catch((function(e){return console.log(e)}))}))},_=t.map((function(e,t){return e.editable?Object(m.a)({},e,{onCell:function(t){return{record:t,setIndicator:e.setIndicator,inputType:e.type,dataIndex:e.dataIndex,title:e.title,data:e.data,editing:w(t),callBack:e.callBack}}}):e}));return c.a.createElement(K.a,{form:k,component:!1},c.a.createElement($.a,{components:{body:{cell:ga}},locale:{filterTitle:"\u041c\u0435\u043d\u044e \u0444\u0438\u043b\u044c\u0442\u0440\u0430",filterConfirm:"\u041e\u043a",filterReset:"\u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c",filterEmptyText:"\u041d\u0435\u0442 \u0444\u0438\u043b\u044c\u0442\u0440\u043e\u0432",selectAll:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0443\u044e \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443",selectInvert:"Invert current page",selectionAll:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0432\u0441\u0435",sortTitle:"\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c",expand:"Expand row",collapse:"Collapse row",triggerDesc:"\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u043e \u0443\u0431\u044b\u0432\u0430\u043d\u0438\u044e",triggerAsc:"\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u043e \u0432\u043e\u0437\u0440\u0430\u0441\u0442\u0430\u043d\u0438\u044e",cancelSort:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0443"},columns:_,dataSource:d?y:a,loading:n,pagination:{pageSizeOptions:["10","20","25","30"],showSizeChanger:!0,locale:{items_per_page:""},onChange:x},className:"AdminTable_style"}))},Ea=function(){var e,t=Object(r.useContext)(Gt),a=t.selectedDictionaryName,n=t.fetchedDictionaryData,i=t.setFetchedDictionaryData,o=[];if(e=a?[{title:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435",dataIndex:a,editable:!0,width:"90%"}]:[{title:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435",dataIndex:"All",width:"90%",padding:"10px"}],!n.loading){var l,s=n.data.filter((function(e){return"\u0422\u0438\u043f"!==e.name})),u=s.find((function(e){return e.name===a}));o=a?u.options.map((function(e){var t;return e.options.length>0?(t={key:e.name,id:e.id,tag:e.tag,"parent-id":u.id},Object(d.a)(t,e.tag,e.name),Object(d.a)(t,"children",e.options.map((function(t){var a;return a={key:t.name},Object(d.a)(a,e.tag,t.name),Object(d.a)(a,"parent-id",e.id),Object(d.a)(a,"tag",e.tag),Object(d.a)(a,"id",t.id),a}))),t):Object(d.a)({key:e.name,id:e.id,tag:e.tag,"parent-id":u.id},a,e.name)})):(l=[]).concat.apply(l,Object(f.a)(s.map((function(e){return"\u0421\u0444\u0435\u0440\u0430"===e.name||"\u0421\u0442\u0440\u0430\u0442\u0435\u0433\u0438\u044f 2050"===a?e.options.map((function(e){return{key:e.name,All:e.name,children:e.options.map((function(e){return{key:e.name,All:e.name}}))}})):{key:e.name,All:e.name,children:e.options.map((function(e){return{key:e.name,All:e.name}}))}}))))}var m=function(){var e=Object(g.a)(y.a.mark((function e(t,a,n){var r,c;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.validateFields();case 3:r=e.sent,c={name:r[t.tag],tag:t.tag},$t("/sc-analytic-indicators/api/dictionaries/".concat(t.id),c).then((function(e){return Xt("/sc-analytic-indicators/api/dictionaries").then((function(e){return i({loading:!1,data:e.data})}))})).catch((function(e){return console.log(e)})),n(""),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log("Validate Failed:",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,a,n){return e.apply(this,arguments)}}();return c.a.createElement(ha,{cols:e,data:o,loading:n.loading,url:"/sc-analytic-indicators/api/dictionaries",setFetchedData:i,save:m})},va=function(e){var t,a=e.ant_form,n=(e.setIsError,Object(r.useRef)()),i=Object(r.useRef)(),o=Object(r.useState)({alert:!1}),l=Object(M.a)(o,2),s=l[0],u=l[1],d=Object(r.useContext)(Gt),m=d.selectedIndustry,f=d.selectedDictionaryName,p=d.fetchedDictionaryData,b=d.setFetchedDictionaryData;p.loading||(t=p.data.find((function(e){return e.name===f})));var y=[];return t&&(y=t.options.map((function(e){return{id:e.id,title:e.name,value:e.name,children:[]}}))),c.a.createElement(c.a.Fragment,null,f&&c.a.createElement(K.a.Item,{name:"dictionary-controllers Controllers_style"},c.a.createElement("div",{className:"form_add_sphere Controllers_style_inner"},c.a.createElement(ca,{inptRef:n,required:!0,placeholder:"\u0421\u0444\u0435\u0440\u0430"===f||"\u0421\u0442\u0440\u0430\u0442\u0435\u0433\u0438\u044f 2050"===f?"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u043e\u0432\u0443\u044e \u0441\u0444\u0435\u0440\u0443":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u043e\u0432\u044b\u0439 \u044d\u043b\u0435\u043c\u0435\u043d\u0442"}),c.a.createElement(ta,{handleAdd:function(){if(n.current.input.value){var e=n.current.input.value,r={"parent-id":t.id,tag:f,name:e,options:[]};Zt("/sc-analytic-indicators/api/dictionaries",r).then((function(e){u({alert:!0,message:"\u0423\u0441\u043f\u0435\u0448\u043d\u043e",description:"\u0414\u0430\u043d\u043d\u044b\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u044b \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440",type:"success"}),setTimeout((function(){return u({alert:!1})}),3e3),Xt("/sc-analytic-indicators/api/dictionaries").then((function(e){return b({loading:!1,data:e.data})})).catch((function(e){u({alert:!0,message:"\u041e\u0448\u0438\u0431\u043a\u0430",description:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0441 \u0437\u0430\u043f\u0438\u0441\u044c\u044e \u0434\u0430\u043d\u043d\u044b\u0445 \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440",type:"error"}),setTimeout((function(){return u({alert:!1})}),3e3)}))})),a.resetFields()}else u({alert:!0,message:"\u041e\u0448\u0438\u0431\u043a\u0430",description:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0434\u043b\u044f \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0438 \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440",type:"error"}),setTimeout((function(){return u({alert:!1})}),3e3)},text1:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u0444\u0435\u0440\u0443"}))),"\u0421\u0444\u0435\u0440\u0430"===f||"\u0421\u0442\u0440\u0430\u0442\u0435\u0433\u0438\u044f 2050"===f?c.a.createElement(K.a.Item,{className:"form_add_sphere_wrap"},c.a.createElement(ya,{data:y,placeholder:"\u0421\u0434\u0435\u043b\u0430\u0439\u0442\u0435 \u0432\u044b\u0431\u043e\u0440"}),c.a.createElement("div",{className:"form_add_sphere"},c.a.createElement(K.a.Item,{name:"dictionary-child-controllers"},c.a.createElement(ca,{inptRef:i,placeholder:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u043e\u0432\u0443\u044e \u043e\u0442\u0440\u0430\u0441\u043b\u044c",required:!0})),c.a.createElement(ta,{handleAdd:function(){if(m&&i.current.input.value){var e=i.current.input.value,n={"parent-id":t.options.find((function(e){return e.name===m})).id,tag:"\u041e\u0442\u0440\u0430\u0441\u043b\u044c",name:e,options:[]};Zt("/sc-analytic-indicators/api/dictionaries",n).then((function(e){u({alert:!0,message:"\u0423\u0441\u043f\u0435\u0448\u043d\u043e",description:"\u0414\u0430\u043d\u043d\u044b\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u044b \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440",type:"success"}),setTimeout((function(){return u({alert:!1})}),3e3),Xt("/sc-analytic-indicators/api/dictionaries").then((function(e){return b({loading:!1,data:e.data})})).catch((function(e){u({alert:!0,message:"\u041e\u0448\u0438\u0431\u043a\u0430",description:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0441 \u0437\u0430\u043f\u0438\u0441\u044c\u044e \u0434\u0430\u043d\u043d\u044b\u0445 \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440",type:"error"}),setTimeout((function(){return u({alert:!1})}),3e3)}))})),a.resetFields()}else u({alert:!0,message:"\u041e\u0448\u0438\u0431\u043a\u0430",description:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0441\u0435 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b\u0435 \u0434\u0430\u043d\u044b\u043d\u0435 \u0434\u043b\u044f \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0438 \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440",type:"error"}),setTimeout((function(){return u({alert:!1})}),3e3)},text2:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043e\u0442\u0440\u0430\u0441\u043b\u044c"}))):null,s.alert&&c.a.createElement(oa.a,{message:s.message,description:s.description,type:s.type,closable:!0,onClose:function(){return u({alert:!1})},style:{margin:15}}))},Oa=function(){var e=K.a.useForm(),t=Object(M.a)(e,1)[0],a=Object(r.useContext)(Gt).setFetchedDictionaryData;return Object(r.useEffect)((function(){Xt("/sc-analytic-indicators/api/dictionaries").then((function(e){a({loading:!1,data:e.data})}))}),[]),c.a.createElement(K.a,{form:t},c.a.createElement(K.a.Item,{style:{display:"flex",justifyContent:"space-between"}},c.a.createElement("div",{className:"first_stage_filter"},c.a.createElement(ya,null))),c.a.createElement(va,{ant_form:t}),c.a.createElement(K.a.Item,null,c.a.createElement(pa,{style:{width:"40%",margin:"5 0",marginRight:8}}),c.a.createElement(Ea,null)))},ja=function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(Kt,null,c.a.createElement(Oa,null)))},ka=function(e){var t=e.isStrategy,a=Object(r.useState)([]),n=Object(M.a)(a,2),i=n[0],o=n[1],l=Object(r.useContext)(Gt),s=l.fetchedDictionaryData,u=l.setFetchedIndicatorData,d=l.setFetchedIndicatorStrategyData,m=Object(r.useRef)(),p=K.a.useForm(),b=Object(M.a)(p,1)[0],y=Object(r.useState)({alert:!1}),g=Object(M.a)(y,2),h=g[0],E=g[1],v=function(e){o((function(t){return[].concat(Object(f.a)(t),[e])}))};return c.a.createElement("div",{className:"form_indicators"},!s.loading&&c.a.createElement(K.a,{form:b},c.a.createElement(K.a.Item,null,c.a.createElement(K.a.Item,{name:"input"},c.a.createElement(ca,{placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0438\u043d\u0434\u0438\u043a\u0430\u0442\u043e\u0440\u0430",inptRef:m,style:{margin:20,marginLeft:0,marginTop:0,minWidth:250,width:250}})),function(){var e,a=[],n=[];s.loading||(n=s.data.find((function(e){return t?"\u0421\u0442\u0440\u0430\u0442\u0435\u0433\u0438\u044f 2050"===e.name:"\u0421\u0444\u0435\u0440\u0430"===e.name})).options.map((function(e){return e.options.map((function(e){return{name:e.name,id:e.id}}))})),a=s.data.filter((function(e){return"\u0422\u0438\u043f"!==e.name})).filter((function(e){return t?"\u0421\u0444\u0435\u0440\u0430"!==e.name:"\u0421\u0442\u0440\u0430\u0442\u0435\u0433\u0438\u044f 2050"!==e.name})).map((function(e,a){var n=t?"\u0421\u0442\u0440\u0430\u0442\u0435\u0433\u0438\u044f 2050":"\u0421\u0444\u0435\u0440\u0430",r=e.options.map((function(t){return e.name===n?{id:t.id,title:t.name,value:t.name,children:[]}:{id:t.id,title:t.name,value:t.name,children:t.options.map((function(e){return{id:e.id,title:e.name,value:e.name,children:[]}}))}}));return c.a.createElement(ya,{key:a,placeholder:"\u0421\u0442\u0440\u0430\u0442\u0435\u0433\u0438\u044f 2050"===e.name?"\u0421\u0444\u0435\u0440\u0430":e.name,data:r,callBack:function(e){return v(e)}})})));return a.push(c.a.createElement(ya,{key:45,placeholder:"\u041e\u0442\u0440\u0430\u0441\u043b\u044c",data:(e=[]).concat.apply(e,Object(f.a)(n)).map((function(e){return{id:e.id,title:e.name,value:e.name,children:[]}})),callBack:function(e){return v(e)}})),a.map((function(e){return e}))}(),c.a.createElement(ta,{type:"primary",handleAdd:function(){if(m.current.input.value){var e=t?229:227,a={name:m.current.input.value,dictionaries:[].concat(Object(f.a)(i),[e])};Zt("/sc-analytic-indicators/api/indicators",a).then((function(e){E({alert:!0,message:"\u0423\u0441\u043f\u0435\u0448\u043d\u043e",description:"\u0414\u0430\u043d\u043d\u044b\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u044b \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440",type:"success"}),setTimeout((function(){return E({alert:!1})}),3e3),Xt("/sc-analytic-indicators/api/indicators").then((function(e){u({loading:!1,data:e.data}),d({loading:!1,data:e.data})})).catch((function(e){E({alert:!0,message:"\u041e\u0448\u0438\u0431\u043a\u0430",description:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0441 \u0437\u0430\u043f\u0438\u0441\u044c\u044e \u0434\u0430\u043d\u043d\u044b\u0445 \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440",type:"error"}),setTimeout((function(){return E({alert:!1})}),3e3)}))})),b.resetFields()}else E({alert:!0,message:"\u041e\u0448\u0438\u0431\u043a\u0430",description:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0441\u0435 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b\u0435 \u0434\u0430\u043d\u044b\u043d\u0435 \u0434\u043b\u044f \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0438 \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440",type:"error"}),setTimeout((function(){return E({alert:!1})}),3e3)},text3:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0438\u043d\u0434\u0438\u043a\u0430\u0442\u043e\u0440"})),h.alert&&c.a.createElement(oa.a,{message:h.message,description:h.description,type:h.type,closable:!0,onClose:function(){return E({alert:!1})},style:{margin:15}})))},wa=function(){var e=it.a.TabPane,t=Object(r.useContext)(Gt),a=t.fetchedDictionaryData,n=t.setFetchedDictionaryData;return Object(r.useEffect)((function(){a.data||Xt("/sc-analytic-indicators/api/dictionaries").then((function(e){n({loading:!1,data:e.data})}))}),[]),c.a.createElement(ia,{position:"top"},c.a.createElement(e,{tab:"\u041f\u0430\u043d\u0435\u043b\u044c \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u0430",key:"1"},c.a.createElement(ka,null),c.a.createElement(ra,null)),c.a.createElement(e,{tab:"\u0418\u043d\u0434\u0438\u043a\u0430\u0442\u043e\u0440 \u0441\u0442\u0440\u0430\u0442\u0435\u0433\u0438\u0438",key:"2"},c.a.createElement(ka,{isStrategy:!0}),c.a.createElement(ra,{isStrategy:!0})))},xa=function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(Kt,null,c.a.createElement(wa,null)))},Ia=function(){var e=it.a.TabPane;return c.a.createElement(c.a.Fragment,null,c.a.createElement(Kt,null,c.a.createElement(ia,{position:"top"},c.a.createElement(e,{tab:"\u041f\u0430\u043d\u0435\u043b\u044c \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u0430",key:"1"},c.a.createElement(na,null,c.a.createElement(ra,{isLink:!0}))),c.a.createElement(e,{tab:"\u0418\u043d\u0434\u0438\u043a\u0430\u0442\u043e\u0440 \u0441\u0442\u0440\u0430\u0442\u0435\u0433\u0438\u0438",key:"2"},c.a.createElement(na,null,c.a.createElement(ra,{isStrategy:!0,isLink:!0}))))))},Ca=function(){return c.a.createElement(S.d,null,c.a.createElement(S.a,{exact:!0,from:"/",to:"/\u0420\u043e\u043b\u0438"}),c.a.createElement(J,{exact:!0,path:"/\u0420\u043e\u043b\u0438",component:Ie}),c.a.createElement(J,{exact:!0,path:"/\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438",component:ve}),c.a.createElement(J,{exact:!0,path:"/\u041a\u0430\u0440\u0442\u0430 \u0440\u0435\u043c\u043e\u043d\u0442\u043d\u044b\u0445 \u0440\u0430\u0431\u043e\u0442",component:Ht}),c.a.createElement(S.b,{path:"/\u0421\u043f\u0440\u0430\u0432\u043e\u0447\u043d\u0438\u043a\u0438",component:function(){return c.a.createElement(U,null,c.a.createElement(ja,null))}}),c.a.createElement(S.b,{path:"/\u0410\u043d\u0430\u043b\u0438\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0438\u043d\u0434\u0438\u043a\u0430\u0442\u043e\u0440\u044b",component:function(){return c.a.createElement(U,null,c.a.createElement(xa,null))}}),c.a.createElement(S.b,{path:"/\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u0438 \u0438\u043d\u0434\u0438\u043a\u0430\u0442\u043e\u0440\u043e\u0432",component:function(){return c.a.createElement(U,null,c.a.createElement(Ia,null))}}),c.a.createElement(S.b,{exact:!0,path:"/\u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f",component:H}),c.a.createElement(S.b,{exact:!0,path:"*",render:function(){return c.a.createElement("div",null,"Page not found")}}))};a(432);var _a=function(){return c.a.createElement(Ca,null)},Fa=Object(l.a)({reducer:{admin:D}});o.a.render(c.a.createElement(s.a,{store:Fa},c.a.createElement(u.a,{basename:"/admin"},c.a.createElement(_a,null))),document.getElementById("root"))}},[[240,1,2]]]);
//# sourceMappingURL=main.6b90ede0.chunk.js.map